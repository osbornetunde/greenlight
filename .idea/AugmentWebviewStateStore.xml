<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AugmentWebviewStateStore">
    <option name="stateMap">
      <map>
        <entry key="CHAT_STATE" value="eyJjdXJyZW50Q29udmVyc2F0aW9uSWQiOiI3YzkzN2IzNS1mYmZmLTQ2YmYtYTdkOS1kOTRlMTc4YzEyNjEiLCJjb252ZXJzYXRpb25zIjp7IjdjOTM3YjM1LWZiZmYtNDZiZi1hN2Q5LWQ5NGUxNzhjMTI2MSI6eyJpZCI6IjdjOTM3YjM1LWZiZmYtNDZiZi1hN2Q5LWQ5NGUxNzhjMTI2MSIsIm5hbWUiOiJXZWxjb21lIHRvIHRoZSBBdWdtZW50IEFnZW50IiwiY3JlYXRlZEF0SXNvIjoiMjAyNS0wNC0yMFQxNjozMDo0MS41OTdaIiwibGFzdEludGVyYWN0ZWRBdElzbyI6IjIwMjUtMDUtMDhUMjA6MTg6MjUuNDI3WiIsImNoYXRIaXN0b3J5IjpbeyJyZXF1ZXN0X2lkIjoiNjZmNzlkYmMtMTQwYS00ODVlLThkNjAtMzUzMzM5MTI2ZDFjIiwidXVpZCI6IjE0MmUxN2ZkLTBiNTQtNGU2Zi1hZDVkLWU3ZjZmNWUxM2E4YSIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MCwidG9UaW1lc3RhbXAiOjE3NDUxNjY2NDE1OTgsInNlZW5fc3RhdGUiOiJzZWVuIn0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImZmMzI5MjU0LTY3N2MtNGM3YS04Mjc1LTM0NmM4OGFhMTYzYyIsInJlcXVlc3RfbWVzc2FnZSI6ImV4cGxhaW4gc2VsZWN0aW9uIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6ImV4cGxhaW4gc2VsZWN0aW9uIn1dfV19LCJtZW50aW9uZWRfaXRlbXMiOltdLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFLY1Y4azV6clVwRHRuczZYVUJLNGdhIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJTaG93IG1lIHRoZSBmdWxsIGNvbnRleHQgYXJvdW5kIHRoZSBsaW5lIFxcXCJpZiBkYXRhLlZhbGlkYXRlRmlsdGVycyh2LCBpbnB1dC5GaWx0ZXJzKTshdi5WYWxpZCgpIHtcXFwiIGluIGNtZC9hcGkvbW92aWVzLmdvLiBJbmNsdWRlIHRoZSBzdXJyb3VuZGluZyBmdW5jdGlvbiBhbmQgYW55IHJlbGV2YW50IGltcG9ydHMgb3IgdHlwZSBkZWZpbml0aW9ucy5cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJJJ2xsIGV4cGxhaW4gdGhlIHNlbGVjdGVkIGNvZGUgc25pcHBldCBmcm9tIHRoZSBgY21kL2FwaS9tb3ZpZXMuZ29gIGZpbGUuXG5cbkxldCBtZSBmaXJzdCBnYXRoZXIgbW9yZSBjb250ZXh0IGFib3V0IHRoaXMgY29kZSB0byBwcm92aWRlIGEgYmV0dGVyIGV4cGxhbmF0aW9uLlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiJleHBsYWluIHNlbGVjdGlvbiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy9vc2Jvcm5lL0Rvd25sb2Fkcy90ZWNoLWxlYXJuaW5ncy9ncmVlbmxpZ2h0IiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9vc2Jvcm5lL0Rvd25sb2Fkcy90ZWNoLWxlYXJuaW5ncy9ncmVlbmxpZ2h0In1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wOFQyMDoxNzo1MC42MjZaIiwicmVzcG9uc2VfdGV4dCI6IkknbGwgZXhwbGFpbiB0aGUgc2VsZWN0ZWQgY29kZSBzbmlwcGV0IGZyb20gdGhlIGBjbWQvYXBpL21vdmllcy5nb2AgZmlsZS5cblxuTGV0IG1lIGZpcnN0IGdhdGhlciBtb3JlIGNvbnRleHQgYWJvdXQgdGhpcyBjb2RlIHRvIHByb3ZpZGUgYSBiZXR0ZXIgZXhwbGFuYXRpb24uXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNzk4YzgyNjgtZjA4Yy00MmNiLThmNDYtZTgyNTc3NWVjNTg4IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxTk44SGlreHpXcGg4a21WanhacHR6eSIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiU2hvdyBtZSB0aGUgVmFsaWRhdGVGaWx0ZXJzIGZ1bmN0aW9uIGluIHRoZSBkYXRhIHBhY2thZ2UuIEl0IHNob3VsZCBiZSByZWxhdGVkIHRvIGZpbHRlcmluZyBtb3ZpZXMuXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0IG1lIGFsc28gY2hlY2sgaWYgdGhlcmUncyBhIGBWYWxpZGF0ZUZpbHRlcnNgIGZ1bmN0aW9uIGluIHRoZSBjb2RlYmFzZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IGNtZC9hcGkvbW92aWVzLmdvXG5wYWNrYWdlIG1haW5cblxuaW1wb3J0IChcblx0XCJlcnJvcnNcIlxuXHRcImZtdFwiXG5cdFwiZ3JlZW5saWdodC50dW5kZW9zYm9ybmUvaW50ZXJuYWwvZGF0YVwiXG5cdFwiZ3JlZW5saWdodC50dW5kZW9zYm9ybmUvaW50ZXJuYWwvdmFsaWRhdG9yXCJcblx0XCJuZXQvaHR0cFwiXG4pXG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIGNyZWF0ZU1vdmllSGFuZGxlcih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkge1xuXG5cdHZhciBpbnB1dCBzdHJ1Y3Qge1xuXHRcdFRpdGxlICAgc3RyaW5nICAgICAgIGBqc29uOlwidGl0bGVcImBcblx0XHRZZWFyICAgIGludDMyICAgICAgICBganNvbjpcInllYXJcImBcblx0XHRSdW50aW1lIGRhdGEuUnVudGltZSBganNvbjpcInJ1bnRpbWVcImBcblx0XHRHZW5yZXMgIFtdc3RyaW5nICAgICBganNvbjpcImdlbnJlc1wiYFxuXHR9XG5cblx0ZXJyIDo9IGFwcC5yZWFkSlNPTih3LCByLCAmaW5wdXQpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5iYWRSZXF1ZXN0UmVzcG9uc2UodywgciwgZXJyKVxuXHRcdHJldHVyblxuXHR9XG5cblx0bW92aWUgOj0gJmRhdGEuTW92aWV7XG5cdFx0VGl0bGU6ICAgaW5wdXQuVGl0bGUsXG5cdFx0WWVhcjogICAgaW5wdXQuWWVhcixcblx0XHRSdW50aW1lOiBpbnB1dC5SdW50aW1lLFxuXHRcdEdlbnJlczogIGlucHV0LkdlbnJlcyxcblx0fVxuXG5cdHYgOj0gdmFsaWRhdG9yLk5ldygpXG5cblx0aWYgZGF0YS5WYWxpZGF0ZU1vdmllKHYsIG1vdmllKTsgIXYuVmFsaWQoKSB7XG5cdFx0YXBwLmZhaWxlZFZhbGlkYXRpb25SZXNwb25zZSh3LCByLCB2LkVycm9ycylcblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC5tb2RlbHMuTW92aWVzLkluc2VydChtb3ZpZSlcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdHJldHVyblxuXHR9XG5cblx0aGVhZGVycyA6PSBtYWtlKGh0dHAuSGVhZGVyKVxuXHRoZWFkZXJzLlNldChcIkxvY2F0aW9uXCIsIGZtdC5TcHJpbnRmKFwiL3YxL21vdmllcy8lZFwiLCBtb3ZpZS5JRCkpXG5cblx0ZXJyID0gYXBwLndyaXRlSlNPTih3LCBodHRwLlN0YXR1c0NyZWF0ZWQsIGVudmVsb3Ble1wibW92aWVcIjogbW92aWV9LCBoZWFkZXJzKVxuXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0fVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBzaG93TW92aWVIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cblx0aWQsIGVyciA6PSBhcHAucmVhZElEUGFyYW0ocilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRyZXR1cm5cblx0fVxuXG5cdG1vdmllLCBlcnIgOj0gYXBwLm1vZGVscy5Nb3ZpZXMuR2V0KGlkKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRzd2l0Y2gge1xuXHRcdGNhc2UgZXJyb3JzLklzKGVyciwgZGF0YS5FcnJSZWNvcmROb3RGb3VuZCk6XG5cdFx0XHRhcHAubm90Rm91bmRSZXNwb25zZSh3LCByKVxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdFx0fVxuXHRcdHJldHVyblxuXHR9XG5cblx0ZXJyID0gYXBwLndyaXRlSlNPTih3LCBodHRwLlN0YXR1c09LLCBlbnZlbG9wZXtcIm1vdmllXCI6IG1vdmllfSwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdH1cblxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSB1cGRhdGVNb3ZpZUhhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblx0aWQsIGVyciA6PSBhcHAucmVhZElEUGFyYW0ocilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRyZXR1cm5cblx0fVxuXG5cdG1vdmllLCBlcnIgOj0gYXBwLm1vZGVscy5Nb3ZpZXMuR2V0KGlkKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRzd2l0Y2gge1xuXHRcdGNhc2UgZXJyb3JzLklzKGVyciwgZGF0YS5FcnJSZWNvcmROb3RGb3VuZCk6XG5cdFx0XHRhcHAubm90Rm91bmRSZXNwb25zZSh3LCByKVxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdFx0fVxuXHRcdHJldHVyblxuXHR9XG5cblx0dmFyIGlucHV0IHN0cnVjdCB7XG5cdFx0VGl0bGUgICAqc3RyaW5nICAgICAgIGBqc29uOlwidGl0bGVcImBcblx0XHRZZWFyICAgICppbnQzMiAgICAgICAgYGpzb246XCJ5ZWFyXCJgXG5cdFx0UnVudGltZSAqZGF0YS5SdW50aW1lIGBqc29uOlwicnVudGltZVwiYFxuXHRcdEdlbnJlcyAgW11zdHJpbmcgICAgICBganNvbjpcImdlbnJlc1wiYFxuXHR9XG5cblx0ZXJyID0gYXBwLnJlYWRKU09OKHcsIHIsICZpbnB1dClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLmJhZFJlcXVlc3RSZXNwb25zZSh3LCByLCBlcnIpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRpZiBpbnB1dC5UaXRsZSAhPSBuaWwge1xuXHRcdG1vdmllLlRpdGxlID0gKmlucHV0LlRpdGxlXG5cdH1cblx0aWYgaW5wdXQuWWVhciAhPSBuaWwge1xuXHRcdG1vdmllLlllYXIgPSAqaW5wdXQuWWVhclxuXHR9XG5cdGlmIGlucHV0LlJ1bnRpbWUgIT0gbmlsIHtcblx0XHRtb3ZpZS5SdW50aW1lID0gKmlucHV0LlJ1bnRpbWVcblx0fVxuXHRpZiBpbnB1dC5HZW5yZXMgIT0gbmlsIHtcblx0XHRtb3ZpZS5HZW5yZXMgPSBpbnB1dC5HZW5yZXNcblx0fVxuXG5cdHYgOj0gdmFsaWRhdG9yLk5ldygpXG5cblx0aWYgZGF0YS5WYWxpZGF0ZU1vdmllKHYsIG1vdmllKTsgIXYuVmFsaWQoKSB7XG5cdFx0YXBwLmZhaWxlZFZhbGlkYXRpb25SZXNwb25zZSh3LCByLCB2LkVycm9ycylcblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC5tb2RlbHMuTW92aWVzLlVwZGF0ZShtb3ZpZSlcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdHJldHVyblxuXHR9XG5cblx0ZXJyID0gYXBwLndyaXRlSlNPTih3LCBodHRwLlN0YXR1c09LLCBlbnZlbG9wZXtcIm1vdmllXCI6IG1vdmllfSwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdH1cblxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBkZWxldGVNb3ZpZUhhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblx0aWQsIGVyciA6PSBhcHAucmVhZElEUGFyYW0ocilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC5tb2RlbHMuTW92aWVzLkRlbGV0ZShpZClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIGRhdGEuRXJyUmVjb3JkTm90Rm91bmQpOlxuXHRcdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRkZWZhdWx0OlxuXHRcdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdH1cblx0XHRyZXR1cm5cblx0fVxuXHRlcnIgPSBhcHAud3JpdGVKU09OKHcsIGh0dHAuU3RhdHVzT0ssIGVudmVsb3Ble1wibWVzc2FnZVwiOiBcIm1vdmllIHN1Y2Nlc3NmdWxseSBkZWxldGVkXCJ9LCBuaWwpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0fVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBsaXN0TW92aWVzSGFuZGxlcih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkge1xuXHR2YXIgaW5wdXQgc3RydWN0IHtcblx0XHRUaXRsZSAgICBzdHJpbmdcblx0XHRHZW5yZXMgICBbXXN0cmluZ1xuXHRcdFBhZ2UgICAgIGludFxuXHRcdFBhZ2VTaXplIGludFxuXHRcdHNvcnQgICAgIHN0cmluZ1xuXHR9XG5cblx0diA6PSB2YWxpZGF0b3IuTmV3KClcblxuXHRxcyA6PSByLlVSTC5RdWVyeSgpXG5cdGlucHV0LlRpdGxlID0gYXBwLnJlYWRTdHJpbmcocXMsIFwidGl0bGVcIiwgXCJcIilcblx0aW5wdXQuR2VucmVzID0gYXBwLnJlYWRDU1YocXMsIFwiZ2VucmVzXCIsIFtdc3RyaW5ne30pXG5cdGlucHV0LlBhZ2UgPSBhcHAucmVhZEludChxcywgXCJwYWdlXCIsIDEsIHYpXG5cdGlucHV0LlBhZ2VTaXplID0gYXBwLnJlYWRJbnQocXMsIFwicGFnZV9zaXplXCIsIDIwLCB2KVxuXHRpbnB1dC5zb3J0ID0gYXBwLnJlYWRTdHJpbmcocXMsIFwic29ydFwiLCBcImlkXCIpXG5cblx0aWYgIXYuVmFsaWQoKSB7XG5cdFx0YXBwLmZhaWxlZFZhbGlkYXRpb25SZXNwb25zZSh3LCByLCB2LkVycm9ycylcblx0XHRyZXR1cm5cblx0fVxuXG5cdGZtdC5GcHJpbnRmKHcsIFwiJSt2XFxuXCIsIGlucHV0KVxufVxuLi4uXG5QYXRoOiBpbnRlcm5hbC9kYXRhL21vdmllcy5nb1xucGFja2FnZSBkYXRhXG5cbmltcG9ydCAoXG5cdFwiY29udGV4dFwiXG5cdFwiZGF0YWJhc2Uvc3FsXCJcblx0XCJlcnJvcnNcIlxuXHRcImdpdGh1Yi5jb20vbGliL3BxXCJcblx0XCJ0aW1lXCJcblxuXHRcImdyZWVubGlnaHQudHVuZGVvc2Jvcm5lL2ludGVybmFsL3ZhbGlkYXRvclwiXG4pXG5cbnR5cGUgTW92aWUgc3RydWN0IHtcblx0SUQgICAgICAgIGludDY0ICAgICBganNvbjpcImlkXCJgXG5cdENyZWF0ZWRBdCB0aW1lLlRpbWUgYGpzb246XCItXCJgXG5cdFRpdGxlICAgICBzdHJpbmcgICAgYGpzb246XCJ0aXRsZVwiYFxuXHRZZWFyICAgICAgaW50MzIgICAgIGBqc29uOlwieWVhcixvbWl0ZW1wdHlcImBcblx0UnVudGltZSAgIFJ1bnRpbWUgICBganNvbjpcInJ1bnRpbWUsb21pdGVtcHR5XCJgXG5cdEdlbnJlcyAgICBbXXN0cmluZyAgYGpzb246XCJnZW5yZXMsb21pdGVtcHR5XCJgXG5cdFZlcnNpb24gICBpbnQzMiAgICAgYGpzb246XCJ2ZXJzaW9uXCJgXG59XG5cbmZ1bmMgVmFsaWRhdGVNb3ZpZSh2ICp2YWxpZGF0b3IuVmFsaWRhdG9yLCBtb3ZpZSAqTW92aWUpIHtcblx0di5DaGVjayhtb3ZpZS5UaXRsZSAhPSBcIlwiLCBcInRpdGxlXCIsIFwibXVzdCBiZSBwcm92aWRlZFwiKVxuXHR2LkNoZWNrKGxlbihtb3ZpZS5UaXRsZSkgPD0gNTAwLCBcInRpdGxlXCIsIFwibXVzdCBub3QgYmUgbW9yZSB0aGFuIDUwMCBieXRlcyBsb25nXCIpXG5cdHYuQ2hlY2sobW92aWUuWWVhciA+PSAxODg4LCBcInllYXJcIiwgXCJtdXN0IGJlIGdyZWF0ZXIgdGhhbiAxODg4XCIpXG5cdHYuQ2hlY2sobW92aWUuWWVhciA8PSBpbnQzMih0aW1lLk5vdygpLlllYXIoKSksIFwieWVhclwiLCBcIm11c3Qgbm90IGJlIGluIHRoZSBmdXR1cmVcIilcblx0di5DaGVjayhtb3ZpZS5SdW50aW1lICE9IDAsIFwicnVudGltZVwiLCBcIm11c3QgYmUgcHJvdmlkZWRcIilcblx0di5DaGVjayhtb3ZpZS5SdW50aW1lID4gMCwgXCJydW50aW1lXCIsIFwibXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXJcIilcblxuXHR2LkNoZWNrKG1vdmllLkdlbnJlcyAhPSBuaWwsIFwiZ2VucmVzXCIsIFwibXVzdCBiZSBwcm92aWRlZFwiKVxuXHR2LkNoZWNrKGxlbihtb3ZpZS5HZW5yZXMpID49IDEsIFwiZ2VucmVzXCIsIFwibXVzdCBjb250YWluIGF0IGxlYXN0IDEgZ2VucmVcIilcblx0di5DaGVjayhsZW4obW92aWUuR2VucmVzKSA8PSA1LCBcImdlbnJlc1wiLCBcIm11c3Qgbm90IGNvbnRhaW4gbW9yZSB0aGFuIDUgZ2VucmVzXCIpXG5cblx0di5DaGVjayh2YWxpZGF0b3IuVW5pcXVlKG1vdmllLkdlbnJlcyksIFwiZ2VucmVzXCIsIFwibXVzdCBub3QgY29udGFpbiBkdXBsaWNhdGUgdmFsdWVzXCIpXG59XG5cbnR5cGUgTW92aWVNb2RlbCBzdHJ1Y3Qge1xuXHREQiAqc3FsLkRCXG59XG5cbmZ1bmMgKG0gTW92aWVNb2RlbCkgSW5zZXJ0KG1vdmllICpNb3ZpZSkgZXJyb3Ige1xuXHRxdWVyeSA6PSBgSU5TRVJUIElOVE8gbW92aWVzICh0aXRsZSwgeWVhciwgcnVudGltZSwgZ2VucmVzKVxuICAgICAgICAgICAgICAgVkFMVUVTICgkMSwgJDIsICQzLCAkNClcbiAgICAgICAgICAgICAgIFJFVFVSTklORyBpZCwgY3JlYXRlZF9hdCwgdmVyc2lvbmBcblxuXHRhcmdzIDo9IFtdaW50ZXJmYWNle317bW92aWUuVGl0bGUsIG1vdmllLlllYXIsIG1vdmllLlJ1bnRpbWUsIHBxLkFycmF5KG1vdmllLkdlbnJlcyl9XG5cblx0Y3R4LCBjYW5jZWwgOj0gY29udGV4dC5XaXRoVGltZW91dChjb250ZXh0LkJhY2tncm91bmQoKSwgMyp0aW1lLlNlY29uZClcblx0ZGVmZXIgY2FuY2VsKClcblxuXHRyZXR1cm4gbS5EQi5RdWVyeVJvd0NvbnRleHQoY3R4LCBxdWVyeSwgYXJncy4uLikuU2NhbigmbW92aWUuSUQsICZtb3ZpZS5DcmVhdGVkQXQsICZtb3ZpZS5WZXJzaW9uKVxufVxuXG5mdW5jIChtIE1vdmllTW9kZWwpIEdldChpZCBpbnQ2NCkgKCpNb3ZpZSwgZXJyb3IpIHtcblx0aWYgaWQgPCAxIHtcblx0XHRyZXR1cm4gbmlsLCBFcnJSZWNvcmROb3RGb3VuZFxuXHR9XG5cblx0cXVlcnkgOj0gYFNFTEVDVCBpZCwgY3JlYXRlZF9hdCwgdGl0bGUsIHllYXIsIHJ1bnRpbWUsIGdlbnJlcywgdmVyc2lvbiBGUk9NIG1vdmllcyBXSEVSRSBpZCA9ICQxYFxuXG5cdHZhciBtb3ZpZSBNb3ZpZVxuXG5cdGN0eCwgY2FuY2VsIDo9IGNvbnRleHQuV2l0aFRpbWVvdXQoY29udGV4dC5CYWNrZ3JvdW5kKCksIDMqdGltZS5TZWNvbmQpXG5cblx0ZGVmZXIgY2FuY2VsKClcblxuXHRlcnIgOj1cblx0XHRtLkRCLlF1ZXJ5Um93Q29udGV4dChjdHgsIHF1ZXJ5LCBpZCkuU2NhbigmbW92aWUuSUQsICZtb3ZpZS5DcmVhdGVkQXQsICZtb3ZpZS5UaXRsZSwgJm1vdmllLlllYXIsICZtb3ZpZS5SdW50aW1lLCBwcS5BcnJheSgmbW92aWUuR2VucmVzKSwgJm1vdmllLlZlcnNpb24pXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHN3aXRjaCB7XG5cdFx0Y2FzZSBlcnJvcnMuSXMoZXJyLCBzcWwuRXJyTm9Sb3dzKTpcblx0XHRcdHJldHVybiBuaWwsIEVyclJlY29yZE5vdEZvdW5kXG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiBuaWwsIGVyclxuXHRcdH1cblx0fVxuXG5cdHJldHVybiAmbW92aWUsIG5pbFxufVxuXG5mdW5jIChtIE1vdmllTW9kZWwpIFVwZGF0ZShtb3ZpZSAqTW92aWUpIGVycm9yIHtcblx0cXVlcnkgOj0gYFVQREFURSBtb3ZpZXNcbiBTRVQgdGl0bGUgPSAkMSwgeWVhciA9ICQyLCBydW50aW1lID0gJDMsIGdlbnJlcyA9ICQ0LCB2ZXJzaW9uID0gdmVyc2lvbiArIDEgV0hFUkUgIGlkID0gJDUgQU5EIHZlcnNpb24gPSAkNlxuIFJFVFVSTklORyB2ZXJzaW9uYFxuXG5cdGFyZ3MgOj0gW11pbnRlcmZhY2V7fXtcblx0XHRtb3ZpZS5UaXRsZSxcblx0XHRtb3ZpZS5ZZWFyLFxuXHRcdG1vdmllLlJ1bnRpbWUsXG5cdFx0cHEuQXJyYXkobW92aWUuR2VucmVzKSxcblx0XHRtb3ZpZS5JRCxcblx0XHRtb3ZpZS5WZXJzaW9uLFxuXHR9XG5cblx0Y3R4LCBjYW5jZWwgOj0gY29udGV4dC5XaXRoVGltZW91dChjb250ZXh0LkJhY2tncm91bmQoKSwgMyp0aW1lLlNlY29uZClcblx0ZGVmZXIgY2FuY2VsKClcblxuXHRlcnIgOj0gbS5EQi5RdWVyeVJvd0NvbnRleHQoY3R4LCBxdWVyeSwgYXJncy4uLikuU2NhbigmbW92aWUuVmVyc2lvbilcblxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRzd2l0Y2gge1xuXHRcdGNhc2UgZXJyb3JzLklzKGVyciwgc3FsLkVyck5vUm93cyk6XG5cdFx0XHRyZXR1cm4gRXJyRWRpdENvbmZsaWN0XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiBlcnJcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbmlsXG59XG5cbmZ1bmMgKG0gTW92aWVNb2RlbCkgRGVsZXRlKGlkIGludDY0KSBlcnJvciB7XG5cdGlmIGlkIDwgMSB7XG5cdFx0cmV0dXJuIEVyclJlY29yZE5vdEZvdW5kXG5cdH1cblxuXHRxdWVyeSA6PSBgREVMRVRFIEZST00gbW92aWVzIFdIRVJFIGlkID0gJDFgXG5cblx0Y3R4LCBjYW5jZWwgOj0gY29udGV4dC5XaXRoVGltZW91dChjb250ZXh0LkJhY2tncm91bmQoKSwgMyp0aW1lLlNlY29uZClcblx0ZGVmZXIgY2FuY2VsKClcblxuXHRyZXN1bHQsIGVyciA6PSBtLkRCLkV4ZWNDb250ZXh0KGN0eCwgcXVlcnksIGlkKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gZXJyXG5cdH1cblx0cm93c0FmZmVjdGVkLCBlcnIgOj0gcmVzdWx0LlJvd3NBZmZlY3RlZCgpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBlcnJcblx0fVxuXG5cdGlmIHJvd3NBZmZlY3RlZCA9PSAwIHtcblx0XHRyZXR1cm4gRXJyUmVjb3JkTm90Rm91bmRcblx0fVxuXG5cdHJldHVybiBuaWxcbn1cbi4uLlxuUGF0aDogY21kL2FwaS9oZWxwZXJzLmdvXG5wYWNrYWdlIG1haW5cblxuaW1wb3J0IChcblx0XCJlbmNvZGluZy9qc29uXCJcblx0XCJlcnJvcnNcIlxuXHRcImZtdFwiXG5cdFwiZ3JlZW5saWdodC50dW5kZW9zYm9ybmUvaW50ZXJuYWwvdmFsaWRhdG9yXCJcblx0XCJpb1wiXG5cdFwibmV0L2h0dHBcIlxuXHRcIm5ldC91cmxcIlxuXHRcInN0cmNvbnZcIlxuXHRcInN0cmluZ3NcIlxuXG5cdFwibWFwc1wiXG5cblx0XCJnaXRodWIuY29tL2p1bGllbnNjaG1pZHQvaHR0cHJvdXRlclwiXG4pXG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJlYWRJRFBhcmFtKHIgKmh0dHAuUmVxdWVzdCkgKGludDY0LCBlcnJvcikge1xuXHRwYXJhbXMgOj0gaHR0cHJvdXRlci5QYXJhbXNGcm9tQ29udGV4dChyLkNvbnRleHQoKSlcblxuXHRpZCwgZXJyIDo9IHN0cmNvbnYuUGFyc2VJbnQocGFyYW1zLkJ5TmFtZShcImlkXCIpLCAxMCwgNjQpXG5cdGlmIGVyciAhPSBuaWwgfHwgaWQgPCAxIHtcblx0XHRyZXR1cm4gMCwgZXJyb3JzLk5ldyhcImludmFsaWQgaWQgcGFyYW1ldGVyXCIpXG5cdH1cblx0cmV0dXJuIGlkLCBuaWxcbn1cblxudHlwZSBlbnZlbG9wZSBtYXBbc3RyaW5nXWludGVyZmFjZXt9XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHdyaXRlSlNPTih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHN0YXR1cyBpbnQsIGRhdGEgZW52ZWxvcGUsIGhlYWRlcnMgaHR0cC5IZWFkZXIpIGVycm9yIHtcblx0anMsIGVyciA6PSBqc29uLk1hcnNoYWxJbmRlbnQoZGF0YSwgXCJcIiwgXCJcXHRcIilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0cmV0dXJuIGVyclxuXHR9XG5cblx0anMgPSBhcHBlbmQoanMsICdcXG4nKVxuXG5cdG1hcHMuQ29weSh3LkhlYWRlcigpLCBoZWFkZXJzKVxuXG5cdHcuSGVhZGVyKCkuU2V0KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxuXHR3LldyaXRlSGVhZGVyKHN0YXR1cylcblx0dy5Xcml0ZShqcylcblx0cmV0dXJuIG5pbFxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSByZWFkSlNPTih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCwgZHN0IGludGVyZmFjZXt9KSBlcnJvciB7XG5cblx0bWF4Qnl0ZXMgOj0gMV8wNDhfNTc2XG5cdHIuQm9keSA9IGh0dHAuTWF4Qnl0ZXNSZWFkZXIodywgci5Cb2R5LCBpbnQ2NChtYXhCeXRlcykpXG5cblx0ZGVjIDo9IGpzb24uTmV3RGVjb2RlcihyLkJvZHkpXG5cdGRlYy5EaXNhbGxvd1Vua25vd25GaWVsZHMoKVxuXG5cdGVyciA6PSBkZWMuRGVjb2RlKGRzdClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0dmFyIHN5bnRheEVycm9yICpqc29uLlN5bnRheEVycm9yXG5cdFx0dmFyIHVubWFyc2hhbFR5cGVFcnJvciAqanNvbi5Vbm1hcnNoYWxUeXBlRXJyb3Jcblx0XHR2YXIgaW52YWxpZFVubWFyc2hhbEVycm9yICpqc29uLkludmFsaWRVbm1hcnNoYWxFcnJvclxuXG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5BcyhlcnIsICZzeW50YXhFcnJvcik6XG5cdFx0XHRyZXR1cm4gZm10LkVycm9yZihcImJvZHkgY29udGFpbnMgYmFkbHktZm9ybWVkIEpTT04gKGF0IGNoYXJhY3RlciAlZClcIiwgc3ludGF4RXJyb3IuT2Zmc2V0KVxuXG5cdFx0Y2FzZSBlcnJvcnMuSXMoZXJyLCBpby5FcnJVbmV4cGVjdGVkRU9GKTpcblx0XHRcdHJldHVybiBlcnJvcnMuTmV3KFwiYm9keSBjb250YWlucyBiYWRseS1mb3JtZWQgSlNPTlwiKVxuXG5cdFx0Y2FzZSBlcnJvcnMuQXMoZXJyLCAmdW5tYXJzaGFsVHlwZUVycm9yKTpcblx0XHRcdGlmIHVubWFyc2hhbFR5cGVFcnJvci5GaWVsZCAhPSBcIlwiIHtcblx0XHRcdFx0cmV0dXJuIGZtdC5FcnJvcmYoXCJib2R5IGNvbnRhaW5zIGluY29ycmVjdCBKU09OIHR5cGUgZm9yIGZpZWxkICVxXCIsIHVubWFyc2hhbFR5cGVFcnJvci5GaWVsZClcblx0XHRcdH1cblx0XHRcdHJldHVybiBmbXQuRXJyb3JmKFwiYm9keSBjb250YWlucyBpbmNvcnJlY3QgSlNPTiB0eXBlIChhdCBjaGFyYWN0ZXIgJWQpXCIsIHVubWFyc2hhbFR5cGVFcnJvci5PZmZzZXQpXG5cdFx0Y2FzZSBlcnJvcnMuSXMoZXJyLCBpby5FT0YpOlxuXHRcdFx0cmV0dXJuIGVycm9ycy5OZXcoXCJib2R5IG11c3Qgbm90IGJlIGVtcHR5XCIpXG5cblx0XHRjYXNlIHN0cmluZ3MuSGFzUHJlZml4KGVyci5FcnJvcigpLCBcImpzb246IHVua25vd24gZmllbGQgXCIpOlxuXHRcdFx0ZmllbGROYW1lIDo9IHN0cmluZ3MuVHJpbVByZWZpeChlcnIuRXJyb3IoKSwgXCJqc29uOiB1bmtub3duIGZpZWxkXCIpXG5cblx0XHRcdHJldHVybiBmbXQuRXJyb3JmKFwiYm9keSBjb250YWlucyB1bmtub3duIGtleSAlc1wiLCBmaWVsZE5hbWUpXG5cblx0XHRjYXNlIGVyci5FcnJvcigpID09IFwiaHR0cDogcmVxdWVzdCBib2R5IHRvbyBsYXJnZVwiOlxuXHRcdFx0cmV0dXJuIGZtdC5FcnJvcmYoXCJib2R5IG11c3Qgbm90IGJlIGxhcmdlciB0aGFuICVkIGJ5dGVzXCIsIG1heEJ5dGVzKVxuXHRcdGNhc2UgZXJyb3JzLkFzKGVyciwgJmludmFsaWRVbm1hcnNoYWxFcnJvcik6XG5cdFx0XHRwYW5pYyhlcnIpXG5cblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIGVyclxuXHRcdH1cblx0fVxuXG5cdGVyciA9IGRlYy5EZWNvZGUoJnN0cnVjdHt9e30pXG5cdGlmIGVyciAhPSBpby5FT0Yge1xuXHRcdHJldHVybiBlcnJvcnMuTmV3KFwiYm9keSBtdXN0IG9ubHkgY29udGFpbiBhIHNpbmdsZSBKU09OIHZhbHVlXCIpXG5cdH1cblxuXHRyZXR1cm4gbmlsXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJlYWRTdHJpbmcocXMgdXJsLlZhbHVlcywga2V5IHN0cmluZywgZGVmYXVsdFZhbHVlIHN0cmluZykgc3RyaW5nIHtcblx0cyA6PSBxcy5HZXQoa2V5KVxuXG5cdGlmIHMgPT0gXCJcIiB7XG5cdFx0cmV0dXJuIGRlZmF1bHRWYWx1ZVxuXHR9XG5cblx0cmV0dXJuIHNcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgcmVhZENTVihxcyB1cmwuVmFsdWVzLCBrZXkgc3RyaW5nLCBkZWZhdWx0VmFsdWUgW11zdHJpbmcpIFtdc3RyaW5nIHtcblx0Y3N2IDo9IHFzLkdldChrZXkpXG5cblx0aWYgY3N2ID09IFwiXCIge1xuXHRcdHJldHVybiBkZWZhdWx0VmFsdWVcblx0fVxuXG5cdHJldHVybiBzdHJpbmdzLlNwbGl0KGNzdiwgXCIsXCIpXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJlYWRJbnQocXMgdXJsLlZhbHVlcywga2V5IHN0cmluZywgZGVmYXVsdFZhbHVlIGludCwgdiAqdmFsaWRhdG9yLlZhbGlkYXRvcikgaW50IHtcblx0cyA6PSBxcy5HZXQoa2V5KVxuXG5cdGlmIHMgPT0gXCJcIiB7XG5cdFx0cmV0dXJuIGRlZmF1bHRWYWx1ZVxuXHR9XG5cblx0aSwgZXJyIDo9IHN0cmNvbnYuQXRvaShzKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHR2LkFkZEVycm9yKGtleSwgXCJtdXN0IGJlIGFuIGludGVnZXIgdmFsdWVcIilcblx0XHRyZXR1cm4gZGVmYXVsdFZhbHVlXG5cdH1cblxuXHRyZXR1cm4gaVxufVxuLi4uXG5QYXRoOiBjbWQvYXBpL3JvdXRlcy5nb1xucGFja2FnZSBtYWluXG5cbmltcG9ydCAoXG5cdFwibmV0L2h0dHBcIlxuXG5cdFwiZ2l0aHViLmNvbS9qdWxpZW5zY2htaWR0L2h0dHByb3V0ZXJcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSByb3V0ZXMoKSAqaHR0cHJvdXRlci5Sb3V0ZXIge1xuXHRyb3V0ZXIgOj0gaHR0cHJvdXRlci5OZXcoKVxuXG5cdHJvdXRlci5Ob3RGb3VuZCA9IGh0dHAuSGFuZGxlckZ1bmMoYXBwLm5vdEZvdW5kUmVzcG9uc2UpXG5cdHJvdXRlci5NZXRob2ROb3RBbGxvd2VkID0gaHR0cC5IYW5kbGVyRnVuYyhhcHAubWV0aG9kTm90QWxsb3dlZFJlc3BvbnNlKVxuXG5cdHJvdXRlci5IYW5kbGVyRnVuYyhodHRwLk1ldGhvZEdldCwgXCIvdjEvaGVhbHRoY2hlY2tcIiwgYXBwLmhlYWx0aGNoZWNrSGFuZGxlcilcblx0cm91dGVyLkhhbmRsZXJGdW5jKGh0dHAuTWV0aG9kUG9zdCwgXCIvdjEvbW92aWVzXCIsIGFwcC5jcmVhdGVNb3ZpZUhhbmRsZXIpXG5cdHJvdXRlci5IYW5kbGVyRnVuYyhodHRwLk1ldGhvZEdldCwgXCIvdjEvbW92aWVzLzppZFwiLCBhcHAuc2hvd01vdmllSGFuZGxlcilcblx0cm91dGVyLkhhbmRsZXJGdW5jKGh0dHAuTWV0aG9kUGF0Y2gsIFwiL3YxL21vdmllcy86aWRcIiwgYXBwLnVwZGF0ZU1vdmllSGFuZGxlcilcblx0cm91dGVyLkhhbmRsZXJGdW5jKGh0dHAuTWV0aG9kRGVsZXRlLCBcIi92MS9tb3ZpZXMvOmlkXCIsIGFwcC5kZWxldGVNb3ZpZUhhbmRsZXIpXG5cdHJldHVybiByb3V0ZXJcbn1cbi4uLlxuUGF0aDogY21kL2FwaS9oZWFsdGhjaGVjay5nb1xucGFja2FnZSBtYWluXG5cbmltcG9ydCAoXG5cdFwibmV0L2h0dHBcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBoZWFsdGhjaGVja0hhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblxuXHRlbnYgOj0gZW52ZWxvcGV7XG5cdFx0XCJzdGF0dXNcIjogXCJhdmFpbGFibGVcIixcblx0XHRcInN5c3RlbV9pbmZvXCI6IG1hcFtzdHJpbmddc3RyaW5ne1xuXHRcdFx0XCJlbnZpcm9ubWVudFwiOiBhcHAuY29uZmlnLmVudixcblx0XHRcdFwidmVyc2lvblwiOiAgICAgdmVyc2lvbixcblx0XHR9LFxuXHR9XG5cblx0ZXJyIDo9IGFwcC53cml0ZUpTT04odywgaHR0cC5TdGF0dXNPSywgZW52LCBuaWwpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5sb2dnZXIuUHJpbnRsbihlcnIpXG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHR9XG5cbn1cbi4uLlxuUGF0aDogY21kL2FwaS9lcnJvcnMuZ29cbnBhY2thZ2UgbWFpblxuXG5pbXBvcnQgKFxuXHRcImZtdFwiXG5cdFwibmV0L2h0dHBcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBsb2dFcnJvcihyICpodHRwLlJlcXVlc3QsIGVyciBlcnJvcikge1xuXHRhcHAubG9nZ2VyLlByaW50bG4oZXJyKVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBlcnJvclJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBzdGF0dXMgaW50LCBtZXNzYWdlIGludGVyZmFjZXt9KSB7XG5cblx0ZW52IDo9IGVudmVsb3Ble1wiZXJyb3JcIjogbWVzc2FnZX1cblxuXHRlcnIgOj0gYXBwLndyaXRlSlNPTih3LCBzdGF0dXMsIGVudiwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAubG9nRXJyb3IociwgZXJyKVxuXHRcdHcuV3JpdGVIZWFkZXIoNTAwKVxuXHR9XG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHNlcnZlckVycm9yUmVzcG9uc2UodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QsIGVyciBlcnJvcikge1xuXHRhcHAubG9nRXJyb3IociwgZXJyKVxuXG5cdG1lc3NhZ2UgOj0gXCJ0aGUgc2VydmVyIGVuY291bnRlcmVkIGEgcHJvYmxlbSBhbmQgY291bGQgbm90IHByb2Nlc3MgeW91ciByZXF1ZXN0XCJcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNJbnRlcm5hbFNlcnZlckVycm9yLCBtZXNzYWdlKVxuXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIG5vdEZvdW5kUmVzcG9uc2UodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblx0bWVzc2FnZSA6PSBcInRoZSByZXF1ZXN0ZWQgcmVzb3VyY2UgY291bGQgbm90IGJlIGZvdW5kXCJcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNOb3RGb3VuZCwgbWVzc2FnZSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgbWV0aG9kTm90QWxsb3dlZFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdG1lc3NhZ2UgOj0gZm10LlNwcmludGYoXCJ0aGUgJXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgcmVzb3VyY2VcIiwgci5NZXRob2QpXG5cdGFwcC5lcnJvclJlc3BvbnNlKHcsIHIsIGh0dHAuU3RhdHVzTWV0aG9kTm90QWxsb3dlZCwgbWVzc2FnZSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgYmFkUmVxdWVzdFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBlcnIgZXJyb3IpIHtcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNCYWRSZXF1ZXN0LCBlcnIuRXJyb3IoKSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgZmFpbGVkVmFsaWRhdGlvblJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBlcnJvcnMgbWFwW3N0cmluZ11zdHJpbmcpIHtcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNVbnByb2Nlc3NhYmxlRW50aXR5LCBlcnJvcnMpXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIGVkaXRDb25mbGljdFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdG1lc3NhZ2UgOj0gXCJ1bmFibGUgdG8gdXBkYXRlIHRoZSByZWNvcmQgZHVlIHRvIGVkaXQgY29uZmxpY3QsIHBsZWFzZSB0cnkgYWdhaW5cIlxuXG5cdGFwcC5lcnJvclJlc3BvbnNlKHcsIHIsIGh0dHAuU3RhdHVzQ29uZmxpY3QsIG1lc3NhZ2UpXG59XG4uLi5cblBhdGg6IGNtZC9hcGkvbWFpbi5nb1xucGFja2FnZSBtYWluXG5cbmltcG9ydCAoXG5cdFwiY29udGV4dFwiXG5cdFwiZGF0YWJhc2Uvc3FsXCJcblx0XCJmbGFnXCJcblx0XCJmbXRcIlxuXHRcImdyZWVubGlnaHQudHVuZGVvc2Jvcm5lL2ludGVybmFsL2RhdGFcIlxuXHRcImxvZ1wiXG5cdFwibmV0L2h0dHBcIlxuXHRcIm9zXCJcblx0XCJ0aW1lXCJcblxuXHRfIFwiZ2l0aHViLmNvbS9saWIvcHFcIlxuKVxuXG5jb25zdCB2ZXJzaW9uID0gXCIxLjAuMFwiXG5cbnR5cGUgY29uZmlnIHN0cnVjdCB7XG5cdHBvcnQgaW50XG5cdGVudiAgc3RyaW5nXG5cdGRiICAgc3RydWN0IHtcblx0XHRkc24gICAgICAgICAgc3RyaW5nXG5cdFx0bWF4T3BlbkNvbm5zIGludFxuXHRcdG1heElkbGVDb25ucyBpbnRcblx0XHRtYXhJZGxlVGltZSAgc3RyaW5nXG5cdH1cbn1cblxudHlwZSBhcHBsaWNhdGlvbiBzdHJ1Y3Qge1xuXHRjb25maWcgY29uZmlnXG5cdGxvZ2dlciAqbG9nLkxvZ2dlclxuXHRtb2RlbHMgZGF0YS5Nb2RlbHNcbn1cblxuZnVuYyBtYWluKCkge1xuXG5cdHZhciBjZmcgY29uZmlnXG5cblx0ZmxhZy5JbnRWYXIoJmNmZy5wb3J0LCBcInBvcnRcIiwgNDAwMCwgXCJBUEkgc2VydmVyIHBvcnRcIilcblx0ZmxhZy5TdHJpbmdWYXIoJmNmZy5lbnYsIFwiZW52XCIsIFwiZGV2ZWxvcG1lbnRcIiwgXCJFbnZpcm9ubWVudCAoZGV2ZWxvcG1lbnR8c3RhZ2luZ3xwcm9kdWN0aW9uKVwiKVxuXG5cdGZsYWcuU3RyaW5nVmFyKCZjZmcuZGIuZHNuLCBcImRiLWRzblwiLCBvcy5HZXRlbnYoXCJHUkVFTkxJR0hUX0RCX0RTTlwiKSwgXCJQb3N0Z3JlU1FMIERTTlwiKVxuXG5cdGZsYWcuSW50VmFyKCZjZmcuZGIubWF4T3BlbkNvbm5zLCBcImRiLW1heC1vcGVuLWNvbm5zXCIsIDI1LCBcIlBvc3RncmVTUUwgbWF4IG9wZW4gY29ubmVjdGlvbnNcIilcblxuXHRmbGFnLkludFZhcigmY2ZnLmRiLm1heElkbGVDb25ucywgXCJkYi1tYXgtaWRsZS1jb25uc1wiLCAyNSwgXCJQb3N0Z3JlU1FMIG1heCBpZGxlIGNvbm5lY3Rpb25zXCIpXG5cblx0ZmxhZy5TdHJpbmdWYXIoJmNmZy5kYi5tYXhJZGxlVGltZSwgXCJkYi1tYXgtaWRsZS10aW1lXCIsIFwiMTVtXCIsIFwiUG9zdGdyZVNRTCBtYXggY29ubmVjdGlvbiBpZGxlIHRpbWVcIilcblx0ZmxhZy5QYXJzZSgpXG5cblx0bG9nZ2VyIDo9IGxvZy5OZXcob3MuU3Rkb3V0LCBcIlwiLCBsb2cuTGRhdGV8bG9nLkx0aW1lKVxuXG5cdGRiLCBlcnIgOj0gb3BlbkRCKGNmZylcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0bG9nZ2VyLkZhdGFsKGVycilcblx0fVxuXG5cdGRlZmVyIGRiLkNsb3NlKClcblxuXHRsb2dnZXIuUHJpbnRmKFwiZGF0YWJhc2UgY29ubmVjdGlvbiBwb29sIGVzdGFibGlzaGVkXCIpXG5cblx0YXBwIDo9ICZhcHBsaWNhdGlvbntcblx0XHRjb25maWc6IGNmZyxcblx0XHRsb2dnZXI6IGxvZ2dlcixcblx0XHRtb2RlbHM6IGRhdGEuTmV3TW9kZWxzKGRiKSxcblx0fVxuXG5cdHNydiA6PSAmaHR0cC5TZXJ2ZXJ7XG5cdFx0QWRkcjogICAgICAgICBmbXQuU3ByaW50ZihcIjolZFwiLCBjZmcucG9ydCksXG5cdFx0SGFuZGxlcjogICAgICBhcHAucm91dGVzKCksXG5cdFx0SWRsZVRpbWVvdXQ6ICB0aW1lLk1pbnV0ZSxcblx0XHRSZWFkVGltZW91dDogIDEwICogdGltZS5TZWNvbmQsXG5cdFx0V3JpdGVUaW1lb3V0OiAzMCAqIHRpbWUuU2Vjb25kLFxuXHR9XG5cblx0bG9nZ2VyLlByaW50ZihcInN0YXJ0aW5nICVzIHNlcnZlciBvbiAlc1wiLCBjZmcuZW52LCBzcnYuQWRkcilcblx0ZXJyID0gc3J2Lkxpc3RlbkFuZFNlcnZlKClcblx0bG9nZ2VyLkZhdGFsKGVycilcbn1cblxuZnVuYyBvcGVuREIoY2ZnIGNvbmZpZykgKCpzcWwuREIsIGVycm9yKSB7XG5cblx0ZGIsIGVyciA6PSBzcWwuT3BlbihcInBvc3RncmVzXCIsIGNmZy5kYi5kc24pXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBuaWwsIGVyclxuXHR9XG5cblx0ZGIuU2V0TWF4T3BlbkNvbm5zKGNmZy5kYi5tYXhPcGVuQ29ubnMpXG5cblx0ZGIuU2V0TWF4SWRsZUNvbm5zKGNmZy5kYi5tYXhJZGxlQ29ubnMpXG5cblx0ZHVyYXRpb24sIGVyciA6PSB0aW1lLlBhcnNlRHVyYXRpb24oY2ZnLmRiLm1heElkbGVUaW1lKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gbmlsLCBlcnJcblx0fVxuXHRkYi5TZXRDb25uTWF4SWRsZVRpbWUoZHVyYXRpb24pXG5cblx0Y3R4LCBjYW5jZWwgOj0gY29udGV4dC5XaXRoVGltZW91dChjb250ZXh0LkJhY2tncm91bmQoKSwgNSp0aW1lLlNlY29uZClcblx0ZGVmZXIgY2FuY2VsKClcblxuXHRlcnIgPSBkYi5QaW5nQ29udGV4dChjdHgpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBuaWwsIGVyclxuXHR9XG5cblx0cmV0dXJuIGRiLCBuaWxcbn1cbi4uLlxuUGF0aDogaW50ZXJuYWwvZGF0YS9tb2RlbHMuZ29cbnBhY2thZ2UgZGF0YVxuXG5pbXBvcnQgKFxuXHRcImRhdGFiYXNlL3NxbFwiXG5cdFwiZXJyb3JzXCJcbilcblxudmFyIChcblx0RXJyUmVjb3JkTm90Rm91bmQgPSBlcnJvcnMuTmV3KFwicmVjb3JkIG5vdCBmb3VuZFwiKVxuXHRFcnJFZGl0Q29uZmxpY3QgICA9IGVycm9ycy5OZXcoXCJlZGl0IGNvbmZsaWN0XCIpXG4pXG5cbnR5cGUgTW9kZWxzIHN0cnVjdCB7XG5cdE1vdmllcyBNb3ZpZU1vZGVsXG59XG5cbmZ1bmMgTmV3TW9kZWxzKGRiICpzcWwuREIpIE1vZGVscyB7XG5cdHJldHVybiBNb2RlbHN7XG5cdFx0TW92aWVzOiBNb3ZpZU1vZGVse0RCOiBkYn0sXG5cdH1cbn1cbi4uLlxuUGF0aDogbWlncmF0aW9ucy8wMDAwMDFfY3JlYXRlX21vdmllc190YWJsZS51cC5zcWxcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG1vdmllcyAoXG4gICAgaWQgYmlnc2VyaWFsIFBSSU1BUlkgS0VZLFxuICAgIGNyZWF0ZWRfYXQgdGltZXN0YW1wKDApIHdpdGggdGltZSB6b25lIE5PVCBOVUxMIERFRkFVTFQgTk9XKCksXG4gICAgdGl0bGUgdGV4dCBOT1QgTlVMTCxcbiAgICB5ZWFyIGludGVnZXIgTk9UIE5VTEwsXG4gICAgcnVudGltZSBpbnRlZ2VyIE5PVCBOVUxMLFxuICAgIGdlbnJlcyB0ZXh0W10gTk9UIE5VTEwsXG4gICAgdmVyc2lvbiBpbnRlZ2VyIE5PVCBOVUxMIERFRkFVTFQgMVxuKTtcbi4uLlxuUGF0aDogbWlncmF0aW9ucy8wMDAwMDFfY3JlYXRlX21vdmllc190YWJsZS5kb3duLnNxbFxuRFJPUCBUQUJMRSBJRiBFWElTVFMgbW92aWVzOy4uLlxuUGF0aDogbWlncmF0aW9ucy8wMDAwMDJfYWRkX21vdmllc19jaGVja19jb25zdHJhaW50cy51cC5zcWxcbkFMVEVSIFRBQkxFIG1vdmllcyBBREQgQ09OU1RSQUlOVCBtb3ZpZXNfcnVudGltZV9jaGVjayBDSEVDSyAocnVudGltZSA+PSAwKTtcblxuQUxURVIgVEFCTEUgbW92aWVzIEFERCBDT05TVFJBSU5UIG1vdmllc195ZWFyX2NoZWNrIENIRUNLICh5ZWFyIEJFVFdFRU4gMTg4OCBBTkQgZGF0ZV9wYXJ0KCd5ZWFyJywgbm93KCkpKTtcblxuQUxURVIgVEFCTEUgbW92aWVzIEFERCBDT05TVFJBSU5UIGdlbnJlc19sZW5ndGhfY2hlY2sgQ0hFQ0sgKGFycmF5X2xlbmd0aChnZW5yZXMsIDEpIEJFVFdFRU4gMSBBTkQgNSk7Li4uXG5QYXRoOiBpbnRlcm5hbC9kYXRhL2ZpbHRlcnMuZ29cbnBhY2thZ2UgZGF0YVxuLi4uXG5QYXRoOiBtaWdyYXRpb25zLzAwMDAwMl9hZGRfbW92aWVzX2NoZWNrX2NvbnN0cmFpbnRzLmRvd24uc3FsXG5BTFRFUiBUQUJMRSBtb3ZpZXMgRFJPUCBDT05TVFJBSU5UIElGIEVYSVNUUyBtb3ZpZXNfcnVudGltZV9jaGVjaztcblxuQUxURVIgVEFCTEUgbW92aWVzIERST1AgQ09OU1RSQUlOVCBJRiBFWElTVFMgbW92aWVzX3llYXJfY2hlY2s7XG5cbkFMVEVSIFRBQkxFIG1vdmllcyBEUk9QIENPTlNUUkFJTlQgSUYgRVhJU1RTIGdlbnJlc19sZW5ndGhfY2hlY2s7Li4uXG5QYXRoOiBpbnRlcm5hbC92YWxpZGF0b3IvdmFsaWRhdG9yLmdvXG5wYWNrYWdlIHZhbGlkYXRvclxuXG5pbXBvcnQgKFxuXHRcInJlZ2V4cFwiXG5cdFwic2xpY2VzXCJcbilcblxudmFyIChcblx0RW1haWxSWCA9IHJlZ2V4cC5NdXN0Q29tcGlsZShcIl5bYS16QS1aMC05LiEjJCUmJyorXFxcXC89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFxcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiRcIilcbilcblxudHlwZSBWYWxpZGF0b3Igc3RydWN0IHtcblx0RXJyb3JzIG1hcFtzdHJpbmddc3RyaW5nXG59XG5cbmZ1bmMgTmV3KCkgKlZhbGlkYXRvciB7XG5cdHJldHVybiAmVmFsaWRhdG9ye0Vycm9yczogbWFrZShtYXBbc3RyaW5nXXN0cmluZyl9XG59XG5cbmZ1bmMgKHYgKlZhbGlkYXRvcikgVmFsaWQoKSBib29sIHtcblx0cmV0dXJuIGxlbih2LkVycm9ycykgPT0gMFxufVxuXG5mdW5jICh2ICpWYWxpZGF0b3IpIEFkZEVycm9yKGtleSwgbWVzc2FnZSBzdHJpbmcpIHtcblx0aWYgXywgZXhpc3RzIDo9IHYuRXJyb3JzW2tleV07ICFleGlzdHMge1xuXHRcdHYuRXJyb3JzW2tleV0gPSBtZXNzYWdlXG5cdH1cbn1cblxuZnVuYyAodiAqVmFsaWRhdG9yKSBDaGVjayhvayBib29sLCBrZXksIG1lc3NhZ2Ugc3RyaW5nKSB7XG5cdGlmICFvayB7XG5cdFx0di5BZGRFcnJvcihrZXksIG1lc3NhZ2UpXG5cdH1cbn1cblxuZnVuYyBJbih2YWx1ZSBzdHJpbmcsIGxpc3QgLi4uc3RyaW5nKSBib29sIHtcblx0cmV0dXJuIHNsaWNlcy5Db250YWlucyhsaXN0LCB2YWx1ZSlcbn1cblxuZnVuYyBNYXRjaGVzKHZhbHVlIHN0cmluZywgcnggKnJlZ2V4cC5SZWdleHApIGJvb2wge1xuXHRyZXR1cm4gcnguTWF0Y2hTdHJpbmcodmFsdWUpXG59XG5cbmZ1bmMgVW5pcXVlKHZhbHVlcyBbXXN0cmluZykgYm9vbCB7XG5cdHVuaXF1ZVZhbHVlcyA6PSBtYWtlKG1hcFtzdHJpbmddYm9vbClcblxuXHRmb3IgXywgdmFsdWUgOj0gcmFuZ2UgdmFsdWVzIHtcblx0XHR1bmlxdWVWYWx1ZXNbdmFsdWVdID0gdHJ1ZVxuXHR9XG5cblx0cmV0dXJuIGxlbih2YWx1ZXMpID09IGxlbih1bmlxdWVWYWx1ZXMpXG59XG4uLi5cblBhdGg6IGdvLm1vZFxubW9kdWxlIGdyZWVubGlnaHQudHVuZGVvc2Jvcm5lXG5cbmdvIDEuMjMuNVxuXG5yZXF1aXJlIGdpdGh1Yi5jb20vanVsaWVuc2NobWlkdC9odHRwcm91dGVyIHYxLjMuMFxuXG5yZXF1aXJlIGdpdGh1Yi5jb20vbGliL3BxIHYxLjEwLjAgLy8gaW5kaXJlY3Rcbi4uLlxuUGF0aDogaW50ZXJuYWwvZGF0YS9ydW50aW1lLmdvXG5wYWNrYWdlIGRhdGFcblxuaW1wb3J0IChcblx0XCJlcnJvcnNcIlxuXHRcImZtdFwiXG5cdFwic3RyY29udlwiXG5cdFwic3RyaW5nc1wiXG4pXG5cbnZhciBFcnJJbnZhbGlkUnVudGltZUZvcm1hdCA9IGVycm9ycy5OZXcoXCJpbnZhbGlkIHJ1bnRpbWUgZm9ybWF0XCIpXG5cbnR5cGUgUnVudGltZSBpbnQzMlxuXG5mdW5jIChyIFJ1bnRpbWUpIE1hcnNoYWxKU09OKCkgKFtdYnl0ZSwgZXJyb3IpIHtcblx0anNvblZhbHVlIDo9IGZtdC5TcHJpbnRmKFwiJWQgbWluc1wiLCByKVxuXG5cdHF1b3RlZEpTT05WYWx1ZSA6PSBzdHJjb252LlF1b3RlKGpzb25WYWx1ZSlcblxuXHRyZXR1cm4gW11ieXRlKHF1b3RlZEpTT05WYWx1ZSksIG5pbFxufVxuXG5mdW5jIChyICpSdW50aW1lKSBVbm1hcnNoYWxKU09OKGpzb25WYWx1ZSBbXWJ5dGUpIGVycm9yIHtcblxuXHR1bnF1b3RlZEpTT05WYWx1ZSwgZXJyIDo9IHN0cmNvbnYuVW5xdW90ZShzdHJpbmcoanNvblZhbHVlKSlcblxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gRXJySW52YWxpZFJ1bnRpbWVGb3JtYXRcblx0fVxuXG5cdHBhcnRzIDo9IHN0cmluZ3MuU3BsaXQodW5xdW90ZWRKU09OVmFsdWUsIFwiIFwiKVxuXG5cdGlmIGxlbihwYXJ0cykgIT0gMiB8fCBwYXJ0c1sxXSAhPSBcIm1pbnNcIiB7XG5cdFx0cmV0dXJuIEVyckludmFsaWRSdW50aW1lRm9ybWF0XG5cdH1cblxuXHRpLCBlcnIgOj0gc3RyY29udi5QYXJzZUludChwYXJ0c1swXSwgMTAsIDMyKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gRXJySW52YWxpZFJ1bnRpbWVGb3JtYXRcblx0fVxuXG5cdCpyID0gUnVudGltZShpKVxuXG5cdHJldHVybiBuaWxcbn1cbi4uLlxuUGF0aDogZ28uc3VtXG5naXRodWIuY29tL2p1bGllbnNjaG1pZHQvaHR0cHJvdXRlciB2MS4zLjAgaDE6VTA2MDllOXRnYnNldTNyQklOZXQ5UDQ4QUkvRDNvSnM0ZE43andKT1ExVT1cbmdpdGh1Yi5jb20vanVsaWVuc2NobWlkdC9odHRwcm91dGVyIHYxLjMuMC9nby5tb2QgaDE6SlI2V3RIYisyTFVlOFRDS1kzY1pPeEZ5eU84SVpBYzRSVmN5Y0NDQUtkTT1cbmdpdGh1Yi5jb20vbGliL3BxIHYxLjEwLjAgaDE6Wng1REpGRVlRWGlvOTNrZ1huUTA5ZlhOaVVLc3F2NE9VRXUyVXRHY0IxRT1cbmdpdGh1Yi5jb20vbGliL3BxIHYxLjEwLjAvZ28ubW9kIGgxOkFsVk41eDRFNFQ1NDR0V3pINmhLZmJmUXZtM0hkYk94cm1nZ0ROQVBZOW89XG4uLi5cblBhdGg6IFJFQURNRS5tZFxuIyBncmVlbmxpZ2h0XG4uLi5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUtjVjhrNXpyVXBEdG5zNlhVQks0Z2EifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvb3Nib3JuZS9Eb3dubG9hZHMvdGVjaC1sZWFybmluZ3MvZ3JlZW5saWdodCIsImZvbGRlclJvb3QiOiIvVXNlcnMvb3Nib3JuZS9Eb3dubG9hZHMvdGVjaC1sZWFybmluZ3MvZ3JlZW5saWdodCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDhUMjA6MTc6NTguNjg5WiIsInJlc3BvbnNlX3RleHQiOiJMZXQgbWUgYWxzbyBjaGVjayBpZiB0aGVyZSdzIGEgYFZhbGlkYXRlRmlsdGVyc2AgZnVuY3Rpb24gaW4gdGhlIGNvZGViYXNlOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjIzYzEzNWIxLWZhMTUtNDM3Zi1iYjNiLTdhNGFiZDBkMmZjNiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTJrSzlXeFVvYXRkTkJhSlI0RzhTV3UiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIlNob3cgbWUgYW55IEZpbHRlcnMgc3RydWN0IG9yIHR5cGUgZGVmaW5pdGlvbiBpbiB0aGUgY29kZWJhc2UsIHBhcnRpY3VsYXJseSBpbiB0aGUgZGF0YSBwYWNrYWdlLlwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCBtZSBjaGVjayBpZiB0aGVyZSdzIGEgYEZpbHRlcnNgIHN0cnVjdCBvciB0eXBlIGluIHRoZSBjb2RlYmFzZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IGludGVybmFsL2RhdGEvbW92aWVzLmdvXG5wYWNrYWdlIGRhdGFcblxuaW1wb3J0IChcblx0XCJjb250ZXh0XCJcblx0XCJkYXRhYmFzZS9zcWxcIlxuXHRcImVycm9yc1wiXG5cdFwiZ2l0aHViLmNvbS9saWIvcHFcIlxuXHRcInRpbWVcIlxuXG5cdFwiZ3JlZW5saWdodC50dW5kZW9zYm9ybmUvaW50ZXJuYWwvdmFsaWRhdG9yXCJcbilcblxudHlwZSBNb3ZpZSBzdHJ1Y3Qge1xuXHRJRCAgICAgICAgaW50NjQgICAgIGBqc29uOlwiaWRcImBcblx0Q3JlYXRlZEF0IHRpbWUuVGltZSBganNvbjpcIi1cImBcblx0VGl0bGUgICAgIHN0cmluZyAgICBganNvbjpcInRpdGxlXCJgXG5cdFllYXIgICAgICBpbnQzMiAgICAgYGpzb246XCJ5ZWFyLG9taXRlbXB0eVwiYFxuXHRSdW50aW1lICAgUnVudGltZSAgIGBqc29uOlwicnVudGltZSxvbWl0ZW1wdHlcImBcblx0R2VucmVzICAgIFtdc3RyaW5nICBganNvbjpcImdlbnJlcyxvbWl0ZW1wdHlcImBcblx0VmVyc2lvbiAgIGludDMyICAgICBganNvbjpcInZlcnNpb25cImBcbn1cblxuZnVuYyBWYWxpZGF0ZU1vdmllKHYgKnZhbGlkYXRvci5WYWxpZGF0b3IsIG1vdmllICpNb3ZpZSkge1xuXHR2LkNoZWNrKG1vdmllLlRpdGxlICE9IFwiXCIsIFwidGl0bGVcIiwgXCJtdXN0IGJlIHByb3ZpZGVkXCIpXG5cdHYuQ2hlY2sobGVuKG1vdmllLlRpdGxlKSA8PSA1MDAsIFwidGl0bGVcIiwgXCJtdXN0IG5vdCBiZSBtb3JlIHRoYW4gNTAwIGJ5dGVzIGxvbmdcIilcblx0di5DaGVjayhtb3ZpZS5ZZWFyID49IDE4ODgsIFwieWVhclwiLCBcIm11c3QgYmUgZ3JlYXRlciB0aGFuIDE4ODhcIilcblx0di5DaGVjayhtb3ZpZS5ZZWFyIDw9IGludDMyKHRpbWUuTm93KCkuWWVhcigpKSwgXCJ5ZWFyXCIsIFwibXVzdCBub3QgYmUgaW4gdGhlIGZ1dHVyZVwiKVxuXHR2LkNoZWNrKG1vdmllLlJ1bnRpbWUgIT0gMCwgXCJydW50aW1lXCIsIFwibXVzdCBiZSBwcm92aWRlZFwiKVxuXHR2LkNoZWNrKG1vdmllLlJ1bnRpbWUgPiAwLCBcInJ1bnRpbWVcIiwgXCJtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlclwiKVxuXG5cdHYuQ2hlY2sobW92aWUuR2VucmVzICE9IG5pbCwgXCJnZW5yZXNcIiwgXCJtdXN0IGJlIHByb3ZpZGVkXCIpXG5cdHYuQ2hlY2sobGVuKG1vdmllLkdlbnJlcykgPj0gMSwgXCJnZW5yZXNcIiwgXCJtdXN0IGNvbnRhaW4gYXQgbGVhc3QgMSBnZW5yZVwiKVxuXHR2LkNoZWNrKGxlbihtb3ZpZS5HZW5yZXMpIDw9IDUsIFwiZ2VucmVzXCIsIFwibXVzdCBub3QgY29udGFpbiBtb3JlIHRoYW4gNSBnZW5yZXNcIilcblxuXHR2LkNoZWNrKHZhbGlkYXRvci5VbmlxdWUobW92aWUuR2VucmVzKSwgXCJnZW5yZXNcIiwgXCJtdXN0IG5vdCBjb250YWluIGR1cGxpY2F0ZSB2YWx1ZXNcIilcbn1cblxudHlwZSBNb3ZpZU1vZGVsIHN0cnVjdCB7XG5cdERCICpzcWwuREJcbn1cblxuZnVuYyAobSBNb3ZpZU1vZGVsKSBJbnNlcnQobW92aWUgKk1vdmllKSBlcnJvciB7XG5cdHF1ZXJ5IDo9IGBJTlNFUlQgSU5UTyBtb3ZpZXMgKHRpdGxlLCB5ZWFyLCBydW50aW1lLCBnZW5yZXMpXG4gICAgICAgICAgICAgICBWQUxVRVMgKCQxLCAkMiwgJDMsICQ0KVxuICAgICAgICAgICAgICAgUkVUVVJOSU5HIGlkLCBjcmVhdGVkX2F0LCB2ZXJzaW9uYFxuXG5cdGFyZ3MgOj0gW11pbnRlcmZhY2V7fXttb3ZpZS5UaXRsZSwgbW92aWUuWWVhciwgbW92aWUuUnVudGltZSwgcHEuQXJyYXkobW92aWUuR2VucmVzKX1cblxuXHRjdHgsIGNhbmNlbCA6PSBjb250ZXh0LldpdGhUaW1lb3V0KGNvbnRleHQuQmFja2dyb3VuZCgpLCAzKnRpbWUuU2Vjb25kKVxuXHRkZWZlciBjYW5jZWwoKVxuXG5cdHJldHVybiBtLkRCLlF1ZXJ5Um93Q29udGV4dChjdHgsIHF1ZXJ5LCBhcmdzLi4uKS5TY2FuKCZtb3ZpZS5JRCwgJm1vdmllLkNyZWF0ZWRBdCwgJm1vdmllLlZlcnNpb24pXG59XG5cbmZ1bmMgKG0gTW92aWVNb2RlbCkgR2V0KGlkIGludDY0KSAoKk1vdmllLCBlcnJvcikge1xuXHRpZiBpZCA8IDEge1xuXHRcdHJldHVybiBuaWwsIEVyclJlY29yZE5vdEZvdW5kXG5cdH1cblxuXHRxdWVyeSA6PSBgU0VMRUNUIGlkLCBjcmVhdGVkX2F0LCB0aXRsZSwgeWVhciwgcnVudGltZSwgZ2VucmVzLCB2ZXJzaW9uIEZST00gbW92aWVzIFdIRVJFIGlkID0gJDFgXG5cblx0dmFyIG1vdmllIE1vdmllXG5cblx0Y3R4LCBjYW5jZWwgOj0gY29udGV4dC5XaXRoVGltZW91dChjb250ZXh0LkJhY2tncm91bmQoKSwgMyp0aW1lLlNlY29uZClcblxuXHRkZWZlciBjYW5jZWwoKVxuXG5cdGVyciA6PVxuXHRcdG0uREIuUXVlcnlSb3dDb250ZXh0KGN0eCwgcXVlcnksIGlkKS5TY2FuKCZtb3ZpZS5JRCwgJm1vdmllLkNyZWF0ZWRBdCwgJm1vdmllLlRpdGxlLCAmbW92aWUuWWVhciwgJm1vdmllLlJ1bnRpbWUsIHBxLkFycmF5KCZtb3ZpZS5HZW5yZXMpLCAmbW92aWUuVmVyc2lvbilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIHNxbC5FcnJOb1Jvd3MpOlxuXHRcdFx0cmV0dXJuIG5pbCwgRXJyUmVjb3JkTm90Rm91bmRcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIG5pbCwgZXJyXG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuICZtb3ZpZSwgbmlsXG59XG5cbmZ1bmMgKG0gTW92aWVNb2RlbCkgVXBkYXRlKG1vdmllICpNb3ZpZSkgZXJyb3Ige1xuXHRxdWVyeSA6PSBgVVBEQVRFIG1vdmllc1xuIFNFVCB0aXRsZSA9ICQxLCB5ZWFyID0gJDIsIHJ1bnRpbWUgPSAkMywgZ2VucmVzID0gJDQsIHZlcnNpb24gPSB2ZXJzaW9uICsgMSBXSEVSRSAgaWQgPSAkNSBBTkQgdmVyc2lvbiA9ICQ2XG4gUkVUVVJOSU5HIHZlcnNpb25gXG5cblx0YXJncyA6PSBbXWludGVyZmFjZXt9e1xuXHRcdG1vdmllLlRpdGxlLFxuXHRcdG1vdmllLlllYXIsXG5cdFx0bW92aWUuUnVudGltZSxcblx0XHRwcS5BcnJheShtb3ZpZS5HZW5yZXMpLFxuXHRcdG1vdmllLklELFxuXHRcdG1vdmllLlZlcnNpb24sXG5cdH1cblxuXHRjdHgsIGNhbmNlbCA6PSBjb250ZXh0LldpdGhUaW1lb3V0KGNvbnRleHQuQmFja2dyb3VuZCgpLCAzKnRpbWUuU2Vjb25kKVxuXHRkZWZlciBjYW5jZWwoKVxuXG5cdGVyciA6PSBtLkRCLlF1ZXJ5Um93Q29udGV4dChjdHgsIHF1ZXJ5LCBhcmdzLi4uKS5TY2FuKCZtb3ZpZS5WZXJzaW9uKVxuXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHN3aXRjaCB7XG5cdFx0Y2FzZSBlcnJvcnMuSXMoZXJyLCBzcWwuRXJyTm9Sb3dzKTpcblx0XHRcdHJldHVybiBFcnJFZGl0Q29uZmxpY3Rcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIGVyclxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBuaWxcbn1cblxuZnVuYyAobSBNb3ZpZU1vZGVsKSBEZWxldGUoaWQgaW50NjQpIGVycm9yIHtcblx0aWYgaWQgPCAxIHtcblx0XHRyZXR1cm4gRXJyUmVjb3JkTm90Rm91bmRcblx0fVxuXG5cdHF1ZXJ5IDo9IGBERUxFVEUgRlJPTSBtb3ZpZXMgV0hFUkUgaWQgPSAkMWBcblxuXHRjdHgsIGNhbmNlbCA6PSBjb250ZXh0LldpdGhUaW1lb3V0KGNvbnRleHQuQmFja2dyb3VuZCgpLCAzKnRpbWUuU2Vjb25kKVxuXHRkZWZlciBjYW5jZWwoKVxuXG5cdHJlc3VsdCwgZXJyIDo9IG0uREIuRXhlY0NvbnRleHQoY3R4LCBxdWVyeSwgaWQpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBlcnJcblx0fVxuXHRyb3dzQWZmZWN0ZWQsIGVyciA6PSByZXN1bHQuUm93c0FmZmVjdGVkKClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0cmV0dXJuIGVyclxuXHR9XG5cblx0aWYgcm93c0FmZmVjdGVkID09IDAge1xuXHRcdHJldHVybiBFcnJSZWNvcmROb3RGb3VuZFxuXHR9XG5cblx0cmV0dXJuIG5pbFxufVxuLi4uXG5QYXRoOiBjbWQvYXBpL21vdmllcy5nb1xucGFja2FnZSBtYWluXG5cbmltcG9ydCAoXG5cdFwiZXJyb3JzXCJcblx0XCJmbXRcIlxuXHRcImdyZWVubGlnaHQudHVuZGVvc2Jvcm5lL2ludGVybmFsL2RhdGFcIlxuXHRcImdyZWVubGlnaHQudHVuZGVvc2Jvcm5lL2ludGVybmFsL3ZhbGlkYXRvclwiXG5cdFwibmV0L2h0dHBcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBjcmVhdGVNb3ZpZUhhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblxuXHR2YXIgaW5wdXQgc3RydWN0IHtcblx0XHRUaXRsZSAgIHN0cmluZyAgICAgICBganNvbjpcInRpdGxlXCJgXG5cdFx0WWVhciAgICBpbnQzMiAgICAgICAgYGpzb246XCJ5ZWFyXCJgXG5cdFx0UnVudGltZSBkYXRhLlJ1bnRpbWUgYGpzb246XCJydW50aW1lXCJgXG5cdFx0R2VucmVzICBbXXN0cmluZyAgICAgYGpzb246XCJnZW5yZXNcImBcblx0fVxuXG5cdGVyciA6PSBhcHAucmVhZEpTT04odywgciwgJmlucHV0KVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuYmFkUmVxdWVzdFJlc3BvbnNlKHcsIHIsIGVycilcblx0XHRyZXR1cm5cblx0fVxuXG5cdG1vdmllIDo9ICZkYXRhLk1vdmlle1xuXHRcdFRpdGxlOiAgIGlucHV0LlRpdGxlLFxuXHRcdFllYXI6ICAgIGlucHV0LlllYXIsXG5cdFx0UnVudGltZTogaW5wdXQuUnVudGltZSxcblx0XHRHZW5yZXM6ICBpbnB1dC5HZW5yZXMsXG5cdH1cblxuXHR2IDo9IHZhbGlkYXRvci5OZXcoKVxuXG5cdGlmIGRhdGEuVmFsaWRhdGVNb3ZpZSh2LCBtb3ZpZSk7ICF2LlZhbGlkKCkge1xuXHRcdGFwcC5mYWlsZWRWYWxpZGF0aW9uUmVzcG9uc2Uodywgciwgdi5FcnJvcnMpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRlcnIgPSBhcHAubW9kZWxzLk1vdmllcy5JbnNlcnQobW92aWUpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0XHRyZXR1cm5cblx0fVxuXG5cdGhlYWRlcnMgOj0gbWFrZShodHRwLkhlYWRlcilcblx0aGVhZGVycy5TZXQoXCJMb2NhdGlvblwiLCBmbXQuU3ByaW50ZihcIi92MS9tb3ZpZXMvJWRcIiwgbW92aWUuSUQpKVxuXG5cdGVyciA9IGFwcC53cml0ZUpTT04odywgaHR0cC5TdGF0dXNDcmVhdGVkLCBlbnZlbG9wZXtcIm1vdmllXCI6IG1vdmllfSwgaGVhZGVycylcblxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdH1cbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgc2hvd01vdmllSGFuZGxlcih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkge1xuXG5cdGlkLCBlcnIgOj0gYXBwLnJlYWRJRFBhcmFtKHIpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5ub3RGb3VuZFJlc3BvbnNlKHcsIHIpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRtb3ZpZSwgZXJyIDo9IGFwcC5tb2RlbHMuTW92aWVzLkdldChpZClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIGRhdGEuRXJyUmVjb3JkTm90Rm91bmQpOlxuXHRcdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRkZWZhdWx0OlxuXHRcdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdH1cblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC53cml0ZUpTT04odywgaHR0cC5TdGF0dXNPSywgZW52ZWxvcGV7XCJtb3ZpZVwiOiBtb3ZpZX0sIG5pbClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHR9XG5cbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgdXBkYXRlTW92aWVIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdGlkLCBlcnIgOj0gYXBwLnJlYWRJRFBhcmFtKHIpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5ub3RGb3VuZFJlc3BvbnNlKHcsIHIpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRtb3ZpZSwgZXJyIDo9IGFwcC5tb2RlbHMuTW92aWVzLkdldChpZClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIGRhdGEuRXJyUmVjb3JkTm90Rm91bmQpOlxuXHRcdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRkZWZhdWx0OlxuXHRcdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdH1cblx0XHRyZXR1cm5cblx0fVxuXG5cdHZhciBpbnB1dCBzdHJ1Y3Qge1xuXHRcdFRpdGxlICAgKnN0cmluZyAgICAgICBganNvbjpcInRpdGxlXCJgXG5cdFx0WWVhciAgICAqaW50MzIgICAgICAgIGBqc29uOlwieWVhclwiYFxuXHRcdFJ1bnRpbWUgKmRhdGEuUnVudGltZSBganNvbjpcInJ1bnRpbWVcImBcblx0XHRHZW5yZXMgIFtdc3RyaW5nICAgICAgYGpzb246XCJnZW5yZXNcImBcblx0fVxuXG5cdGVyciA9IGFwcC5yZWFkSlNPTih3LCByLCAmaW5wdXQpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5iYWRSZXF1ZXN0UmVzcG9uc2UodywgciwgZXJyKVxuXHRcdHJldHVyblxuXHR9XG5cblx0aWYgaW5wdXQuVGl0bGUgIT0gbmlsIHtcblx0XHRtb3ZpZS5UaXRsZSA9ICppbnB1dC5UaXRsZVxuXHR9XG5cdGlmIGlucHV0LlllYXIgIT0gbmlsIHtcblx0XHRtb3ZpZS5ZZWFyID0gKmlucHV0LlllYXJcblx0fVxuXHRpZiBpbnB1dC5SdW50aW1lICE9IG5pbCB7XG5cdFx0bW92aWUuUnVudGltZSA9ICppbnB1dC5SdW50aW1lXG5cdH1cblx0aWYgaW5wdXQuR2VucmVzICE9IG5pbCB7XG5cdFx0bW92aWUuR2VucmVzID0gaW5wdXQuR2VucmVzXG5cdH1cblxuXHR2IDo9IHZhbGlkYXRvci5OZXcoKVxuXG5cdGlmIGRhdGEuVmFsaWRhdGVNb3ZpZSh2LCBtb3ZpZSk7ICF2LlZhbGlkKCkge1xuXHRcdGFwcC5mYWlsZWRWYWxpZGF0aW9uUmVzcG9uc2Uodywgciwgdi5FcnJvcnMpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRlcnIgPSBhcHAubW9kZWxzLk1vdmllcy5VcGRhdGUobW92aWUpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC53cml0ZUpTT04odywgaHR0cC5TdGF0dXNPSywgZW52ZWxvcGV7XCJtb3ZpZVwiOiBtb3ZpZX0sIG5pbClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHR9XG5cbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgZGVsZXRlTW92aWVIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdGlkLCBlcnIgOj0gYXBwLnJlYWRJRFBhcmFtKHIpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5ub3RGb3VuZFJlc3BvbnNlKHcsIHIpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRlcnIgPSBhcHAubW9kZWxzLk1vdmllcy5EZWxldGUoaWQpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHN3aXRjaCB7XG5cdFx0Y2FzZSBlcnJvcnMuSXMoZXJyLCBkYXRhLkVyclJlY29yZE5vdEZvdW5kKTpcblx0XHRcdGFwcC5ub3RGb3VuZFJlc3BvbnNlKHcsIHIpXG5cdFx0ZGVmYXVsdDpcblx0XHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0XHR9XG5cdFx0cmV0dXJuXG5cdH1cblx0ZXJyID0gYXBwLndyaXRlSlNPTih3LCBodHRwLlN0YXR1c09LLCBlbnZlbG9wZXtcIm1lc3NhZ2VcIjogXCJtb3ZpZSBzdWNjZXNzZnVsbHkgZGVsZXRlZFwifSwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdH1cbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgbGlzdE1vdmllc0hhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblx0dmFyIGlucHV0IHN0cnVjdCB7XG5cdFx0VGl0bGUgICAgc3RyaW5nXG5cdFx0R2VucmVzICAgW11zdHJpbmdcblx0XHRQYWdlICAgICBpbnRcblx0XHRQYWdlU2l6ZSBpbnRcblx0XHRzb3J0ICAgICBzdHJpbmdcblx0fVxuXG5cdHYgOj0gdmFsaWRhdG9yLk5ldygpXG5cblx0cXMgOj0gci5VUkwuUXVlcnkoKVxuXHRpbnB1dC5UaXRsZSA9IGFwcC5yZWFkU3RyaW5nKHFzLCBcInRpdGxlXCIsIFwiXCIpXG5cdGlucHV0LkdlbnJlcyA9IGFwcC5yZWFkQ1NWKHFzLCBcImdlbnJlc1wiLCBbXXN0cmluZ3t9KVxuXHRpbnB1dC5QYWdlID0gYXBwLnJlYWRJbnQocXMsIFwicGFnZVwiLCAxLCB2KVxuXHRpbnB1dC5QYWdlU2l6ZSA9IGFwcC5yZWFkSW50KHFzLCBcInBhZ2Vfc2l6ZVwiLCAyMCwgdilcblx0aW5wdXQuc29ydCA9IGFwcC5yZWFkU3RyaW5nKHFzLCBcInNvcnRcIiwgXCJpZFwiKVxuXG5cdGlmICF2LlZhbGlkKCkge1xuXHRcdGFwcC5mYWlsZWRWYWxpZGF0aW9uUmVzcG9uc2Uodywgciwgdi5FcnJvcnMpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRmbXQuRnByaW50Zih3LCBcIiUrdlxcblwiLCBpbnB1dClcbn1cbi4uLlxuUGF0aDogaW50ZXJuYWwvZGF0YS9maWx0ZXJzLmdvXG5wYWNrYWdlIGRhdGFcbi4uLlxuUGF0aDogbWlncmF0aW9ucy8wMDAwMDJfYWRkX21vdmllc19jaGVja19jb25zdHJhaW50cy51cC5zcWxcbkFMVEVSIFRBQkxFIG1vdmllcyBBREQgQ09OU1RSQUlOVCBtb3ZpZXNfcnVudGltZV9jaGVjayBDSEVDSyAocnVudGltZSA+PSAwKTtcblxuQUxURVIgVEFCTEUgbW92aWVzIEFERCBDT05TVFJBSU5UIG1vdmllc195ZWFyX2NoZWNrIENIRUNLICh5ZWFyIEJFVFdFRU4gMTg4OCBBTkQgZGF0ZV9wYXJ0KCd5ZWFyJywgbm93KCkpKTtcblxuQUxURVIgVEFCTEUgbW92aWVzIEFERCBDT05TVFJBSU5UIGdlbnJlc19sZW5ndGhfY2hlY2sgQ0hFQ0sgKGFycmF5X2xlbmd0aChnZW5yZXMsIDEpIEJFVFdFRU4gMSBBTkQgNSk7Li4uXG5QYXRoOiBpbnRlcm5hbC92YWxpZGF0b3IvdmFsaWRhdG9yLmdvXG5wYWNrYWdlIHZhbGlkYXRvclxuXG5pbXBvcnQgKFxuXHRcInJlZ2V4cFwiXG5cdFwic2xpY2VzXCJcbilcblxudmFyIChcblx0RW1haWxSWCA9IHJlZ2V4cC5NdXN0Q29tcGlsZShcIl5bYS16QS1aMC05LiEjJCUmJyorXFxcXC89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFxcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiRcIilcbilcblxudHlwZSBWYWxpZGF0b3Igc3RydWN0IHtcblx0RXJyb3JzIG1hcFtzdHJpbmddc3RyaW5nXG59XG5cbmZ1bmMgTmV3KCkgKlZhbGlkYXRvciB7XG5cdHJldHVybiAmVmFsaWRhdG9ye0Vycm9yczogbWFrZShtYXBbc3RyaW5nXXN0cmluZyl9XG59XG5cbmZ1bmMgKHYgKlZhbGlkYXRvcikgVmFsaWQoKSBib29sIHtcblx0cmV0dXJuIGxlbih2LkVycm9ycykgPT0gMFxufVxuXG5mdW5jICh2ICpWYWxpZGF0b3IpIEFkZEVycm9yKGtleSwgbWVzc2FnZSBzdHJpbmcpIHtcblx0aWYgXywgZXhpc3RzIDo9IHYuRXJyb3JzW2tleV07ICFleGlzdHMge1xuXHRcdHYuRXJyb3JzW2tleV0gPSBtZXNzYWdlXG5cdH1cbn1cblxuZnVuYyAodiAqVmFsaWRhdG9yKSBDaGVjayhvayBib29sLCBrZXksIG1lc3NhZ2Ugc3RyaW5nKSB7XG5cdGlmICFvayB7XG5cdFx0di5BZGRFcnJvcihrZXksIG1lc3NhZ2UpXG5cdH1cbn1cblxuZnVuYyBJbih2YWx1ZSBzdHJpbmcsIGxpc3QgLi4uc3RyaW5nKSBib29sIHtcblx0cmV0dXJuIHNsaWNlcy5Db250YWlucyhsaXN0LCB2YWx1ZSlcbn1cblxuZnVuYyBNYXRjaGVzKHZhbHVlIHN0cmluZywgcnggKnJlZ2V4cC5SZWdleHApIGJvb2wge1xuXHRyZXR1cm4gcnguTWF0Y2hTdHJpbmcodmFsdWUpXG59XG5cbmZ1bmMgVW5pcXVlKHZhbHVlcyBbXXN0cmluZykgYm9vbCB7XG5cdHVuaXF1ZVZhbHVlcyA6PSBtYWtlKG1hcFtzdHJpbmddYm9vbClcblxuXHRmb3IgXywgdmFsdWUgOj0gcmFuZ2UgdmFsdWVzIHtcblx0XHR1bmlxdWVWYWx1ZXNbdmFsdWVdID0gdHJ1ZVxuXHR9XG5cblx0cmV0dXJuIGxlbih2YWx1ZXMpID09IGxlbih1bmlxdWVWYWx1ZXMpXG59XG4uLi5cblBhdGg6IGludGVybmFsL2RhdGEvbW9kZWxzLmdvXG5wYWNrYWdlIGRhdGFcblxuaW1wb3J0IChcblx0XCJkYXRhYmFzZS9zcWxcIlxuXHRcImVycm9yc1wiXG4pXG5cbnZhciAoXG5cdEVyclJlY29yZE5vdEZvdW5kID0gZXJyb3JzLk5ldyhcInJlY29yZCBub3QgZm91bmRcIilcblx0RXJyRWRpdENvbmZsaWN0ICAgPSBlcnJvcnMuTmV3KFwiZWRpdCBjb25mbGljdFwiKVxuKVxuXG50eXBlIE1vZGVscyBzdHJ1Y3Qge1xuXHRNb3ZpZXMgTW92aWVNb2RlbFxufVxuXG5mdW5jIE5ld01vZGVscyhkYiAqc3FsLkRCKSBNb2RlbHMge1xuXHRyZXR1cm4gTW9kZWxze1xuXHRcdE1vdmllczogTW92aWVNb2RlbHtEQjogZGJ9LFxuXHR9XG59XG4uLi5cblBhdGg6IG1pZ3JhdGlvbnMvMDAwMDAyX2FkZF9tb3ZpZXNfY2hlY2tfY29uc3RyYWludHMuZG93bi5zcWxcbkFMVEVSIFRBQkxFIG1vdmllcyBEUk9QIENPTlNUUkFJTlQgSUYgRVhJU1RTIG1vdmllc19ydW50aW1lX2NoZWNrO1xuXG5BTFRFUiBUQUJMRSBtb3ZpZXMgRFJPUCBDT05TVFJBSU5UIElGIEVYSVNUUyBtb3ZpZXNfeWVhcl9jaGVjaztcblxuQUxURVIgVEFCTEUgbW92aWVzIERST1AgQ09OU1RSQUlOVCBJRiBFWElTVFMgZ2VucmVzX2xlbmd0aF9jaGVjazsuLi5cblBhdGg6IGNtZC9hcGkvaGVscGVycy5nb1xucGFja2FnZSBtYWluXG5cbmltcG9ydCAoXG5cdFwiZW5jb2RpbmcvanNvblwiXG5cdFwiZXJyb3JzXCJcblx0XCJmbXRcIlxuXHRcImdyZWVubGlnaHQudHVuZGVvc2Jvcm5lL2ludGVybmFsL3ZhbGlkYXRvclwiXG5cdFwiaW9cIlxuXHRcIm5ldC9odHRwXCJcblx0XCJuZXQvdXJsXCJcblx0XCJzdHJjb252XCJcblx0XCJzdHJpbmdzXCJcblxuXHRcIm1hcHNcIlxuXG5cdFwiZ2l0aHViLmNvbS9qdWxpZW5zY2htaWR0L2h0dHByb3V0ZXJcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSByZWFkSURQYXJhbShyICpodHRwLlJlcXVlc3QpIChpbnQ2NCwgZXJyb3IpIHtcblx0cGFyYW1zIDo9IGh0dHByb3V0ZXIuUGFyYW1zRnJvbUNvbnRleHQoci5Db250ZXh0KCkpXG5cblx0aWQsIGVyciA6PSBzdHJjb252LlBhcnNlSW50KHBhcmFtcy5CeU5hbWUoXCJpZFwiKSwgMTAsIDY0KVxuXHRpZiBlcnIgIT0gbmlsIHx8IGlkIDwgMSB7XG5cdFx0cmV0dXJuIDAsIGVycm9ycy5OZXcoXCJpbnZhbGlkIGlkIHBhcmFtZXRlclwiKVxuXHR9XG5cdHJldHVybiBpZCwgbmlsXG59XG5cbnR5cGUgZW52ZWxvcGUgbWFwW3N0cmluZ11pbnRlcmZhY2V7fVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSB3cml0ZUpTT04odyBodHRwLlJlc3BvbnNlV3JpdGVyLCBzdGF0dXMgaW50LCBkYXRhIGVudmVsb3BlLCBoZWFkZXJzIGh0dHAuSGVhZGVyKSBlcnJvciB7XG5cdGpzLCBlcnIgOj0ganNvbi5NYXJzaGFsSW5kZW50KGRhdGEsIFwiXCIsIFwiXFx0XCIpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBlcnJcblx0fVxuXG5cdGpzID0gYXBwZW5kKGpzLCAnXFxuJylcblxuXHRtYXBzLkNvcHkody5IZWFkZXIoKSwgaGVhZGVycylcblxuXHR3LkhlYWRlcigpLlNldChcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcblx0dy5Xcml0ZUhlYWRlcihzdGF0dXMpXG5cdHcuV3JpdGUoanMpXG5cdHJldHVybiBuaWxcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgcmVhZEpTT04odyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QsIGRzdCBpbnRlcmZhY2V7fSkgZXJyb3Ige1xuXG5cdG1heEJ5dGVzIDo9IDFfMDQ4XzU3NlxuXHRyLkJvZHkgPSBodHRwLk1heEJ5dGVzUmVhZGVyKHcsIHIuQm9keSwgaW50NjQobWF4Qnl0ZXMpKVxuXG5cdGRlYyA6PSBqc29uLk5ld0RlY29kZXIoci5Cb2R5KVxuXHRkZWMuRGlzYWxsb3dVbmtub3duRmllbGRzKClcblxuXHRlcnIgOj0gZGVjLkRlY29kZShkc3QpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHZhciBzeW50YXhFcnJvciAqanNvbi5TeW50YXhFcnJvclxuXHRcdHZhciB1bm1hcnNoYWxUeXBlRXJyb3IgKmpzb24uVW5tYXJzaGFsVHlwZUVycm9yXG5cdFx0dmFyIGludmFsaWRVbm1hcnNoYWxFcnJvciAqanNvbi5JbnZhbGlkVW5tYXJzaGFsRXJyb3JcblxuXHRcdHN3aXRjaCB7XG5cdFx0Y2FzZSBlcnJvcnMuQXMoZXJyLCAmc3ludGF4RXJyb3IpOlxuXHRcdFx0cmV0dXJuIGZtdC5FcnJvcmYoXCJib2R5IGNvbnRhaW5zIGJhZGx5LWZvcm1lZCBKU09OIChhdCBjaGFyYWN0ZXIgJWQpXCIsIHN5bnRheEVycm9yLk9mZnNldClcblxuXHRcdGNhc2UgZXJyb3JzLklzKGVyciwgaW8uRXJyVW5leHBlY3RlZEVPRik6XG5cdFx0XHRyZXR1cm4gZXJyb3JzLk5ldyhcImJvZHkgY29udGFpbnMgYmFkbHktZm9ybWVkIEpTT05cIilcblxuXHRcdGNhc2UgZXJyb3JzLkFzKGVyciwgJnVubWFyc2hhbFR5cGVFcnJvcik6XG5cdFx0XHRpZiB1bm1hcnNoYWxUeXBlRXJyb3IuRmllbGQgIT0gXCJcIiB7XG5cdFx0XHRcdHJldHVybiBmbXQuRXJyb3JmKFwiYm9keSBjb250YWlucyBpbmNvcnJlY3QgSlNPTiB0eXBlIGZvciBmaWVsZCAlcVwiLCB1bm1hcnNoYWxUeXBlRXJyb3IuRmllbGQpXG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZm10LkVycm9yZihcImJvZHkgY29udGFpbnMgaW5jb3JyZWN0IEpTT04gdHlwZSAoYXQgY2hhcmFjdGVyICVkKVwiLCB1bm1hcnNoYWxUeXBlRXJyb3IuT2Zmc2V0KVxuXHRcdGNhc2UgZXJyb3JzLklzKGVyciwgaW8uRU9GKTpcblx0XHRcdHJldHVybiBlcnJvcnMuTmV3KFwiYm9keSBtdXN0IG5vdCBiZSBlbXB0eVwiKVxuXG5cdFx0Y2FzZSBzdHJpbmdzLkhhc1ByZWZpeChlcnIuRXJyb3IoKSwgXCJqc29uOiB1bmtub3duIGZpZWxkIFwiKTpcblx0XHRcdGZpZWxkTmFtZSA6PSBzdHJpbmdzLlRyaW1QcmVmaXgoZXJyLkVycm9yKCksIFwianNvbjogdW5rbm93biBmaWVsZFwiKVxuXG5cdFx0XHRyZXR1cm4gZm10LkVycm9yZihcImJvZHkgY29udGFpbnMgdW5rbm93biBrZXkgJXNcIiwgZmllbGROYW1lKVxuXG5cdFx0Y2FzZSBlcnIuRXJyb3IoKSA9PSBcImh0dHA6IHJlcXVlc3QgYm9keSB0b28gbGFyZ2VcIjpcblx0XHRcdHJldHVybiBmbXQuRXJyb3JmKFwiYm9keSBtdXN0IG5vdCBiZSBsYXJnZXIgdGhhbiAlZCBieXRlc1wiLCBtYXhCeXRlcylcblx0XHRjYXNlIGVycm9ycy5BcyhlcnIsICZpbnZhbGlkVW5tYXJzaGFsRXJyb3IpOlxuXHRcdFx0cGFuaWMoZXJyKVxuXG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiBlcnJcblx0XHR9XG5cdH1cblxuXHRlcnIgPSBkZWMuRGVjb2RlKCZzdHJ1Y3R7fXt9KVxuXHRpZiBlcnIgIT0gaW8uRU9GIHtcblx0XHRyZXR1cm4gZXJyb3JzLk5ldyhcImJvZHkgbXVzdCBvbmx5IGNvbnRhaW4gYSBzaW5nbGUgSlNPTiB2YWx1ZVwiKVxuXHR9XG5cblx0cmV0dXJuIG5pbFxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSByZWFkU3RyaW5nKHFzIHVybC5WYWx1ZXMsIGtleSBzdHJpbmcsIGRlZmF1bHRWYWx1ZSBzdHJpbmcpIHN0cmluZyB7XG5cdHMgOj0gcXMuR2V0KGtleSlcblxuXHRpZiBzID09IFwiXCIge1xuXHRcdHJldHVybiBkZWZhdWx0VmFsdWVcblx0fVxuXG5cdHJldHVybiBzXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJlYWRDU1YocXMgdXJsLlZhbHVlcywga2V5IHN0cmluZywgZGVmYXVsdFZhbHVlIFtdc3RyaW5nKSBbXXN0cmluZyB7XG5cdGNzdiA6PSBxcy5HZXQoa2V5KVxuXG5cdGlmIGNzdiA9PSBcIlwiIHtcblx0XHRyZXR1cm4gZGVmYXVsdFZhbHVlXG5cdH1cblxuXHRyZXR1cm4gc3RyaW5ncy5TcGxpdChjc3YsIFwiLFwiKVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSByZWFkSW50KHFzIHVybC5WYWx1ZXMsIGtleSBzdHJpbmcsIGRlZmF1bHRWYWx1ZSBpbnQsIHYgKnZhbGlkYXRvci5WYWxpZGF0b3IpIGludCB7XG5cdHMgOj0gcXMuR2V0KGtleSlcblxuXHRpZiBzID09IFwiXCIge1xuXHRcdHJldHVybiBkZWZhdWx0VmFsdWVcblx0fVxuXG5cdGksIGVyciA6PSBzdHJjb252LkF0b2kocylcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0di5BZGRFcnJvcihrZXksIFwibXVzdCBiZSBhbiBpbnRlZ2VyIHZhbHVlXCIpXG5cdFx0cmV0dXJuIGRlZmF1bHRWYWx1ZVxuXHR9XG5cblx0cmV0dXJuIGlcbn1cbi4uLlxuUGF0aDogbWlncmF0aW9ucy8wMDAwMDFfY3JlYXRlX21vdmllc190YWJsZS51cC5zcWxcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG1vdmllcyAoXG4gICAgaWQgYmlnc2VyaWFsIFBSSU1BUlkgS0VZLFxuICAgIGNyZWF0ZWRfYXQgdGltZXN0YW1wKDApIHdpdGggdGltZSB6b25lIE5PVCBOVUxMIERFRkFVTFQgTk9XKCksXG4gICAgdGl0bGUgdGV4dCBOT1QgTlVMTCxcbiAgICB5ZWFyIGludGVnZXIgTk9UIE5VTEwsXG4gICAgcnVudGltZSBpbnRlZ2VyIE5PVCBOVUxMLFxuICAgIGdlbnJlcyB0ZXh0W10gTk9UIE5VTEwsXG4gICAgdmVyc2lvbiBpbnRlZ2VyIE5PVCBOVUxMIERFRkFVTFQgMVxuKTtcbi4uLlxuUGF0aDogaW50ZXJuYWwvZGF0YS9ydW50aW1lLmdvXG5wYWNrYWdlIGRhdGFcblxuaW1wb3J0IChcblx0XCJlcnJvcnNcIlxuXHRcImZtdFwiXG5cdFwic3RyY29udlwiXG5cdFwic3RyaW5nc1wiXG4pXG5cbnZhciBFcnJJbnZhbGlkUnVudGltZUZvcm1hdCA9IGVycm9ycy5OZXcoXCJpbnZhbGlkIHJ1bnRpbWUgZm9ybWF0XCIpXG5cbnR5cGUgUnVudGltZSBpbnQzMlxuXG5mdW5jIChyIFJ1bnRpbWUpIE1hcnNoYWxKU09OKCkgKFtdYnl0ZSwgZXJyb3IpIHtcblx0anNvblZhbHVlIDo9IGZtdC5TcHJpbnRmKFwiJWQgbWluc1wiLCByKVxuXG5cdHF1b3RlZEpTT05WYWx1ZSA6PSBzdHJjb252LlF1b3RlKGpzb25WYWx1ZSlcblxuXHRyZXR1cm4gW11ieXRlKHF1b3RlZEpTT05WYWx1ZSksIG5pbFxufVxuXG5mdW5jIChyICpSdW50aW1lKSBVbm1hcnNoYWxKU09OKGpzb25WYWx1ZSBbXWJ5dGUpIGVycm9yIHtcblxuXHR1bnF1b3RlZEpTT05WYWx1ZSwgZXJyIDo9IHN0cmNvbnYuVW5xdW90ZShzdHJpbmcoanNvblZhbHVlKSlcblxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gRXJySW52YWxpZFJ1bnRpbWVGb3JtYXRcblx0fVxuXG5cdHBhcnRzIDo9IHN0cmluZ3MuU3BsaXQodW5xdW90ZWRKU09OVmFsdWUsIFwiIFwiKVxuXG5cdGlmIGxlbihwYXJ0cykgIT0gMiB8fCBwYXJ0c1sxXSAhPSBcIm1pbnNcIiB7XG5cdFx0cmV0dXJuIEVyckludmFsaWRSdW50aW1lRm9ybWF0XG5cdH1cblxuXHRpLCBlcnIgOj0gc3RyY29udi5QYXJzZUludChwYXJ0c1swXSwgMTAsIDMyKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gRXJySW52YWxpZFJ1bnRpbWVGb3JtYXRcblx0fVxuXG5cdCpyID0gUnVudGltZShpKVxuXG5cdHJldHVybiBuaWxcbn1cbi4uLlxuUGF0aDogY21kL2FwaS9lcnJvcnMuZ29cbnBhY2thZ2UgbWFpblxuXG5pbXBvcnQgKFxuXHRcImZtdFwiXG5cdFwibmV0L2h0dHBcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBsb2dFcnJvcihyICpodHRwLlJlcXVlc3QsIGVyciBlcnJvcikge1xuXHRhcHAubG9nZ2VyLlByaW50bG4oZXJyKVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBlcnJvclJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBzdGF0dXMgaW50LCBtZXNzYWdlIGludGVyZmFjZXt9KSB7XG5cblx0ZW52IDo9IGVudmVsb3Ble1wiZXJyb3JcIjogbWVzc2FnZX1cblxuXHRlcnIgOj0gYXBwLndyaXRlSlNPTih3LCBzdGF0dXMsIGVudiwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAubG9nRXJyb3IociwgZXJyKVxuXHRcdHcuV3JpdGVIZWFkZXIoNTAwKVxuXHR9XG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHNlcnZlckVycm9yUmVzcG9uc2UodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QsIGVyciBlcnJvcikge1xuXHRhcHAubG9nRXJyb3IociwgZXJyKVxuXG5cdG1lc3NhZ2UgOj0gXCJ0aGUgc2VydmVyIGVuY291bnRlcmVkIGEgcHJvYmxlbSBhbmQgY291bGQgbm90IHByb2Nlc3MgeW91ciByZXF1ZXN0XCJcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNJbnRlcm5hbFNlcnZlckVycm9yLCBtZXNzYWdlKVxuXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIG5vdEZvdW5kUmVzcG9uc2UodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblx0bWVzc2FnZSA6PSBcInRoZSByZXF1ZXN0ZWQgcmVzb3VyY2UgY291bGQgbm90IGJlIGZvdW5kXCJcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNOb3RGb3VuZCwgbWVzc2FnZSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgbWV0aG9kTm90QWxsb3dlZFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdG1lc3NhZ2UgOj0gZm10LlNwcmludGYoXCJ0aGUgJXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgcmVzb3VyY2VcIiwgci5NZXRob2QpXG5cdGFwcC5lcnJvclJlc3BvbnNlKHcsIHIsIGh0dHAuU3RhdHVzTWV0aG9kTm90QWxsb3dlZCwgbWVzc2FnZSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgYmFkUmVxdWVzdFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBlcnIgZXJyb3IpIHtcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNCYWRSZXF1ZXN0LCBlcnIuRXJyb3IoKSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgZmFpbGVkVmFsaWRhdGlvblJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBlcnJvcnMgbWFwW3N0cmluZ11zdHJpbmcpIHtcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNVbnByb2Nlc3NhYmxlRW50aXR5LCBlcnJvcnMpXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIGVkaXRDb25mbGljdFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdG1lc3NhZ2UgOj0gXCJ1bmFibGUgdG8gdXBkYXRlIHRoZSByZWNvcmQgZHVlIHRvIGVkaXQgY29uZmxpY3QsIHBsZWFzZSB0cnkgYWdhaW5cIlxuXG5cdGFwcC5lcnJvclJlc3BvbnNlKHcsIHIsIGh0dHAuU3RhdHVzQ29uZmxpY3QsIG1lc3NhZ2UpXG59XG4uLi5cblBhdGg6IGNtZC9hcGkvaGVhbHRoY2hlY2suZ29cbnBhY2thZ2UgbWFpblxuXG5pbXBvcnQgKFxuXHRcIm5ldC9odHRwXCJcbilcblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgaGVhbHRoY2hlY2tIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cblx0ZW52IDo9IGVudmVsb3Ble1xuXHRcdFwic3RhdHVzXCI6IFwiYXZhaWxhYmxlXCIsXG5cdFx0XCJzeXN0ZW1faW5mb1wiOiBtYXBbc3RyaW5nXXN0cmluZ3tcblx0XHRcdFwiZW52aXJvbm1lbnRcIjogYXBwLmNvbmZpZy5lbnYsXG5cdFx0XHRcInZlcnNpb25cIjogICAgIHZlcnNpb24sXG5cdFx0fSxcblx0fVxuXG5cdGVyciA6PSBhcHAud3JpdGVKU09OKHcsIGh0dHAuU3RhdHVzT0ssIGVudiwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAubG9nZ2VyLlByaW50bG4oZXJyKVxuXHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0fVxuXG59XG4uLi5cblBhdGg6IGNtZC9hcGkvcm91dGVzLmdvXG5wYWNrYWdlIG1haW5cblxuaW1wb3J0IChcblx0XCJuZXQvaHR0cFwiXG5cblx0XCJnaXRodWIuY29tL2p1bGllbnNjaG1pZHQvaHR0cHJvdXRlclwiXG4pXG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJvdXRlcygpICpodHRwcm91dGVyLlJvdXRlciB7XG5cdHJvdXRlciA6PSBodHRwcm91dGVyLk5ldygpXG5cblx0cm91dGVyLk5vdEZvdW5kID0gaHR0cC5IYW5kbGVyRnVuYyhhcHAubm90Rm91bmRSZXNwb25zZSlcblx0cm91dGVyLk1ldGhvZE5vdEFsbG93ZWQgPSBodHRwLkhhbmRsZXJGdW5jKGFwcC5tZXRob2ROb3RBbGxvd2VkUmVzcG9uc2UpXG5cblx0cm91dGVyLkhhbmRsZXJGdW5jKGh0dHAuTWV0aG9kR2V0LCBcIi92MS9oZWFsdGhjaGVja1wiLCBhcHAuaGVhbHRoY2hlY2tIYW5kbGVyKVxuXHRyb3V0ZXIuSGFuZGxlckZ1bmMoaHR0cC5NZXRob2RQb3N0LCBcIi92MS9tb3ZpZXNcIiwgYXBwLmNyZWF0ZU1vdmllSGFuZGxlcilcblx0cm91dGVyLkhhbmRsZXJGdW5jKGh0dHAuTWV0aG9kR2V0LCBcIi92MS9tb3ZpZXMvOmlkXCIsIGFwcC5zaG93TW92aWVIYW5kbGVyKVxuXHRyb3V0ZXIuSGFuZGxlckZ1bmMoaHR0cC5NZXRob2RQYXRjaCwgXCIvdjEvbW92aWVzLzppZFwiLCBhcHAudXBkYXRlTW92aWVIYW5kbGVyKVxuXHRyb3V0ZXIuSGFuZGxlckZ1bmMoaHR0cC5NZXRob2REZWxldGUsIFwiL3YxL21vdmllcy86aWRcIiwgYXBwLmRlbGV0ZU1vdmllSGFuZGxlcilcblx0cmV0dXJuIHJvdXRlclxufVxuLi4uXG5QYXRoOiBjbWQvYXBpL21haW4uZ29cbnBhY2thZ2UgbWFpblxuXG5pbXBvcnQgKFxuXHRcImNvbnRleHRcIlxuXHRcImRhdGFiYXNlL3NxbFwiXG5cdFwiZmxhZ1wiXG5cdFwiZm10XCJcblx0XCJncmVlbmxpZ2h0LnR1bmRlb3Nib3JuZS9pbnRlcm5hbC9kYXRhXCJcblx0XCJsb2dcIlxuXHRcIm5ldC9odHRwXCJcblx0XCJvc1wiXG5cdFwidGltZVwiXG5cblx0XyBcImdpdGh1Yi5jb20vbGliL3BxXCJcbilcblxuY29uc3QgdmVyc2lvbiA9IFwiMS4wLjBcIlxuXG50eXBlIGNvbmZpZyBzdHJ1Y3Qge1xuXHRwb3J0IGludFxuXHRlbnYgIHN0cmluZ1xuXHRkYiAgIHN0cnVjdCB7XG5cdFx0ZHNuICAgICAgICAgIHN0cmluZ1xuXHRcdG1heE9wZW5Db25ucyBpbnRcblx0XHRtYXhJZGxlQ29ubnMgaW50XG5cdFx0bWF4SWRsZVRpbWUgIHN0cmluZ1xuXHR9XG59XG5cbnR5cGUgYXBwbGljYXRpb24gc3RydWN0IHtcblx0Y29uZmlnIGNvbmZpZ1xuXHRsb2dnZXIgKmxvZy5Mb2dnZXJcblx0bW9kZWxzIGRhdGEuTW9kZWxzXG59XG5cbmZ1bmMgbWFpbigpIHtcblxuXHR2YXIgY2ZnIGNvbmZpZ1xuXG5cdGZsYWcuSW50VmFyKCZjZmcucG9ydCwgXCJwb3J0XCIsIDQwMDAsIFwiQVBJIHNlcnZlciBwb3J0XCIpXG5cdGZsYWcuU3RyaW5nVmFyKCZjZmcuZW52LCBcImVudlwiLCBcImRldmVsb3BtZW50XCIsIFwiRW52aXJvbm1lbnQgKGRldmVsb3BtZW50fHN0YWdpbmd8cHJvZHVjdGlvbilcIilcblxuXHRmbGFnLlN0cmluZ1ZhcigmY2ZnLmRiLmRzbiwgXCJkYi1kc25cIiwgb3MuR2V0ZW52KFwiR1JFRU5MSUdIVF9EQl9EU05cIiksIFwiUG9zdGdyZVNRTCBEU05cIilcblxuXHRmbGFnLkludFZhcigmY2ZnLmRiLm1heE9wZW5Db25ucywgXCJkYi1tYXgtb3Blbi1jb25uc1wiLCAyNSwgXCJQb3N0Z3JlU1FMIG1heCBvcGVuIGNvbm5lY3Rpb25zXCIpXG5cblx0ZmxhZy5JbnRWYXIoJmNmZy5kYi5tYXhJZGxlQ29ubnMsIFwiZGItbWF4LWlkbGUtY29ubnNcIiwgMjUsIFwiUG9zdGdyZVNRTCBtYXggaWRsZSBjb25uZWN0aW9uc1wiKVxuXG5cdGZsYWcuU3RyaW5nVmFyKCZjZmcuZGIubWF4SWRsZVRpbWUsIFwiZGItbWF4LWlkbGUtdGltZVwiLCBcIjE1bVwiLCBcIlBvc3RncmVTUUwgbWF4IGNvbm5lY3Rpb24gaWRsZSB0aW1lXCIpXG5cdGZsYWcuUGFyc2UoKVxuXG5cdGxvZ2dlciA6PSBsb2cuTmV3KG9zLlN0ZG91dCwgXCJcIiwgbG9nLkxkYXRlfGxvZy5MdGltZSlcblxuXHRkYiwgZXJyIDo9IG9wZW5EQihjZmcpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGxvZ2dlci5GYXRhbChlcnIpXG5cdH1cblxuXHRkZWZlciBkYi5DbG9zZSgpXG5cblx0bG9nZ2VyLlByaW50ZihcImRhdGFiYXNlIGNvbm5lY3Rpb24gcG9vbCBlc3RhYmxpc2hlZFwiKVxuXG5cdGFwcCA6PSAmYXBwbGljYXRpb257XG5cdFx0Y29uZmlnOiBjZmcsXG5cdFx0bG9nZ2VyOiBsb2dnZXIsXG5cdFx0bW9kZWxzOiBkYXRhLk5ld01vZGVscyhkYiksXG5cdH1cblxuXHRzcnYgOj0gJmh0dHAuU2VydmVye1xuXHRcdEFkZHI6ICAgICAgICAgZm10LlNwcmludGYoXCI6JWRcIiwgY2ZnLnBvcnQpLFxuXHRcdEhhbmRsZXI6ICAgICAgYXBwLnJvdXRlcygpLFxuXHRcdElkbGVUaW1lb3V0OiAgdGltZS5NaW51dGUsXG5cdFx0UmVhZFRpbWVvdXQ6ICAxMCAqIHRpbWUuU2Vjb25kLFxuXHRcdFdyaXRlVGltZW91dDogMzAgKiB0aW1lLlNlY29uZCxcblx0fVxuXG5cdGxvZ2dlci5QcmludGYoXCJzdGFydGluZyAlcyBzZXJ2ZXIgb24gJXNcIiwgY2ZnLmVudiwgc3J2LkFkZHIpXG5cdGVyciA9IHNydi5MaXN0ZW5BbmRTZXJ2ZSgpXG5cdGxvZ2dlci5GYXRhbChlcnIpXG59XG5cbmZ1bmMgb3BlbkRCKGNmZyBjb25maWcpICgqc3FsLkRCLCBlcnJvcikge1xuXG5cdGRiLCBlcnIgOj0gc3FsLk9wZW4oXCJwb3N0Z3Jlc1wiLCBjZmcuZGIuZHNuKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gbmlsLCBlcnJcblx0fVxuXG5cdGRiLlNldE1heE9wZW5Db25ucyhjZmcuZGIubWF4T3BlbkNvbm5zKVxuXG5cdGRiLlNldE1heElkbGVDb25ucyhjZmcuZGIubWF4SWRsZUNvbm5zKVxuXG5cdGR1cmF0aW9uLCBlcnIgOj0gdGltZS5QYXJzZUR1cmF0aW9uKGNmZy5kYi5tYXhJZGxlVGltZSlcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0cmV0dXJuIG5pbCwgZXJyXG5cdH1cblx0ZGIuU2V0Q29ubk1heElkbGVUaW1lKGR1cmF0aW9uKVxuXG5cdGN0eCwgY2FuY2VsIDo9IGNvbnRleHQuV2l0aFRpbWVvdXQoY29udGV4dC5CYWNrZ3JvdW5kKCksIDUqdGltZS5TZWNvbmQpXG5cdGRlZmVyIGNhbmNlbCgpXG5cblx0ZXJyID0gZGIuUGluZ0NvbnRleHQoY3R4KVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gbmlsLCBlcnJcblx0fVxuXG5cdHJldHVybiBkYiwgbmlsXG59XG4uLi5cblBhdGg6IG1pZ3JhdGlvbnMvMDAwMDAxX2NyZWF0ZV9tb3ZpZXNfdGFibGUuZG93bi5zcWxcbkRST1AgVEFCTEUgSUYgRVhJU1RTIG1vdmllczsuLi5cblBhdGg6IGdvLm1vZFxubW9kdWxlIGdyZWVubGlnaHQudHVuZGVvc2Jvcm5lXG5cbmdvIDEuMjMuNVxuXG5yZXF1aXJlIGdpdGh1Yi5jb20vanVsaWVuc2NobWlkdC9odHRwcm91dGVyIHYxLjMuMFxuXG5yZXF1aXJlIGdpdGh1Yi5jb20vbGliL3BxIHYxLjEwLjAgLy8gaW5kaXJlY3Rcbi4uLlxuUGF0aDogZ28uc3VtXG5naXRodWIuY29tL2p1bGllbnNjaG1pZHQvaHR0cHJvdXRlciB2MS4zLjAgaDE6VTA2MDllOXRnYnNldTNyQklOZXQ5UDQ4QUkvRDNvSnM0ZE43andKT1ExVT1cbmdpdGh1Yi5jb20vanVsaWVuc2NobWlkdC9odHRwcm91dGVyIHYxLjMuMC9nby5tb2QgaDE6SlI2V3RIYisyTFVlOFRDS1kzY1pPeEZ5eU84SVpBYzRSVmN5Y0NDQUtkTT1cbmdpdGh1Yi5jb20vbGliL3BxIHYxLjEwLjAgaDE6Wng1REpGRVlRWGlvOTNrZ1huUTA5ZlhOaVVLc3F2NE9VRXUyVXRHY0IxRT1cbmdpdGh1Yi5jb20vbGliL3BxIHYxLjEwLjAvZ28ubW9kIGgxOkFsVk41eDRFNFQ1NDR0V3pINmhLZmJmUXZtM0hkYk94cm1nZ0ROQVBZOW89XG4uLi5cblBhdGg6IFJFQURNRS5tZFxuIyBncmVlbmxpZ2h0XG4uLi5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMU5OOEhpa3h6V3BoOGttVmp4WnB0enkifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvb3Nib3JuZS9Eb3dubG9hZHMvdGVjaC1sZWFybmluZ3MvZ3JlZW5saWdodCIsImZvbGRlclJvb3QiOiIvVXNlcnMvb3Nib3JuZS9Eb3dubG9hZHMvdGVjaC1sZWFybmluZ3MvZ3JlZW5saWdodCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDhUMjA6MTg6MDYuNjg2WiIsInJlc3BvbnNlX3RleHQiOiJMZXQgbWUgY2hlY2sgaWYgdGhlcmUncyBhIGBGaWx0ZXJzYCBzdHJ1Y3Qgb3IgdHlwZSBpbiB0aGUgY29kZWJhc2U6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNjM3ZTQ5ZjAtMWUzMS00NTI0LTllZWItN2UxNTZjYzY0ODNjIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxUzJ0RlRwWW9mVWNueDlGNlhRRWQ2QSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJpbnRlcm5hbC9kYXRhL2ZpbHRlcnMuZ29cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQgbWUgY2hlY2sgdGhlIGNvbnRlbnQgb2YgdGhlIGBmaWx0ZXJzLmdvYCBmaWxlOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogaW50ZXJuYWwvZGF0YS9maWx0ZXJzLmdvXG5wYWNrYWdlIGRhdGFcbi4uLlxuUGF0aDogaW50ZXJuYWwvZGF0YS9tb3ZpZXMuZ29cbnBhY2thZ2UgZGF0YVxuXG5pbXBvcnQgKFxuXHRcImNvbnRleHRcIlxuXHRcImRhdGFiYXNlL3NxbFwiXG5cdFwiZXJyb3JzXCJcblx0XCJnaXRodWIuY29tL2xpYi9wcVwiXG5cdFwidGltZVwiXG5cblx0XCJncmVlbmxpZ2h0LnR1bmRlb3Nib3JuZS9pbnRlcm5hbC92YWxpZGF0b3JcIlxuKVxuXG50eXBlIE1vdmllIHN0cnVjdCB7XG5cdElEICAgICAgICBpbnQ2NCAgICAgYGpzb246XCJpZFwiYFxuXHRDcmVhdGVkQXQgdGltZS5UaW1lIGBqc29uOlwiLVwiYFxuXHRUaXRsZSAgICAgc3RyaW5nICAgIGBqc29uOlwidGl0bGVcImBcblx0WWVhciAgICAgIGludDMyICAgICBganNvbjpcInllYXIsb21pdGVtcHR5XCJgXG5cdFJ1bnRpbWUgICBSdW50aW1lICAgYGpzb246XCJydW50aW1lLG9taXRlbXB0eVwiYFxuXHRHZW5yZXMgICAgW11zdHJpbmcgIGBqc29uOlwiZ2VucmVzLG9taXRlbXB0eVwiYFxuXHRWZXJzaW9uICAgaW50MzIgICAgIGBqc29uOlwidmVyc2lvblwiYFxufVxuXG5mdW5jIFZhbGlkYXRlTW92aWUodiAqdmFsaWRhdG9yLlZhbGlkYXRvciwgbW92aWUgKk1vdmllKSB7XG5cdHYuQ2hlY2sobW92aWUuVGl0bGUgIT0gXCJcIiwgXCJ0aXRsZVwiLCBcIm11c3QgYmUgcHJvdmlkZWRcIilcblx0di5DaGVjayhsZW4obW92aWUuVGl0bGUpIDw9IDUwMCwgXCJ0aXRsZVwiLCBcIm11c3Qgbm90IGJlIG1vcmUgdGhhbiA1MDAgYnl0ZXMgbG9uZ1wiKVxuXHR2LkNoZWNrKG1vdmllLlllYXIgPj0gMTg4OCwgXCJ5ZWFyXCIsIFwibXVzdCBiZSBncmVhdGVyIHRoYW4gMTg4OFwiKVxuXHR2LkNoZWNrKG1vdmllLlllYXIgPD0gaW50MzIodGltZS5Ob3coKS5ZZWFyKCkpLCBcInllYXJcIiwgXCJtdXN0IG5vdCBiZSBpbiB0aGUgZnV0dXJlXCIpXG5cdHYuQ2hlY2sobW92aWUuUnVudGltZSAhPSAwLCBcInJ1bnRpbWVcIiwgXCJtdXN0IGJlIHByb3ZpZGVkXCIpXG5cdHYuQ2hlY2sobW92aWUuUnVudGltZSA+IDAsIFwicnVudGltZVwiLCBcIm11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyXCIpXG5cblx0di5DaGVjayhtb3ZpZS5HZW5yZXMgIT0gbmlsLCBcImdlbnJlc1wiLCBcIm11c3QgYmUgcHJvdmlkZWRcIilcblx0di5DaGVjayhsZW4obW92aWUuR2VucmVzKSA+PSAxLCBcImdlbnJlc1wiLCBcIm11c3QgY29udGFpbiBhdCBsZWFzdCAxIGdlbnJlXCIpXG5cdHYuQ2hlY2sobGVuKG1vdmllLkdlbnJlcykgPD0gNSwgXCJnZW5yZXNcIiwgXCJtdXN0IG5vdCBjb250YWluIG1vcmUgdGhhbiA1IGdlbnJlc1wiKVxuXG5cdHYuQ2hlY2sodmFsaWRhdG9yLlVuaXF1ZShtb3ZpZS5HZW5yZXMpLCBcImdlbnJlc1wiLCBcIm11c3Qgbm90IGNvbnRhaW4gZHVwbGljYXRlIHZhbHVlc1wiKVxufVxuXG50eXBlIE1vdmllTW9kZWwgc3RydWN0IHtcblx0REIgKnNxbC5EQlxufVxuXG5mdW5jIChtIE1vdmllTW9kZWwpIEluc2VydChtb3ZpZSAqTW92aWUpIGVycm9yIHtcblx0cXVlcnkgOj0gYElOU0VSVCBJTlRPIG1vdmllcyAodGl0bGUsIHllYXIsIHJ1bnRpbWUsIGdlbnJlcylcbiAgICAgICAgICAgICAgIFZBTFVFUyAoJDEsICQyLCAkMywgJDQpXG4gICAgICAgICAgICAgICBSRVRVUk5JTkcgaWQsIGNyZWF0ZWRfYXQsIHZlcnNpb25gXG5cblx0YXJncyA6PSBbXWludGVyZmFjZXt9e21vdmllLlRpdGxlLCBtb3ZpZS5ZZWFyLCBtb3ZpZS5SdW50aW1lLCBwcS5BcnJheShtb3ZpZS5HZW5yZXMpfVxuXG5cdGN0eCwgY2FuY2VsIDo9IGNvbnRleHQuV2l0aFRpbWVvdXQoY29udGV4dC5CYWNrZ3JvdW5kKCksIDMqdGltZS5TZWNvbmQpXG5cdGRlZmVyIGNhbmNlbCgpXG5cblx0cmV0dXJuIG0uREIuUXVlcnlSb3dDb250ZXh0KGN0eCwgcXVlcnksIGFyZ3MuLi4pLlNjYW4oJm1vdmllLklELCAmbW92aWUuQ3JlYXRlZEF0LCAmbW92aWUuVmVyc2lvbilcbn1cblxuZnVuYyAobSBNb3ZpZU1vZGVsKSBHZXQoaWQgaW50NjQpICgqTW92aWUsIGVycm9yKSB7XG5cdGlmIGlkIDwgMSB7XG5cdFx0cmV0dXJuIG5pbCwgRXJyUmVjb3JkTm90Rm91bmRcblx0fVxuXG5cdHF1ZXJ5IDo9IGBTRUxFQ1QgaWQsIGNyZWF0ZWRfYXQsIHRpdGxlLCB5ZWFyLCBydW50aW1lLCBnZW5yZXMsIHZlcnNpb24gRlJPTSBtb3ZpZXMgV0hFUkUgaWQgPSAkMWBcblxuXHR2YXIgbW92aWUgTW92aWVcblxuXHRjdHgsIGNhbmNlbCA6PSBjb250ZXh0LldpdGhUaW1lb3V0KGNvbnRleHQuQmFja2dyb3VuZCgpLCAzKnRpbWUuU2Vjb25kKVxuXG5cdGRlZmVyIGNhbmNlbCgpXG5cblx0ZXJyIDo9XG5cdFx0bS5EQi5RdWVyeVJvd0NvbnRleHQoY3R4LCBxdWVyeSwgaWQpLlNjYW4oJm1vdmllLklELCAmbW92aWUuQ3JlYXRlZEF0LCAmbW92aWUuVGl0bGUsICZtb3ZpZS5ZZWFyLCAmbW92aWUuUnVudGltZSwgcHEuQXJyYXkoJm1vdmllLkdlbnJlcyksICZtb3ZpZS5WZXJzaW9uKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRzd2l0Y2gge1xuXHRcdGNhc2UgZXJyb3JzLklzKGVyciwgc3FsLkVyck5vUm93cyk6XG5cdFx0XHRyZXR1cm4gbmlsLCBFcnJSZWNvcmROb3RGb3VuZFxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRyZXR1cm4gbmlsLCBlcnJcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gJm1vdmllLCBuaWxcbn1cblxuZnVuYyAobSBNb3ZpZU1vZGVsKSBVcGRhdGUobW92aWUgKk1vdmllKSBlcnJvciB7XG5cdHF1ZXJ5IDo9IGBVUERBVEUgbW92aWVzXG4gU0VUIHRpdGxlID0gJDEsIHllYXIgPSAkMiwgcnVudGltZSA9ICQzLCBnZW5yZXMgPSAkNCwgdmVyc2lvbiA9IHZlcnNpb24gKyAxIFdIRVJFICBpZCA9ICQ1IEFORCB2ZXJzaW9uID0gJDZcbiBSRVRVUk5JTkcgdmVyc2lvbmBcblxuXHRhcmdzIDo9IFtdaW50ZXJmYWNle317XG5cdFx0bW92aWUuVGl0bGUsXG5cdFx0bW92aWUuWWVhcixcblx0XHRtb3ZpZS5SdW50aW1lLFxuXHRcdHBxLkFycmF5KG1vdmllLkdlbnJlcyksXG5cdFx0bW92aWUuSUQsXG5cdFx0bW92aWUuVmVyc2lvbixcblx0fVxuXG5cdGN0eCwgY2FuY2VsIDo9IGNvbnRleHQuV2l0aFRpbWVvdXQoY29udGV4dC5CYWNrZ3JvdW5kKCksIDMqdGltZS5TZWNvbmQpXG5cdGRlZmVyIGNhbmNlbCgpXG5cblx0ZXJyIDo9IG0uREIuUXVlcnlSb3dDb250ZXh0KGN0eCwgcXVlcnksIGFyZ3MuLi4pLlNjYW4oJm1vdmllLlZlcnNpb24pXG5cblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIHNxbC5FcnJOb1Jvd3MpOlxuXHRcdFx0cmV0dXJuIEVyckVkaXRDb25mbGljdFxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRyZXR1cm4gZXJyXG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG5pbFxufVxuXG5mdW5jIChtIE1vdmllTW9kZWwpIERlbGV0ZShpZCBpbnQ2NCkgZXJyb3Ige1xuXHRpZiBpZCA8IDEge1xuXHRcdHJldHVybiBFcnJSZWNvcmROb3RGb3VuZFxuXHR9XG5cblx0cXVlcnkgOj0gYERFTEVURSBGUk9NIG1vdmllcyBXSEVSRSBpZCA9ICQxYFxuXG5cdGN0eCwgY2FuY2VsIDo9IGNvbnRleHQuV2l0aFRpbWVvdXQoY29udGV4dC5CYWNrZ3JvdW5kKCksIDMqdGltZS5TZWNvbmQpXG5cdGRlZmVyIGNhbmNlbCgpXG5cblx0cmVzdWx0LCBlcnIgOj0gbS5EQi5FeGVjQ29udGV4dChjdHgsIHF1ZXJ5LCBpZClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0cmV0dXJuIGVyclxuXHR9XG5cdHJvd3NBZmZlY3RlZCwgZXJyIDo9IHJlc3VsdC5Sb3dzQWZmZWN0ZWQoKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gZXJyXG5cdH1cblxuXHRpZiByb3dzQWZmZWN0ZWQgPT0gMCB7XG5cdFx0cmV0dXJuIEVyclJlY29yZE5vdEZvdW5kXG5cdH1cblxuXHRyZXR1cm4gbmlsXG59XG4uLi5cblBhdGg6IGludGVybmFsL2RhdGEvbW9kZWxzLmdvXG5wYWNrYWdlIGRhdGFcblxuaW1wb3J0IChcblx0XCJkYXRhYmFzZS9zcWxcIlxuXHRcImVycm9yc1wiXG4pXG5cbnZhciAoXG5cdEVyclJlY29yZE5vdEZvdW5kID0gZXJyb3JzLk5ldyhcInJlY29yZCBub3QgZm91bmRcIilcblx0RXJyRWRpdENvbmZsaWN0ICAgPSBlcnJvcnMuTmV3KFwiZWRpdCBjb25mbGljdFwiKVxuKVxuXG50eXBlIE1vZGVscyBzdHJ1Y3Qge1xuXHRNb3ZpZXMgTW92aWVNb2RlbFxufVxuXG5mdW5jIE5ld01vZGVscyhkYiAqc3FsLkRCKSBNb2RlbHMge1xuXHRyZXR1cm4gTW9kZWxze1xuXHRcdE1vdmllczogTW92aWVNb2RlbHtEQjogZGJ9LFxuXHR9XG59XG4uLi5cblBhdGg6IGludGVybmFsL2RhdGEvcnVudGltZS5nb1xucGFja2FnZSBkYXRhXG5cbmltcG9ydCAoXG5cdFwiZXJyb3JzXCJcblx0XCJmbXRcIlxuXHRcInN0cmNvbnZcIlxuXHRcInN0cmluZ3NcIlxuKVxuXG52YXIgRXJySW52YWxpZFJ1bnRpbWVGb3JtYXQgPSBlcnJvcnMuTmV3KFwiaW52YWxpZCBydW50aW1lIGZvcm1hdFwiKVxuXG50eXBlIFJ1bnRpbWUgaW50MzJcblxuZnVuYyAociBSdW50aW1lKSBNYXJzaGFsSlNPTigpIChbXWJ5dGUsIGVycm9yKSB7XG5cdGpzb25WYWx1ZSA6PSBmbXQuU3ByaW50ZihcIiVkIG1pbnNcIiwgcilcblxuXHRxdW90ZWRKU09OVmFsdWUgOj0gc3RyY29udi5RdW90ZShqc29uVmFsdWUpXG5cblx0cmV0dXJuIFtdYnl0ZShxdW90ZWRKU09OVmFsdWUpLCBuaWxcbn1cblxuZnVuYyAociAqUnVudGltZSkgVW5tYXJzaGFsSlNPTihqc29uVmFsdWUgW11ieXRlKSBlcnJvciB7XG5cblx0dW5xdW90ZWRKU09OVmFsdWUsIGVyciA6PSBzdHJjb252LlVucXVvdGUoc3RyaW5nKGpzb25WYWx1ZSkpXG5cblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0cmV0dXJuIEVyckludmFsaWRSdW50aW1lRm9ybWF0XG5cdH1cblxuXHRwYXJ0cyA6PSBzdHJpbmdzLlNwbGl0KHVucXVvdGVkSlNPTlZhbHVlLCBcIiBcIilcblxuXHRpZiBsZW4ocGFydHMpICE9IDIgfHwgcGFydHNbMV0gIT0gXCJtaW5zXCIge1xuXHRcdHJldHVybiBFcnJJbnZhbGlkUnVudGltZUZvcm1hdFxuXHR9XG5cblx0aSwgZXJyIDo9IHN0cmNvbnYuUGFyc2VJbnQocGFydHNbMF0sIDEwLCAzMilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0cmV0dXJuIEVyckludmFsaWRSdW50aW1lRm9ybWF0XG5cdH1cblxuXHQqciA9IFJ1bnRpbWUoaSlcblxuXHRyZXR1cm4gbmlsXG59XG4uLi5cblBhdGg6IGNtZC9hcGkvbW92aWVzLmdvXG5wYWNrYWdlIG1haW5cblxuaW1wb3J0IChcblx0XCJlcnJvcnNcIlxuXHRcImZtdFwiXG5cdFwiZ3JlZW5saWdodC50dW5kZW9zYm9ybmUvaW50ZXJuYWwvZGF0YVwiXG5cdFwiZ3JlZW5saWdodC50dW5kZW9zYm9ybmUvaW50ZXJuYWwvdmFsaWRhdG9yXCJcblx0XCJuZXQvaHR0cFwiXG4pXG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIGNyZWF0ZU1vdmllSGFuZGxlcih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkge1xuXG5cdHZhciBpbnB1dCBzdHJ1Y3Qge1xuXHRcdFRpdGxlICAgc3RyaW5nICAgICAgIGBqc29uOlwidGl0bGVcImBcblx0XHRZZWFyICAgIGludDMyICAgICAgICBganNvbjpcInllYXJcImBcblx0XHRSdW50aW1lIGRhdGEuUnVudGltZSBganNvbjpcInJ1bnRpbWVcImBcblx0XHRHZW5yZXMgIFtdc3RyaW5nICAgICBganNvbjpcImdlbnJlc1wiYFxuXHR9XG5cblx0ZXJyIDo9IGFwcC5yZWFkSlNPTih3LCByLCAmaW5wdXQpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5iYWRSZXF1ZXN0UmVzcG9uc2UodywgciwgZXJyKVxuXHRcdHJldHVyblxuXHR9XG5cblx0bW92aWUgOj0gJmRhdGEuTW92aWV7XG5cdFx0VGl0bGU6ICAgaW5wdXQuVGl0bGUsXG5cdFx0WWVhcjogICAgaW5wdXQuWWVhcixcblx0XHRSdW50aW1lOiBpbnB1dC5SdW50aW1lLFxuXHRcdEdlbnJlczogIGlucHV0LkdlbnJlcyxcblx0fVxuXG5cdHYgOj0gdmFsaWRhdG9yLk5ldygpXG5cblx0aWYgZGF0YS5WYWxpZGF0ZU1vdmllKHYsIG1vdmllKTsgIXYuVmFsaWQoKSB7XG5cdFx0YXBwLmZhaWxlZFZhbGlkYXRpb25SZXNwb25zZSh3LCByLCB2LkVycm9ycylcblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC5tb2RlbHMuTW92aWVzLkluc2VydChtb3ZpZSlcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdHJldHVyblxuXHR9XG5cblx0aGVhZGVycyA6PSBtYWtlKGh0dHAuSGVhZGVyKVxuXHRoZWFkZXJzLlNldChcIkxvY2F0aW9uXCIsIGZtdC5TcHJpbnRmKFwiL3YxL21vdmllcy8lZFwiLCBtb3ZpZS5JRCkpXG5cblx0ZXJyID0gYXBwLndyaXRlSlNPTih3LCBodHRwLlN0YXR1c0NyZWF0ZWQsIGVudmVsb3Ble1wibW92aWVcIjogbW92aWV9LCBoZWFkZXJzKVxuXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0fVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBzaG93TW92aWVIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cblx0aWQsIGVyciA6PSBhcHAucmVhZElEUGFyYW0ocilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRyZXR1cm5cblx0fVxuXG5cdG1vdmllLCBlcnIgOj0gYXBwLm1vZGVscy5Nb3ZpZXMuR2V0KGlkKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRzd2l0Y2gge1xuXHRcdGNhc2UgZXJyb3JzLklzKGVyciwgZGF0YS5FcnJSZWNvcmROb3RGb3VuZCk6XG5cdFx0XHRhcHAubm90Rm91bmRSZXNwb25zZSh3LCByKVxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdFx0fVxuXHRcdHJldHVyblxuXHR9XG5cblx0ZXJyID0gYXBwLndyaXRlSlNPTih3LCBodHRwLlN0YXR1c09LLCBlbnZlbG9wZXtcIm1vdmllXCI6IG1vdmllfSwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdH1cblxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSB1cGRhdGVNb3ZpZUhhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblx0aWQsIGVyciA6PSBhcHAucmVhZElEUGFyYW0ocilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRyZXR1cm5cblx0fVxuXG5cdG1vdmllLCBlcnIgOj0gYXBwLm1vZGVscy5Nb3ZpZXMuR2V0KGlkKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRzd2l0Y2gge1xuXHRcdGNhc2UgZXJyb3JzLklzKGVyciwgZGF0YS5FcnJSZWNvcmROb3RGb3VuZCk6XG5cdFx0XHRhcHAubm90Rm91bmRSZXNwb25zZSh3LCByKVxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdFx0fVxuXHRcdHJldHVyblxuXHR9XG5cblx0dmFyIGlucHV0IHN0cnVjdCB7XG5cdFx0VGl0bGUgICAqc3RyaW5nICAgICAgIGBqc29uOlwidGl0bGVcImBcblx0XHRZZWFyICAgICppbnQzMiAgICAgICAgYGpzb246XCJ5ZWFyXCJgXG5cdFx0UnVudGltZSAqZGF0YS5SdW50aW1lIGBqc29uOlwicnVudGltZVwiYFxuXHRcdEdlbnJlcyAgW11zdHJpbmcgICAgICBganNvbjpcImdlbnJlc1wiYFxuXHR9XG5cblx0ZXJyID0gYXBwLnJlYWRKU09OKHcsIHIsICZpbnB1dClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLmJhZFJlcXVlc3RSZXNwb25zZSh3LCByLCBlcnIpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRpZiBpbnB1dC5UaXRsZSAhPSBuaWwge1xuXHRcdG1vdmllLlRpdGxlID0gKmlucHV0LlRpdGxlXG5cdH1cblx0aWYgaW5wdXQuWWVhciAhPSBuaWwge1xuXHRcdG1vdmllLlllYXIgPSAqaW5wdXQuWWVhclxuXHR9XG5cdGlmIGlucHV0LlJ1bnRpbWUgIT0gbmlsIHtcblx0XHRtb3ZpZS5SdW50aW1lID0gKmlucHV0LlJ1bnRpbWVcblx0fVxuXHRpZiBpbnB1dC5HZW5yZXMgIT0gbmlsIHtcblx0XHRtb3ZpZS5HZW5yZXMgPSBpbnB1dC5HZW5yZXNcblx0fVxuXG5cdHYgOj0gdmFsaWRhdG9yLk5ldygpXG5cblx0aWYgZGF0YS5WYWxpZGF0ZU1vdmllKHYsIG1vdmllKTsgIXYuVmFsaWQoKSB7XG5cdFx0YXBwLmZhaWxlZFZhbGlkYXRpb25SZXNwb25zZSh3LCByLCB2LkVycm9ycylcblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC5tb2RlbHMuTW92aWVzLlVwZGF0ZShtb3ZpZSlcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdHJldHVyblxuXHR9XG5cblx0ZXJyID0gYXBwLndyaXRlSlNPTih3LCBodHRwLlN0YXR1c09LLCBlbnZlbG9wZXtcIm1vdmllXCI6IG1vdmllfSwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdH1cblxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBkZWxldGVNb3ZpZUhhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblx0aWQsIGVyciA6PSBhcHAucmVhZElEUGFyYW0ocilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC5tb2RlbHMuTW92aWVzLkRlbGV0ZShpZClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIGRhdGEuRXJyUmVjb3JkTm90Rm91bmQpOlxuXHRcdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRkZWZhdWx0OlxuXHRcdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdH1cblx0XHRyZXR1cm5cblx0fVxuXHRlcnIgPSBhcHAud3JpdGVKU09OKHcsIGh0dHAuU3RhdHVzT0ssIGVudmVsb3Ble1wibWVzc2FnZVwiOiBcIm1vdmllIHN1Y2Nlc3NmdWxseSBkZWxldGVkXCJ9LCBuaWwpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0fVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBsaXN0TW92aWVzSGFuZGxlcih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkge1xuXHR2YXIgaW5wdXQgc3RydWN0IHtcblx0XHRUaXRsZSAgc3RyaW5nXG5cdFx0R2VucmVzIFtdc3RyaW5nXG5cdFx0ZGF0YS5GaWx0ZXJzXG5cdH1cblxuXHR2IDo9IHZhbGlkYXRvci5OZXcoKVxuXG5cdHFzIDo9IHIuVVJMLlF1ZXJ5KClcblx0aW5wdXQuVGl0bGUgPSBhcHAucmVhZFN0cmluZyhxcywgXCJ0aXRsZVwiLCBcIlwiKVxuXHRpbnB1dC5HZW5yZXMgPSBhcHAucmVhZENTVihxcywgXCJnZW5yZXNcIiwgW11zdHJpbmd7fSlcblx0aW5wdXQuRmlsdGVycy5QYWdlID0gYXBwLnJlYWRJbnQocXMsIFwicGFnZVwiLCAxLCB2KVxuXHRpbnB1dC5GaWx0ZXJzLlBhZ2VTaXplID0gYXBwLnJlYWRJbnQocXMsIFwicGFnZV9zaXplXCIsIDIwLCB2KVxuXHRpbnB1dC5GaWx0ZXJzLlNvcnQgPSBhcHAucmVhZFN0cmluZyhxcywgXCJzb3J0XCIsIFwiaWRcIilcblxuXHRpbnB1dC5GaWx0ZXJzLlNvcnRTYWZlbGlzdCA9IFtdc3RyaW5ne1wiaWRcIiwgXCJ0aXRsZVwiLCBcInllYXJcIiwgXCJydW50aW1lXCIsIFwiLWlkXCIsIFwiLXRpdGxlXCIsIFwiLXllYXJcIiwgXCItcnVudGltZVwifVxuXG5cdGlmIGRhdGEuVmFsaWRhdGVGaWx0ZXJzKHYsIGlucHV0LkZpbHRlcnMpOyAhdi5WYWxpZCgpIHtcblx0XHRhcHAuZmFpbGVkVmFsaWRhdGlvblJlc3BvbnNlKHcsIHIsIHYuRXJyb3JzKVxuXHRcdHJldHVyblxuXHR9XG5cblx0Zm10LkZwcmludGYodywgXCIlK3ZcXG5cIiwgaW5wdXQpXG59XG4uLi5cblBhdGg6IGludGVybmFsL3ZhbGlkYXRvci92YWxpZGF0b3IuZ29cbnBhY2thZ2UgdmFsaWRhdG9yXG5cbmltcG9ydCAoXG5cdFwicmVnZXhwXCJcblx0XCJzbGljZXNcIlxuKVxuXG52YXIgKFxuXHRFbWFpbFJYID0gcmVnZXhwLk11c3RDb21waWxlKFwiXlthLXpBLVowLTkuISMkJSYnKitcXFxcLz0/Xl9ge3x9fi1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXFxcLlthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqJFwiKVxuKVxuXG50eXBlIFZhbGlkYXRvciBzdHJ1Y3Qge1xuXHRFcnJvcnMgbWFwW3N0cmluZ11zdHJpbmdcbn1cblxuZnVuYyBOZXcoKSAqVmFsaWRhdG9yIHtcblx0cmV0dXJuICZWYWxpZGF0b3J7RXJyb3JzOiBtYWtlKG1hcFtzdHJpbmddc3RyaW5nKX1cbn1cblxuZnVuYyAodiAqVmFsaWRhdG9yKSBWYWxpZCgpIGJvb2wge1xuXHRyZXR1cm4gbGVuKHYuRXJyb3JzKSA9PSAwXG59XG5cbmZ1bmMgKHYgKlZhbGlkYXRvcikgQWRkRXJyb3Ioa2V5LCBtZXNzYWdlIHN0cmluZykge1xuXHRpZiBfLCBleGlzdHMgOj0gdi5FcnJvcnNba2V5XTsgIWV4aXN0cyB7XG5cdFx0di5FcnJvcnNba2V5XSA9IG1lc3NhZ2Vcblx0fVxufVxuXG5mdW5jICh2ICpWYWxpZGF0b3IpIENoZWNrKG9rIGJvb2wsIGtleSwgbWVzc2FnZSBzdHJpbmcpIHtcblx0aWYgIW9rIHtcblx0XHR2LkFkZEVycm9yKGtleSwgbWVzc2FnZSlcblx0fVxufVxuXG5mdW5jIEluKHZhbHVlIHN0cmluZywgbGlzdCAuLi5zdHJpbmcpIGJvb2wge1xuXHRyZXR1cm4gc2xpY2VzLkNvbnRhaW5zKGxpc3QsIHZhbHVlKVxufVxuXG5mdW5jIE1hdGNoZXModmFsdWUgc3RyaW5nLCByeCAqcmVnZXhwLlJlZ2V4cCkgYm9vbCB7XG5cdHJldHVybiByeC5NYXRjaFN0cmluZyh2YWx1ZSlcbn1cblxuZnVuYyBVbmlxdWUodmFsdWVzIFtdc3RyaW5nKSBib29sIHtcblx0dW5pcXVlVmFsdWVzIDo9IG1ha2UobWFwW3N0cmluZ11ib29sKVxuXG5cdGZvciBfLCB2YWx1ZSA6PSByYW5nZSB2YWx1ZXMge1xuXHRcdHVuaXF1ZVZhbHVlc1t2YWx1ZV0gPSB0cnVlXG5cdH1cblxuXHRyZXR1cm4gbGVuKHZhbHVlcykgPT0gbGVuKHVuaXF1ZVZhbHVlcylcbn1cbi4uLlxuUGF0aDogbWlncmF0aW9ucy8wMDAwMDFfY3JlYXRlX21vdmllc190YWJsZS51cC5zcWxcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG1vdmllcyAoXG4gICAgaWQgYmlnc2VyaWFsIFBSSU1BUlkgS0VZLFxuICAgIGNyZWF0ZWRfYXQgdGltZXN0YW1wKDApIHdpdGggdGltZSB6b25lIE5PVCBOVUxMIERFRkFVTFQgTk9XKCksXG4gICAgdGl0bGUgdGV4dCBOT1QgTlVMTCxcbiAgICB5ZWFyIGludGVnZXIgTk9UIE5VTEwsXG4gICAgcnVudGltZSBpbnRlZ2VyIE5PVCBOVUxMLFxuICAgIGdlbnJlcyB0ZXh0W10gTk9UIE5VTEwsXG4gICAgdmVyc2lvbiBpbnRlZ2VyIE5PVCBOVUxMIERFRkFVTFQgMVxuKTtcbi4uLlxuUGF0aDogY21kL2FwaS9tYWluLmdvXG5wYWNrYWdlIG1haW5cblxuaW1wb3J0IChcblx0XCJjb250ZXh0XCJcblx0XCJkYXRhYmFzZS9zcWxcIlxuXHRcImZsYWdcIlxuXHRcImZtdFwiXG5cdFwiZ3JlZW5saWdodC50dW5kZW9zYm9ybmUvaW50ZXJuYWwvZGF0YVwiXG5cdFwibG9nXCJcblx0XCJuZXQvaHR0cFwiXG5cdFwib3NcIlxuXHRcInRpbWVcIlxuXG5cdF8gXCJnaXRodWIuY29tL2xpYi9wcVwiXG4pXG5cbmNvbnN0IHZlcnNpb24gPSBcIjEuMC4wXCJcblxudHlwZSBjb25maWcgc3RydWN0IHtcblx0cG9ydCBpbnRcblx0ZW52ICBzdHJpbmdcblx0ZGIgICBzdHJ1Y3Qge1xuXHRcdGRzbiAgICAgICAgICBzdHJpbmdcblx0XHRtYXhPcGVuQ29ubnMgaW50XG5cdFx0bWF4SWRsZUNvbm5zIGludFxuXHRcdG1heElkbGVUaW1lICBzdHJpbmdcblx0fVxufVxuXG50eXBlIGFwcGxpY2F0aW9uIHN0cnVjdCB7XG5cdGNvbmZpZyBjb25maWdcblx0bG9nZ2VyICpsb2cuTG9nZ2VyXG5cdG1vZGVscyBkYXRhLk1vZGVsc1xufVxuXG5mdW5jIG1haW4oKSB7XG5cblx0dmFyIGNmZyBjb25maWdcblxuXHRmbGFnLkludFZhcigmY2ZnLnBvcnQsIFwicG9ydFwiLCA0MDAwLCBcIkFQSSBzZXJ2ZXIgcG9ydFwiKVxuXHRmbGFnLlN0cmluZ1ZhcigmY2ZnLmVudiwgXCJlbnZcIiwgXCJkZXZlbG9wbWVudFwiLCBcIkVudmlyb25tZW50IChkZXZlbG9wbWVudHxzdGFnaW5nfHByb2R1Y3Rpb24pXCIpXG5cblx0ZmxhZy5TdHJpbmdWYXIoJmNmZy5kYi5kc24sIFwiZGItZHNuXCIsIG9zLkdldGVudihcIkdSRUVOTElHSFRfREJfRFNOXCIpLCBcIlBvc3RncmVTUUwgRFNOXCIpXG5cblx0ZmxhZy5JbnRWYXIoJmNmZy5kYi5tYXhPcGVuQ29ubnMsIFwiZGItbWF4LW9wZW4tY29ubnNcIiwgMjUsIFwiUG9zdGdyZVNRTCBtYXggb3BlbiBjb25uZWN0aW9uc1wiKVxuXG5cdGZsYWcuSW50VmFyKCZjZmcuZGIubWF4SWRsZUNvbm5zLCBcImRiLW1heC1pZGxlLWNvbm5zXCIsIDI1LCBcIlBvc3RncmVTUUwgbWF4IGlkbGUgY29ubmVjdGlvbnNcIilcblxuXHRmbGFnLlN0cmluZ1ZhcigmY2ZnLmRiLm1heElkbGVUaW1lLCBcImRiLW1heC1pZGxlLXRpbWVcIiwgXCIxNW1cIiwgXCJQb3N0Z3JlU1FMIG1heCBjb25uZWN0aW9uIGlkbGUgdGltZVwiKVxuXHRmbGFnLlBhcnNlKClcblxuXHRsb2dnZXIgOj0gbG9nLk5ldyhvcy5TdGRvdXQsIFwiXCIsIGxvZy5MZGF0ZXxsb2cuTHRpbWUpXG5cblx0ZGIsIGVyciA6PSBvcGVuREIoY2ZnKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRsb2dnZXIuRmF0YWwoZXJyKVxuXHR9XG5cblx0ZGVmZXIgZGIuQ2xvc2UoKVxuXG5cdGxvZ2dlci5QcmludGYoXCJkYXRhYmFzZSBjb25uZWN0aW9uIHBvb2wgZXN0YWJsaXNoZWRcIilcblxuXHRhcHAgOj0gJmFwcGxpY2F0aW9ue1xuXHRcdGNvbmZpZzogY2ZnLFxuXHRcdGxvZ2dlcjogbG9nZ2VyLFxuXHRcdG1vZGVsczogZGF0YS5OZXdNb2RlbHMoZGIpLFxuXHR9XG5cblx0c3J2IDo9ICZodHRwLlNlcnZlcntcblx0XHRBZGRyOiAgICAgICAgIGZtdC5TcHJpbnRmKFwiOiVkXCIsIGNmZy5wb3J0KSxcblx0XHRIYW5kbGVyOiAgICAgIGFwcC5yb3V0ZXMoKSxcblx0XHRJZGxlVGltZW91dDogIHRpbWUuTWludXRlLFxuXHRcdFJlYWRUaW1lb3V0OiAgMTAgKiB0aW1lLlNlY29uZCxcblx0XHRXcml0ZVRpbWVvdXQ6IDMwICogdGltZS5TZWNvbmQsXG5cdH1cblxuXHRsb2dnZXIuUHJpbnRmKFwic3RhcnRpbmcgJXMgc2VydmVyIG9uICVzXCIsIGNmZy5lbnYsIHNydi5BZGRyKVxuXHRlcnIgPSBzcnYuTGlzdGVuQW5kU2VydmUoKVxuXHRsb2dnZXIuRmF0YWwoZXJyKVxufVxuXG5mdW5jIG9wZW5EQihjZmcgY29uZmlnKSAoKnNxbC5EQiwgZXJyb3IpIHtcblxuXHRkYiwgZXJyIDo9IHNxbC5PcGVuKFwicG9zdGdyZXNcIiwgY2ZnLmRiLmRzbilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0cmV0dXJuIG5pbCwgZXJyXG5cdH1cblxuXHRkYi5TZXRNYXhPcGVuQ29ubnMoY2ZnLmRiLm1heE9wZW5Db25ucylcblxuXHRkYi5TZXRNYXhJZGxlQ29ubnMoY2ZnLmRiLm1heElkbGVDb25ucylcblxuXHRkdXJhdGlvbiwgZXJyIDo9IHRpbWUuUGFyc2VEdXJhdGlvbihjZmcuZGIubWF4SWRsZVRpbWUpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBuaWwsIGVyclxuXHR9XG5cdGRiLlNldENvbm5NYXhJZGxlVGltZShkdXJhdGlvbilcblxuXHRjdHgsIGNhbmNlbCA6PSBjb250ZXh0LldpdGhUaW1lb3V0KGNvbnRleHQuQmFja2dyb3VuZCgpLCA1KnRpbWUuU2Vjb25kKVxuXHRkZWZlciBjYW5jZWwoKVxuXG5cdGVyciA9IGRiLlBpbmdDb250ZXh0KGN0eClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0cmV0dXJuIG5pbCwgZXJyXG5cdH1cblxuXHRyZXR1cm4gZGIsIG5pbFxufVxuLi4uXG5QYXRoOiBjbWQvYXBpL2hlbHBlcnMuZ29cbnBhY2thZ2UgbWFpblxuXG5pbXBvcnQgKFxuXHRcImVuY29kaW5nL2pzb25cIlxuXHRcImVycm9yc1wiXG5cdFwiZm10XCJcblx0XCJncmVlbmxpZ2h0LnR1bmRlb3Nib3JuZS9pbnRlcm5hbC92YWxpZGF0b3JcIlxuXHRcImlvXCJcblx0XCJuZXQvaHR0cFwiXG5cdFwibmV0L3VybFwiXG5cdFwic3RyY29udlwiXG5cdFwic3RyaW5nc1wiXG5cblx0XCJtYXBzXCJcblxuXHRcImdpdGh1Yi5jb20vanVsaWVuc2NobWlkdC9odHRwcm91dGVyXCJcbilcblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgcmVhZElEUGFyYW0ociAqaHR0cC5SZXF1ZXN0KSAoaW50NjQsIGVycm9yKSB7XG5cdHBhcmFtcyA6PSBodHRwcm91dGVyLlBhcmFtc0Zyb21Db250ZXh0KHIuQ29udGV4dCgpKVxuXG5cdGlkLCBlcnIgOj0gc3RyY29udi5QYXJzZUludChwYXJhbXMuQnlOYW1lKFwiaWRcIiksIDEwLCA2NClcblx0aWYgZXJyICE9IG5pbCB8fCBpZCA8IDEge1xuXHRcdHJldHVybiAwLCBlcnJvcnMuTmV3KFwiaW52YWxpZCBpZCBwYXJhbWV0ZXJcIilcblx0fVxuXHRyZXR1cm4gaWQsIG5pbFxufVxuXG50eXBlIGVudmVsb3BlIG1hcFtzdHJpbmddaW50ZXJmYWNle31cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgd3JpdGVKU09OKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgc3RhdHVzIGludCwgZGF0YSBlbnZlbG9wZSwgaGVhZGVycyBodHRwLkhlYWRlcikgZXJyb3Ige1xuXHRqcywgZXJyIDo9IGpzb24uTWFyc2hhbEluZGVudChkYXRhLCBcIlwiLCBcIlxcdFwiKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gZXJyXG5cdH1cblxuXHRqcyA9IGFwcGVuZChqcywgJ1xcbicpXG5cblx0bWFwcy5Db3B5KHcuSGVhZGVyKCksIGhlYWRlcnMpXG5cblx0dy5IZWFkZXIoKS5TZXQoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpXG5cdHcuV3JpdGVIZWFkZXIoc3RhdHVzKVxuXHR3LldyaXRlKGpzKVxuXHRyZXR1cm4gbmlsXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJlYWRKU09OKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBkc3QgaW50ZXJmYWNle30pIGVycm9yIHtcblxuXHRtYXhCeXRlcyA6PSAxXzA0OF81NzZcblx0ci5Cb2R5ID0gaHR0cC5NYXhCeXRlc1JlYWRlcih3LCByLkJvZHksIGludDY0KG1heEJ5dGVzKSlcblxuXHRkZWMgOj0ganNvbi5OZXdEZWNvZGVyKHIuQm9keSlcblx0ZGVjLkRpc2FsbG93VW5rbm93bkZpZWxkcygpXG5cblx0ZXJyIDo9IGRlYy5EZWNvZGUoZHN0KVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHR2YXIgc3ludGF4RXJyb3IgKmpzb24uU3ludGF4RXJyb3Jcblx0XHR2YXIgdW5tYXJzaGFsVHlwZUVycm9yICpqc29uLlVubWFyc2hhbFR5cGVFcnJvclxuXHRcdHZhciBpbnZhbGlkVW5tYXJzaGFsRXJyb3IgKmpzb24uSW52YWxpZFVubWFyc2hhbEVycm9yXG5cblx0XHRzd2l0Y2gge1xuXHRcdGNhc2UgZXJyb3JzLkFzKGVyciwgJnN5bnRheEVycm9yKTpcblx0XHRcdHJldHVybiBmbXQuRXJyb3JmKFwiYm9keSBjb250YWlucyBiYWRseS1mb3JtZWQgSlNPTiAoYXQgY2hhcmFjdGVyICVkKVwiLCBzeW50YXhFcnJvci5PZmZzZXQpXG5cblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIGlvLkVyclVuZXhwZWN0ZWRFT0YpOlxuXHRcdFx0cmV0dXJuIGVycm9ycy5OZXcoXCJib2R5IGNvbnRhaW5zIGJhZGx5LWZvcm1lZCBKU09OXCIpXG5cblx0XHRjYXNlIGVycm9ycy5BcyhlcnIsICZ1bm1hcnNoYWxUeXBlRXJyb3IpOlxuXHRcdFx0aWYgdW5tYXJzaGFsVHlwZUVycm9yLkZpZWxkICE9IFwiXCIge1xuXHRcdFx0XHRyZXR1cm4gZm10LkVycm9yZihcImJvZHkgY29udGFpbnMgaW5jb3JyZWN0IEpTT04gdHlwZSBmb3IgZmllbGQgJXFcIiwgdW5tYXJzaGFsVHlwZUVycm9yLkZpZWxkKVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZtdC5FcnJvcmYoXCJib2R5IGNvbnRhaW5zIGluY29ycmVjdCBKU09OIHR5cGUgKGF0IGNoYXJhY3RlciAlZClcIiwgdW5tYXJzaGFsVHlwZUVycm9yLk9mZnNldClcblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIGlvLkVPRik6XG5cdFx0XHRyZXR1cm4gZXJyb3JzLk5ldyhcImJvZHkgbXVzdCBub3QgYmUgZW1wdHlcIilcblxuXHRcdGNhc2Ugc3RyaW5ncy5IYXNQcmVmaXgoZXJyLkVycm9yKCksIFwianNvbjogdW5rbm93biBmaWVsZCBcIik6XG5cdFx0XHRmaWVsZE5hbWUgOj0gc3RyaW5ncy5UcmltUHJlZml4KGVyci5FcnJvcigpLCBcImpzb246IHVua25vd24gZmllbGRcIilcblxuXHRcdFx0cmV0dXJuIGZtdC5FcnJvcmYoXCJib2R5IGNvbnRhaW5zIHVua25vd24ga2V5ICVzXCIsIGZpZWxkTmFtZSlcblxuXHRcdGNhc2UgZXJyLkVycm9yKCkgPT0gXCJodHRwOiByZXF1ZXN0IGJvZHkgdG9vIGxhcmdlXCI6XG5cdFx0XHRyZXR1cm4gZm10LkVycm9yZihcImJvZHkgbXVzdCBub3QgYmUgbGFyZ2VyIHRoYW4gJWQgYnl0ZXNcIiwgbWF4Qnl0ZXMpXG5cdFx0Y2FzZSBlcnJvcnMuQXMoZXJyLCAmaW52YWxpZFVubWFyc2hhbEVycm9yKTpcblx0XHRcdHBhbmljKGVycilcblxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRyZXR1cm4gZXJyXG5cdFx0fVxuXHR9XG5cblx0ZXJyID0gZGVjLkRlY29kZSgmc3RydWN0e317fSlcblx0aWYgZXJyICE9IGlvLkVPRiB7XG5cdFx0cmV0dXJuIGVycm9ycy5OZXcoXCJib2R5IG11c3Qgb25seSBjb250YWluIGEgc2luZ2xlIEpTT04gdmFsdWVcIilcblx0fVxuXG5cdHJldHVybiBuaWxcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgcmVhZFN0cmluZyhxcyB1cmwuVmFsdWVzLCBrZXkgc3RyaW5nLCBkZWZhdWx0VmFsdWUgc3RyaW5nKSBzdHJpbmcge1xuXHRzIDo9IHFzLkdldChrZXkpXG5cblx0aWYgcyA9PSBcIlwiIHtcblx0XHRyZXR1cm4gZGVmYXVsdFZhbHVlXG5cdH1cblxuXHRyZXR1cm4gc1xufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSByZWFkQ1NWKHFzIHVybC5WYWx1ZXMsIGtleSBzdHJpbmcsIGRlZmF1bHRWYWx1ZSBbXXN0cmluZykgW11zdHJpbmcge1xuXHRjc3YgOj0gcXMuR2V0KGtleSlcblxuXHRpZiBjc3YgPT0gXCJcIiB7XG5cdFx0cmV0dXJuIGRlZmF1bHRWYWx1ZVxuXHR9XG5cblx0cmV0dXJuIHN0cmluZ3MuU3BsaXQoY3N2LCBcIixcIilcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgcmVhZEludChxcyB1cmwuVmFsdWVzLCBrZXkgc3RyaW5nLCBkZWZhdWx0VmFsdWUgaW50LCB2ICp2YWxpZGF0b3IuVmFsaWRhdG9yKSBpbnQge1xuXHRzIDo9IHFzLkdldChrZXkpXG5cblx0aWYgcyA9PSBcIlwiIHtcblx0XHRyZXR1cm4gZGVmYXVsdFZhbHVlXG5cdH1cblxuXHRpLCBlcnIgOj0gc3RyY29udi5BdG9pKHMpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHYuQWRkRXJyb3Ioa2V5LCBcIm11c3QgYmUgYW4gaW50ZWdlciB2YWx1ZVwiKVxuXHRcdHJldHVybiBkZWZhdWx0VmFsdWVcblx0fVxuXG5cdHJldHVybiBpXG59XG4uLi5cblBhdGg6IG1pZ3JhdGlvbnMvMDAwMDAyX2FkZF9tb3ZpZXNfY2hlY2tfY29uc3RyYWludHMudXAuc3FsXG5BTFRFUiBUQUJMRSBtb3ZpZXMgQUREIENPTlNUUkFJTlQgbW92aWVzX3J1bnRpbWVfY2hlY2sgQ0hFQ0sgKHJ1bnRpbWUgPj0gMCk7XG5cbkFMVEVSIFRBQkxFIG1vdmllcyBBREQgQ09OU1RSQUlOVCBtb3ZpZXNfeWVhcl9jaGVjayBDSEVDSyAoeWVhciBCRVRXRUVOIDE4ODggQU5EIGRhdGVfcGFydCgneWVhcicsIG5vdygpKSk7XG5cbkFMVEVSIFRBQkxFIG1vdmllcyBBREQgQ09OU1RSQUlOVCBnZW5yZXNfbGVuZ3RoX2NoZWNrIENIRUNLIChhcnJheV9sZW5ndGgoZ2VucmVzLCAxKSBCRVRXRUVOIDEgQU5EIDUpOy4uLlxuUGF0aDogbWlncmF0aW9ucy8wMDAwMDFfY3JlYXRlX21vdmllc190YWJsZS5kb3duLnNxbFxuRFJPUCBUQUJMRSBJRiBFWElTVFMgbW92aWVzOy4uLlxuUGF0aDogbWlncmF0aW9ucy8wMDAwMDJfYWRkX21vdmllc19jaGVja19jb25zdHJhaW50cy5kb3duLnNxbFxuQUxURVIgVEFCTEUgbW92aWVzIERST1AgQ09OU1RSQUlOVCBJRiBFWElTVFMgbW92aWVzX3J1bnRpbWVfY2hlY2s7XG5cbkFMVEVSIFRBQkxFIG1vdmllcyBEUk9QIENPTlNUUkFJTlQgSUYgRVhJU1RTIG1vdmllc195ZWFyX2NoZWNrO1xuXG5BTFRFUiBUQUJMRSBtb3ZpZXMgRFJPUCBDT05TVFJBSU5UIElGIEVYSVNUUyBnZW5yZXNfbGVuZ3RoX2NoZWNrOy4uLlxuUGF0aDogUkVBRE1FLm1kXG4jIGdyZWVubGlnaHRcbi4uLlxuUGF0aDogY21kL2FwaS9yb3V0ZXMuZ29cbnBhY2thZ2UgbWFpblxuXG5pbXBvcnQgKFxuXHRcIm5ldC9odHRwXCJcblxuXHRcImdpdGh1Yi5jb20vanVsaWVuc2NobWlkdC9odHRwcm91dGVyXCJcbilcblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgcm91dGVzKCkgKmh0dHByb3V0ZXIuUm91dGVyIHtcblx0cm91dGVyIDo9IGh0dHByb3V0ZXIuTmV3KClcblxuXHRyb3V0ZXIuTm90Rm91bmQgPSBodHRwLkhhbmRsZXJGdW5jKGFwcC5ub3RGb3VuZFJlc3BvbnNlKVxuXHRyb3V0ZXIuTWV0aG9kTm90QWxsb3dlZCA9IGh0dHAuSGFuZGxlckZ1bmMoYXBwLm1ldGhvZE5vdEFsbG93ZWRSZXNwb25zZSlcblxuXHRyb3V0ZXIuSGFuZGxlckZ1bmMoaHR0cC5NZXRob2RHZXQsIFwiL3YxL2hlYWx0aGNoZWNrXCIsIGFwcC5oZWFsdGhjaGVja0hhbmRsZXIpXG5cdHJvdXRlci5IYW5kbGVyRnVuYyhodHRwLk1ldGhvZFBvc3QsIFwiL3YxL21vdmllc1wiLCBhcHAuY3JlYXRlTW92aWVIYW5kbGVyKVxuXHRyb3V0ZXIuSGFuZGxlckZ1bmMoaHR0cC5NZXRob2RHZXQsIFwiL3YxL21vdmllcy86aWRcIiwgYXBwLnNob3dNb3ZpZUhhbmRsZXIpXG5cdHJvdXRlci5IYW5kbGVyRnVuYyhodHRwLk1ldGhvZFBhdGNoLCBcIi92MS9tb3ZpZXMvOmlkXCIsIGFwcC51cGRhdGVNb3ZpZUhhbmRsZXIpXG5cdHJvdXRlci5IYW5kbGVyRnVuYyhodHRwLk1ldGhvZERlbGV0ZSwgXCIvdjEvbW92aWVzLzppZFwiLCBhcHAuZGVsZXRlTW92aWVIYW5kbGVyKVxuXHRyZXR1cm4gcm91dGVyXG59XG4uLi5cblBhdGg6IGdvLm1vZFxubW9kdWxlIGdyZWVubGlnaHQudHVuZGVvc2Jvcm5lXG5cbmdvIDEuMjMuNVxuXG5yZXF1aXJlIGdpdGh1Yi5jb20vanVsaWVuc2NobWlkdC9odHRwcm91dGVyIHYxLjMuMFxuXG5yZXF1aXJlIGdpdGh1Yi5jb20vbGliL3BxIHYxLjEwLjAgLy8gaW5kaXJlY3Rcbi4uLlxuUGF0aDogY21kL2FwaS9lcnJvcnMuZ29cbnBhY2thZ2UgbWFpblxuXG5pbXBvcnQgKFxuXHRcImZtdFwiXG5cdFwibmV0L2h0dHBcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBsb2dFcnJvcihyICpodHRwLlJlcXVlc3QsIGVyciBlcnJvcikge1xuXHRhcHAubG9nZ2VyLlByaW50bG4oZXJyKVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBlcnJvclJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBzdGF0dXMgaW50LCBtZXNzYWdlIGludGVyZmFjZXt9KSB7XG5cblx0ZW52IDo9IGVudmVsb3Ble1wiZXJyb3JcIjogbWVzc2FnZX1cblxuXHRlcnIgOj0gYXBwLndyaXRlSlNPTih3LCBzdGF0dXMsIGVudiwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAubG9nRXJyb3IociwgZXJyKVxuXHRcdHcuV3JpdGVIZWFkZXIoNTAwKVxuXHR9XG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHNlcnZlckVycm9yUmVzcG9uc2UodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QsIGVyciBlcnJvcikge1xuXHRhcHAubG9nRXJyb3IociwgZXJyKVxuXG5cdG1lc3NhZ2UgOj0gXCJ0aGUgc2VydmVyIGVuY291bnRlcmVkIGEgcHJvYmxlbSBhbmQgY291bGQgbm90IHByb2Nlc3MgeW91ciByZXF1ZXN0XCJcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNJbnRlcm5hbFNlcnZlckVycm9yLCBtZXNzYWdlKVxuXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIG5vdEZvdW5kUmVzcG9uc2UodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblx0bWVzc2FnZSA6PSBcInRoZSByZXF1ZXN0ZWQgcmVzb3VyY2UgY291bGQgbm90IGJlIGZvdW5kXCJcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNOb3RGb3VuZCwgbWVzc2FnZSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgbWV0aG9kTm90QWxsb3dlZFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdG1lc3NhZ2UgOj0gZm10LlNwcmludGYoXCJ0aGUgJXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgcmVzb3VyY2VcIiwgci5NZXRob2QpXG5cdGFwcC5lcnJvclJlc3BvbnNlKHcsIHIsIGh0dHAuU3RhdHVzTWV0aG9kTm90QWxsb3dlZCwgbWVzc2FnZSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgYmFkUmVxdWVzdFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBlcnIgZXJyb3IpIHtcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNCYWRSZXF1ZXN0LCBlcnIuRXJyb3IoKSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgZmFpbGVkVmFsaWRhdGlvblJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBlcnJvcnMgbWFwW3N0cmluZ11zdHJpbmcpIHtcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNVbnByb2Nlc3NhYmxlRW50aXR5LCBlcnJvcnMpXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIGVkaXRDb25mbGljdFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdG1lc3NhZ2UgOj0gXCJ1bmFibGUgdG8gdXBkYXRlIHRoZSByZWNvcmQgZHVlIHRvIGVkaXQgY29uZmxpY3QsIHBsZWFzZSB0cnkgYWdhaW5cIlxuXG5cdGFwcC5lcnJvclJlc3BvbnNlKHcsIHIsIGh0dHAuU3RhdHVzQ29uZmxpY3QsIG1lc3NhZ2UpXG59XG4uLi5cblBhdGg6IGdvLnN1bVxuZ2l0aHViLmNvbS9qdWxpZW5zY2htaWR0L2h0dHByb3V0ZXIgdjEuMy4wIGgxOlUwNjA5ZTl0Z2JzZXUzckJJTmV0OVA0OEFJL0Qzb0pzNGRON2p3Sk9RMVU9XG5naXRodWIuY29tL2p1bGllbnNjaG1pZHQvaHR0cHJvdXRlciB2MS4zLjAvZ28ubW9kIGgxOkpSNld0SGIrMkxVZThUQ0tZM2NaT3hGeXlPOElaQWM0UlZjeWNDQ0FLZE09XG5naXRodWIuY29tL2xpYi9wcSB2MS4xMC4wIGgxOlp4NURKRkVZUVhpbzkza2dYblEwOWZYTmlVS3NxdjRPVUV1MlV0R2NCMUU9XG5naXRodWIuY29tL2xpYi9wcSB2MS4xMC4wL2dvLm1vZCBoMTpBbFZONXg0RTRUNTQ0dFd6SDZoS2ZiZlF2bTNIZGJPeHJtZ2dETkFQWTlvPVxuLi4uXG5QYXRoOiBjbWQvYXBpL2hlYWx0aGNoZWNrLmdvXG5wYWNrYWdlIG1haW5cblxuaW1wb3J0IChcblx0XCJuZXQvaHR0cFwiXG4pXG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIGhlYWx0aGNoZWNrSGFuZGxlcih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkge1xuXG5cdGVudiA6PSBlbnZlbG9wZXtcblx0XHRcInN0YXR1c1wiOiBcImF2YWlsYWJsZVwiLFxuXHRcdFwic3lzdGVtX2luZm9cIjogbWFwW3N0cmluZ11zdHJpbmd7XG5cdFx0XHRcImVudmlyb25tZW50XCI6IGFwcC5jb25maWcuZW52LFxuXHRcdFx0XCJ2ZXJzaW9uXCI6ICAgICB2ZXJzaW9uLFxuXHRcdH0sXG5cdH1cblxuXHRlcnIgOj0gYXBwLndyaXRlSlNPTih3LCBodHRwLlN0YXR1c09LLCBlbnYsIG5pbClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLmxvZ2dlci5QcmludGxuKGVycilcblx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdH1cblxufVxuLi4uXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDEya0s5V3hVb2F0ZE5CYUpSNEc4U1d1In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL29zYm9ybmUvRG93bmxvYWRzL3RlY2gtbGVhcm5pbmdzL2dyZWVubGlnaHQiLCJmb2xkZXJSb290IjoiL1VzZXJzL29zYm9ybmUvRG93bmxvYWRzL3RlY2gtbGVhcm5pbmdzL2dyZWVubGlnaHQifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTA4VDIwOjE4OjIwLjUwNFoiLCJyZXNwb25zZV90ZXh0IjoiTGV0IG1lIGNoZWNrIHRoZSBjb250ZW50IG9mIHRoZSBgZmlsdGVycy5nb2AgZmlsZTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJmZTNiODZhOC01YjllLTQ3YjItYjUwZC0yNTUzM2Y4NTQ2ODEiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgSSBoYXZlIGFsbCB0aGUgaW5mb3JtYXRpb24gSSBuZWVkIHRvIGV4cGxhaW4gdGhlIHNlbGVjdGVkIGNvZGUuIEhlcmUncyBteSBleHBsYW5hdGlvbjpcblxuIyMgRXhwbGFuYXRpb24gb2YgdGhlIFNlbGVjdGVkIENvZGVcblxuVGhlIHNlbGVjdGVkIGNvZGUgc25pcHBldDpcbmBgYFxuaWYgZGF0YS5WYWxpZGF0ZUZpbHRlcnModiwgaW5wdXQuRmlsdGVycyk7ICF2LlZhbGlkKCkge1xuYGBgXG5cblRoaXMgbGluZSBpcyBwYXJ0IG9mIHRoZSBgbGlzdE1vdmllc0hhbmRsZXJgIGZ1bmN0aW9uIGluIHRoZSBgY21kL2FwaS9tb3ZpZXMuZ29gIGZpbGUuIEl0J3MgcGVyZm9ybWluZyB2YWxpZGF0aW9uIG9uIHRoZSBmaWx0ZXJpbmcgcGFyYW1ldGVycyB0aGF0IGFyZSB1c2VkIHdoZW4gbGlzdGluZyBtb3ZpZXMgZnJvbSB0aGUgQVBJLlxuXG5IZXJlJ3Mgd2hhdCB0aGlzIGNvZGUgaXMgZG9pbmc6XG5cbjEuIGBkYXRhLlZhbGlkYXRlRmlsdGVycyh2LCBpbnB1dC5GaWx0ZXJzKWAgLSBUaGlzIGNhbGxzIHRoZSBgVmFsaWRhdGVGaWx0ZXJzYCBmdW5jdGlvbiBmcm9tIHRoZSBgZGF0YWAgcGFja2FnZSwgcGFzc2luZyBpbjpcbiAgIC0gYHZgOiBBIHZhbGlkYXRvciBpbnN0YW5jZSBjcmVhdGVkIGVhcmxpZXIgaW4gdGhlIGZ1bmN0aW9uIHdpdGggYHYgOj0gdmFsaWRhdG9yLk5ldygpYFxuICAgLSBgaW5wdXQuRmlsdGVyc2A6IEEgYEZpbHRlcnNgIHN0cnVjdCB0aGF0IGNvbnRhaW5zIHBhZ2luYXRpb24gYW5kIHNvcnRpbmcgcGFyYW1ldGVyc1xuXG4yLiBUaGUgYFZhbGlkYXRlRmlsdGVyc2AgZnVuY3Rpb24gKGRlZmluZWQgaW4gYGludGVybmFsL2RhdGEvZmlsdGVycy5nb2ApIHBlcmZvcm1zIHNldmVyYWwgdmFsaWRhdGlvbiBjaGVja3M6XG4gICAtIEVuc3VyZXMgdGhlIHBhZ2UgbnVtYmVyIGlzIGdyZWF0ZXIgdGhhbiAwIGFuZCBsZXNzIHRoYW4gMTAgbWlsbGlvblxuICAgLSBFbnN1cmVzIHRoZSBwYWdlIHNpemUgaXMgZ3JlYXRlciB0aGFuIDAgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byAxMDBcbiAgIC0gVmVyaWZpZXMgdGhhdCB0aGUgc29ydCBwYXJhbWV0ZXIgaXMgb25lIG9mIHRoZSBhbGxvd2VkIHZhbHVlcyBpbiB0aGUgYFNvcnRTYWZlbGlzdGBcblxuMy4gYDtgIC0gVGhpcyBpcyBhIHNlbWljb2xvbiB0aGF0IHNlcGFyYXRlcyB0aGUgZnVuY3Rpb24gY2FsbCBmcm9tIHRoZSBjb25kaXRpb25hbCBjaGVja1xuXG40LiBgIXYuVmFsaWQoKWAgLSBBZnRlciB0aGUgdmFsaWRhdGlvbiBmdW5jdGlvbiBydW5zLCB0aGlzIGNoZWNrcyBpZiB0aGUgdmFsaWRhdG9yIGNvbnRhaW5zIGFueSBlcnJvcnMuIFRoZSBgVmFsaWQoKWAgbWV0aG9kIHJldHVybnMgYHRydWVgIGlmIHRoZXJlIGFyZSBubyBlcnJvcnMsIHNvIGAhdi5WYWxpZCgpYCByZXR1cm5zIGB0cnVlYCBpZiB0aGVyZSBhcmUgdmFsaWRhdGlvbiBlcnJvcnMuXG5cbjUuIElmIHRoZXJlIGFyZSB2YWxpZGF0aW9uIGVycm9ycyAoaS5lLiwgYCF2LlZhbGlkKClgIGlzIHRydWUpLCB0aGUgY29kZSBpbnNpZGUgdGhlIGZvbGxvd2luZyBibG9jayB3aWxsIGV4ZWN1dGUsIHdoaWNoIGNhbGxzIGBhcHAuZmFpbGVkVmFsaWRhdGlvblJlc3BvbnNlKHcsIHIsIHYuRXJyb3JzKWAgdG8gcmV0dXJuIGFuIGFwcHJvcHJpYXRlIGVycm9yIHJlc3BvbnNlIHRvIHRoZSBjbGllbnQuXG5cblRoaXMgcGF0dGVybiBpcyB1c2VkIHRocm91Z2hvdXQgdGhlIGNvZGViYXNlIGZvciB2YWxpZGF0aW5nIGRpZmZlcmVudCB0eXBlcyBvZiBpbnB1dCwgc3VjaCBhcyBtb3ZpZSBkYXRhIGluIHRoZSBgY3JlYXRlTW92aWVIYW5kbGVyYCBhbmQgYHVwZGF0ZU1vdmllSGFuZGxlcmAgZnVuY3Rpb25zLlxuXG5UaGUgdmFsaWRhdGlvbiBlbnN1cmVzIHRoYXQgY2xpZW50cyBjYW4ndCByZXF1ZXN0IGludmFsaWQgcGFnaW5hdGlvbiBwYXJhbWV0ZXJzIG9yIHNvcnQgYnkgZmllbGRzIHRoYXQgYXJlbid0IGFsbG93ZWQsIHdoaWNoIGhlbHBzIG1haW50YWluIHRoZSBzZWN1cml0eSBhbmQgcGVyZm9ybWFuY2Ugb2YgdGhlIEFQSS5cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gaW50ZXJuYWwvZGF0YS9maWx0ZXJzLmdvOlxuICAgICAxXHRwYWNrYWdlIGRhdGFcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBcImdyZWVubGlnaHQudHVuZGVvc2Jvcm5lL2ludGVybmFsL3ZhbGlkYXRvclwiXG4gICAgIDRcdFxuICAgICA1XHR0eXBlIEZpbHRlcnMgc3RydWN0IHtcbiAgICAgNlx0XHRQYWdlICAgICAgICAgaW50XG4gICAgIDdcdFx0UGFnZVNpemUgICAgIGludFxuICAgICA4XHRcdFNvcnQgICAgICAgICBzdHJpbmdcbiAgICAgOVx0XHRTb3J0U2FmZWxpc3QgW11zdHJpbmdcbiAgICAxMFx0fVxuICAgIDExXHRcbiAgICAxMlx0ZnVuYyBWYWxpZGF0ZUZpbHRlcnModiAqdmFsaWRhdG9yLlZhbGlkYXRvciwgZiBGaWx0ZXJzKSB7XG4gICAgMTNcdFx0di5DaGVjayhmLlBhZ2UgPiAwLCBcInBhZ2VcIiwgXCJtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvXCIpXG4gICAgMTRcdFx0di5DaGVjayhmLlBhZ2UgPD0gMTBfMDAwXzAwMCwgXCJwYWdlXCIsIFwibXVzdCBiZSBhIG1heGltdW0gb2YgMTAgbWlsbGlvblwiKVxuICAgIDE1XHRcdHYuQ2hlY2soZi5QYWdlU2l6ZSA+IDAsIFwicGFnZV9zaXplXCIsIFwibXVzdCBiZSBncmVhdGVyIHRoYW4gemVyb1wiKVxuICAgIDE2XHRcdHYuQ2hlY2soZi5QYWdlU2l6ZSA8PSAxMDAsIFwicGFnZV9zaXplXCIsIFwibXVzdCBiZSBhIG1heGltdW0gb2YgMTAwXCIpXG4gICAgMTdcdFx0di5DaGVjayh2YWxpZGF0b3IuSW4oZi5Tb3J0LCBmLlNvcnRTYWZlbGlzdC4uLiksIFwic29ydFwiLCBcImludmFsaWQgc29ydCB2YWx1ZVwiKVxuICAgIDE4XHR9XG4gICAgMTlcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMTlcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVMydEZUcFlvZlVjbng5RjZYUUVkNkEifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvb3Nib3JuZS9Eb3dubG9hZHMvdGVjaC1sZWFybmluZ3MvZ3JlZW5saWdodCIsImZvbGRlclJvb3QiOiIvVXNlcnMvb3Nib3JuZS9Eb3dubG9hZHMvdGVjaC1sZWFybmluZ3MvZ3JlZW5saWdodCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDhUMjA6MTg6MjUuNDMxWiIsInJlc3BvbnNlX3RleHQiOiJOb3cgSSBoYXZlIGFsbCB0aGUgaW5mb3JtYXRpb24gSSBuZWVkIHRvIGV4cGxhaW4gdGhlIHNlbGVjdGVkIGNvZGUuIEhlcmUncyBteSBleHBsYW5hdGlvbjpcblxuIyMgRXhwbGFuYXRpb24gb2YgdGhlIFNlbGVjdGVkIENvZGVcblxuVGhlIHNlbGVjdGVkIGNvZGUgc25pcHBldDpcbmBgYFxuaWYgZGF0YS5WYWxpZGF0ZUZpbHRlcnModiwgaW5wdXQuRmlsdGVycyk7ICF2LlZhbGlkKCkge1xuYGBgXG5cblRoaXMgbGluZSBpcyBwYXJ0IG9mIHRoZSBgbGlzdE1vdmllc0hhbmRsZXJgIGZ1bmN0aW9uIGluIHRoZSBgY21kL2FwaS9tb3ZpZXMuZ29gIGZpbGUuIEl0J3MgcGVyZm9ybWluZyB2YWxpZGF0aW9uIG9uIHRoZSBmaWx0ZXJpbmcgcGFyYW1ldGVycyB0aGF0IGFyZSB1c2VkIHdoZW4gbGlzdGluZyBtb3ZpZXMgZnJvbSB0aGUgQVBJLlxuXG5IZXJlJ3Mgd2hhdCB0aGlzIGNvZGUgaXMgZG9pbmc6XG5cbjEuIGBkYXRhLlZhbGlkYXRlRmlsdGVycyh2LCBpbnB1dC5GaWx0ZXJzKWAgLSBUaGlzIGNhbGxzIHRoZSBgVmFsaWRhdGVGaWx0ZXJzYCBmdW5jdGlvbiBmcm9tIHRoZSBgZGF0YWAgcGFja2FnZSwgcGFzc2luZyBpbjpcbiAgIC0gYHZgOiBBIHZhbGlkYXRvciBpbnN0YW5jZSBjcmVhdGVkIGVhcmxpZXIgaW4gdGhlIGZ1bmN0aW9uIHdpdGggYHYgOj0gdmFsaWRhdG9yLk5ldygpYFxuICAgLSBgaW5wdXQuRmlsdGVyc2A6IEEgYEZpbHRlcnNgIHN0cnVjdCB0aGF0IGNvbnRhaW5zIHBhZ2luYXRpb24gYW5kIHNvcnRpbmcgcGFyYW1ldGVyc1xuXG4yLiBUaGUgYFZhbGlkYXRlRmlsdGVyc2AgZnVuY3Rpb24gKGRlZmluZWQgaW4gYGludGVybmFsL2RhdGEvZmlsdGVycy5nb2ApIHBlcmZvcm1zIHNldmVyYWwgdmFsaWRhdGlvbiBjaGVja3M6XG4gICAtIEVuc3VyZXMgdGhlIHBhZ2UgbnVtYmVyIGlzIGdyZWF0ZXIgdGhhbiAwIGFuZCBsZXNzIHRoYW4gMTAgbWlsbGlvblxuICAgLSBFbnN1cmVzIHRoZSBwYWdlIHNpemUgaXMgZ3JlYXRlciB0aGFuIDAgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byAxMDBcbiAgIC0gVmVyaWZpZXMgdGhhdCB0aGUgc29ydCBwYXJhbWV0ZXIgaXMgb25lIG9mIHRoZSBhbGxvd2VkIHZhbHVlcyBpbiB0aGUgYFNvcnRTYWZlbGlzdGBcblxuMy4gYDtgIC0gVGhpcyBpcyBhIHNlbWljb2xvbiB0aGF0IHNlcGFyYXRlcyB0aGUgZnVuY3Rpb24gY2FsbCBmcm9tIHRoZSBjb25kaXRpb25hbCBjaGVja1xuXG40LiBgIXYuVmFsaWQoKWAgLSBBZnRlciB0aGUgdmFsaWRhdGlvbiBmdW5jdGlvbiBydW5zLCB0aGlzIGNoZWNrcyBpZiB0aGUgdmFsaWRhdG9yIGNvbnRhaW5zIGFueSBlcnJvcnMuIFRoZSBgVmFsaWQoKWAgbWV0aG9kIHJldHVybnMgYHRydWVgIGlmIHRoZXJlIGFyZSBubyBlcnJvcnMsIHNvIGAhdi5WYWxpZCgpYCByZXR1cm5zIGB0cnVlYCBpZiB0aGVyZSBhcmUgdmFsaWRhdGlvbiBlcnJvcnMuXG5cbjUuIElmIHRoZXJlIGFyZSB2YWxpZGF0aW9uIGVycm9ycyAoaS5lLiwgYCF2LlZhbGlkKClgIGlzIHRydWUpLCB0aGUgY29kZSBpbnNpZGUgdGhlIGZvbGxvd2luZyBibG9jayB3aWxsIGV4ZWN1dGUsIHdoaWNoIGNhbGxzIGBhcHAuZmFpbGVkVmFsaWRhdGlvblJlc3BvbnNlKHcsIHIsIHYuRXJyb3JzKWAgdG8gcmV0dXJuIGFuIGFwcHJvcHJpYXRlIGVycm9yIHJlc3BvbnNlIHRvIHRoZSBjbGllbnQuXG5cblRoaXMgcGF0dGVybiBpcyB1c2VkIHRocm91Z2hvdXQgdGhlIGNvZGViYXNlIGZvciB2YWxpZGF0aW5nIGRpZmZlcmVudCB0eXBlcyBvZiBpbnB1dCwgc3VjaCBhcyBtb3ZpZSBkYXRhIGluIHRoZSBgY3JlYXRlTW92aWVIYW5kbGVyYCBhbmQgYHVwZGF0ZU1vdmllSGFuZGxlcmAgZnVuY3Rpb25zLlxuXG5UaGUgdmFsaWRhdGlvbiBlbnN1cmVzIHRoYXQgY2xpZW50cyBjYW4ndCByZXF1ZXN0IGludmFsaWQgcGFnaW5hdGlvbiBwYXJhbWV0ZXJzIG9yIHNvcnQgYnkgZmllbGRzIHRoYXQgYXJlbid0IGFsbG93ZWQsIHdoaWNoIGhlbHBzIG1haW50YWluIHRoZSBzZWN1cml0eSBhbmQgcGVyZm9ybWFuY2Ugb2YgdGhlIEFQSS5cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119XSwiZmVlZGJhY2tTdGF0ZXMiOnsidGVtcC1mZS0yMzZjYTg0OC1mNGE2LTQ4OWUtYjdlNi1hYjhhMzdkYzUxZTgiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTljYmRmMWYxLWQ4NmYtNDA2Yy1iMWM0LTkyYzljZmMyNGUwMyI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNTMyMTA2YzctNWEyNS00YmQzLWIyNjctYjc4MGY0YTk2YTQyIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0zOTc2ODRhMC1kMDhiLTQxYTQtYjZmMy1jNWFiNTE2NTA0NzQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWRlZjdjMjJhLTBlNTMtNGY3Ny1iMDE5LTFiNzY4ODVjYTFkYSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn19LCJ0b29sVXNlU3RhdGVzIjp7ImZmMzI5MjU0LTY3N2MtNGM3YS04Mjc1LTM0NmM4OGFhMTYzYzt0b29sdV92cnR4XzAxS2NWOGs1enJVcER0bnM2WFVCSzRnYSI6eyJyZXF1ZXN0SWQiOiJmZjMyOTI1NC02NzdjLTRjN2EtODI3NS0zNDZjODhhYTE2M2MiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxS2NWOGs1enJVcER0bnM2WFVCSzRnYSIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IGNtZC9hcGkvbW92aWVzLmdvXG5wYWNrYWdlIG1haW5cblxuaW1wb3J0IChcblx0XCJlcnJvcnNcIlxuXHRcImZtdFwiXG5cdFwiZ3JlZW5saWdodC50dW5kZW9zYm9ybmUvaW50ZXJuYWwvZGF0YVwiXG5cdFwiZ3JlZW5saWdodC50dW5kZW9zYm9ybmUvaW50ZXJuYWwvdmFsaWRhdG9yXCJcblx0XCJuZXQvaHR0cFwiXG4pXG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIGNyZWF0ZU1vdmllSGFuZGxlcih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkge1xuXG5cdHZhciBpbnB1dCBzdHJ1Y3Qge1xuXHRcdFRpdGxlICAgc3RyaW5nICAgICAgIGBqc29uOlwidGl0bGVcImBcblx0XHRZZWFyICAgIGludDMyICAgICAgICBganNvbjpcInllYXJcImBcblx0XHRSdW50aW1lIGRhdGEuUnVudGltZSBganNvbjpcInJ1bnRpbWVcImBcblx0XHRHZW5yZXMgIFtdc3RyaW5nICAgICBganNvbjpcImdlbnJlc1wiYFxuXHR9XG5cblx0ZXJyIDo9IGFwcC5yZWFkSlNPTih3LCByLCAmaW5wdXQpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5iYWRSZXF1ZXN0UmVzcG9uc2UodywgciwgZXJyKVxuXHRcdHJldHVyblxuXHR9XG5cblx0bW92aWUgOj0gJmRhdGEuTW92aWV7XG5cdFx0VGl0bGU6ICAgaW5wdXQuVGl0bGUsXG5cdFx0WWVhcjogICAgaW5wdXQuWWVhcixcblx0XHRSdW50aW1lOiBpbnB1dC5SdW50aW1lLFxuXHRcdEdlbnJlczogIGlucHV0LkdlbnJlcyxcblx0fVxuXG5cdHYgOj0gdmFsaWRhdG9yLk5ldygpXG5cblx0aWYgZGF0YS5WYWxpZGF0ZU1vdmllKHYsIG1vdmllKTsgIXYuVmFsaWQoKSB7XG5cdFx0YXBwLmZhaWxlZFZhbGlkYXRpb25SZXNwb25zZSh3LCByLCB2LkVycm9ycylcblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC5tb2RlbHMuTW92aWVzLkluc2VydChtb3ZpZSlcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdHJldHVyblxuXHR9XG5cblx0aGVhZGVycyA6PSBtYWtlKGh0dHAuSGVhZGVyKVxuXHRoZWFkZXJzLlNldChcIkxvY2F0aW9uXCIsIGZtdC5TcHJpbnRmKFwiL3YxL21vdmllcy8lZFwiLCBtb3ZpZS5JRCkpXG5cblx0ZXJyID0gYXBwLndyaXRlSlNPTih3LCBodHRwLlN0YXR1c0NyZWF0ZWQsIGVudmVsb3Ble1wibW92aWVcIjogbW92aWV9LCBoZWFkZXJzKVxuXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0fVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBzaG93TW92aWVIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cblx0aWQsIGVyciA6PSBhcHAucmVhZElEUGFyYW0ocilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRyZXR1cm5cblx0fVxuXG5cdG1vdmllLCBlcnIgOj0gYXBwLm1vZGVscy5Nb3ZpZXMuR2V0KGlkKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRzd2l0Y2gge1xuXHRcdGNhc2UgZXJyb3JzLklzKGVyciwgZGF0YS5FcnJSZWNvcmROb3RGb3VuZCk6XG5cdFx0XHRhcHAubm90Rm91bmRSZXNwb25zZSh3LCByKVxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdFx0fVxuXHRcdHJldHVyblxuXHR9XG5cblx0ZXJyID0gYXBwLndyaXRlSlNPTih3LCBodHRwLlN0YXR1c09LLCBlbnZlbG9wZXtcIm1vdmllXCI6IG1vdmllfSwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdH1cblxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSB1cGRhdGVNb3ZpZUhhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblx0aWQsIGVyciA6PSBhcHAucmVhZElEUGFyYW0ocilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRyZXR1cm5cblx0fVxuXG5cdG1vdmllLCBlcnIgOj0gYXBwLm1vZGVscy5Nb3ZpZXMuR2V0KGlkKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRzd2l0Y2gge1xuXHRcdGNhc2UgZXJyb3JzLklzKGVyciwgZGF0YS5FcnJSZWNvcmROb3RGb3VuZCk6XG5cdFx0XHRhcHAubm90Rm91bmRSZXNwb25zZSh3LCByKVxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdFx0fVxuXHRcdHJldHVyblxuXHR9XG5cblx0dmFyIGlucHV0IHN0cnVjdCB7XG5cdFx0VGl0bGUgICAqc3RyaW5nICAgICAgIGBqc29uOlwidGl0bGVcImBcblx0XHRZZWFyICAgICppbnQzMiAgICAgICAgYGpzb246XCJ5ZWFyXCJgXG5cdFx0UnVudGltZSAqZGF0YS5SdW50aW1lIGBqc29uOlwicnVudGltZVwiYFxuXHRcdEdlbnJlcyAgW11zdHJpbmcgICAgICBganNvbjpcImdlbnJlc1wiYFxuXHR9XG5cblx0ZXJyID0gYXBwLnJlYWRKU09OKHcsIHIsICZpbnB1dClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLmJhZFJlcXVlc3RSZXNwb25zZSh3LCByLCBlcnIpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRpZiBpbnB1dC5UaXRsZSAhPSBuaWwge1xuXHRcdG1vdmllLlRpdGxlID0gKmlucHV0LlRpdGxlXG5cdH1cblx0aWYgaW5wdXQuWWVhciAhPSBuaWwge1xuXHRcdG1vdmllLlllYXIgPSAqaW5wdXQuWWVhclxuXHR9XG5cdGlmIGlucHV0LlJ1bnRpbWUgIT0gbmlsIHtcblx0XHRtb3ZpZS5SdW50aW1lID0gKmlucHV0LlJ1bnRpbWVcblx0fVxuXHRpZiBpbnB1dC5HZW5yZXMgIT0gbmlsIHtcblx0XHRtb3ZpZS5HZW5yZXMgPSBpbnB1dC5HZW5yZXNcblx0fVxuXG5cdHYgOj0gdmFsaWRhdG9yLk5ldygpXG5cblx0aWYgZGF0YS5WYWxpZGF0ZU1vdmllKHYsIG1vdmllKTsgIXYuVmFsaWQoKSB7XG5cdFx0YXBwLmZhaWxlZFZhbGlkYXRpb25SZXNwb25zZSh3LCByLCB2LkVycm9ycylcblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC5tb2RlbHMuTW92aWVzLlVwZGF0ZShtb3ZpZSlcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdHJldHVyblxuXHR9XG5cblx0ZXJyID0gYXBwLndyaXRlSlNPTih3LCBodHRwLlN0YXR1c09LLCBlbnZlbG9wZXtcIm1vdmllXCI6IG1vdmllfSwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdH1cblxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBkZWxldGVNb3ZpZUhhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblx0aWQsIGVyciA6PSBhcHAucmVhZElEUGFyYW0ocilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC5tb2RlbHMuTW92aWVzLkRlbGV0ZShpZClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIGRhdGEuRXJyUmVjb3JkTm90Rm91bmQpOlxuXHRcdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRkZWZhdWx0OlxuXHRcdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdH1cblx0XHRyZXR1cm5cblx0fVxuXHRlcnIgPSBhcHAud3JpdGVKU09OKHcsIGh0dHAuU3RhdHVzT0ssIGVudmVsb3Ble1wibWVzc2FnZVwiOiBcIm1vdmllIHN1Y2Nlc3NmdWxseSBkZWxldGVkXCJ9LCBuaWwpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0fVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBsaXN0TW92aWVzSGFuZGxlcih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkge1xuXHR2YXIgaW5wdXQgc3RydWN0IHtcblx0XHRUaXRsZSAgICBzdHJpbmdcblx0XHRHZW5yZXMgICBbXXN0cmluZ1xuXHRcdFBhZ2UgICAgIGludFxuXHRcdFBhZ2VTaXplIGludFxuXHRcdHNvcnQgICAgIHN0cmluZ1xuXHR9XG5cblx0diA6PSB2YWxpZGF0b3IuTmV3KClcblxuXHRxcyA6PSByLlVSTC5RdWVyeSgpXG5cdGlucHV0LlRpdGxlID0gYXBwLnJlYWRTdHJpbmcocXMsIFwidGl0bGVcIiwgXCJcIilcblx0aW5wdXQuR2VucmVzID0gYXBwLnJlYWRDU1YocXMsIFwiZ2VucmVzXCIsIFtdc3RyaW5ne30pXG5cdGlucHV0LlBhZ2UgPSBhcHAucmVhZEludChxcywgXCJwYWdlXCIsIDEsIHYpXG5cdGlucHV0LlBhZ2VTaXplID0gYXBwLnJlYWRJbnQocXMsIFwicGFnZV9zaXplXCIsIDIwLCB2KVxuXHRpbnB1dC5zb3J0ID0gYXBwLnJlYWRTdHJpbmcocXMsIFwic29ydFwiLCBcImlkXCIpXG5cblx0aWYgIXYuVmFsaWQoKSB7XG5cdFx0YXBwLmZhaWxlZFZhbGlkYXRpb25SZXNwb25zZSh3LCByLCB2LkVycm9ycylcblx0XHRyZXR1cm5cblx0fVxuXG5cdGZtdC5GcHJpbnRmKHcsIFwiJSt2XFxuXCIsIGlucHV0KVxufVxuLi4uXG5QYXRoOiBpbnRlcm5hbC9kYXRhL21vdmllcy5nb1xucGFja2FnZSBkYXRhXG5cbmltcG9ydCAoXG5cdFwiY29udGV4dFwiXG5cdFwiZGF0YWJhc2Uvc3FsXCJcblx0XCJlcnJvcnNcIlxuXHRcImdpdGh1Yi5jb20vbGliL3BxXCJcblx0XCJ0aW1lXCJcblxuXHRcImdyZWVubGlnaHQudHVuZGVvc2Jvcm5lL2ludGVybmFsL3ZhbGlkYXRvclwiXG4pXG5cbnR5cGUgTW92aWUgc3RydWN0IHtcblx0SUQgICAgICAgIGludDY0ICAgICBganNvbjpcImlkXCJgXG5cdENyZWF0ZWRBdCB0aW1lLlRpbWUgYGpzb246XCItXCJgXG5cdFRpdGxlICAgICBzdHJpbmcgICAgYGpzb246XCJ0aXRsZVwiYFxuXHRZZWFyICAgICAgaW50MzIgICAgIGBqc29uOlwieWVhcixvbWl0ZW1wdHlcImBcblx0UnVudGltZSAgIFJ1bnRpbWUgICBganNvbjpcInJ1bnRpbWUsb21pdGVtcHR5XCJgXG5cdEdlbnJlcyAgICBbXXN0cmluZyAgYGpzb246XCJnZW5yZXMsb21pdGVtcHR5XCJgXG5cdFZlcnNpb24gICBpbnQzMiAgICAgYGpzb246XCJ2ZXJzaW9uXCJgXG59XG5cbmZ1bmMgVmFsaWRhdGVNb3ZpZSh2ICp2YWxpZGF0b3IuVmFsaWRhdG9yLCBtb3ZpZSAqTW92aWUpIHtcblx0di5DaGVjayhtb3ZpZS5UaXRsZSAhPSBcIlwiLCBcInRpdGxlXCIsIFwibXVzdCBiZSBwcm92aWRlZFwiKVxuXHR2LkNoZWNrKGxlbihtb3ZpZS5UaXRsZSkgPD0gNTAwLCBcInRpdGxlXCIsIFwibXVzdCBub3QgYmUgbW9yZSB0aGFuIDUwMCBieXRlcyBsb25nXCIpXG5cdHYuQ2hlY2sobW92aWUuWWVhciA+PSAxODg4LCBcInllYXJcIiwgXCJtdXN0IGJlIGdyZWF0ZXIgdGhhbiAxODg4XCIpXG5cdHYuQ2hlY2sobW92aWUuWWVhciA8PSBpbnQzMih0aW1lLk5vdygpLlllYXIoKSksIFwieWVhclwiLCBcIm11c3Qgbm90IGJlIGluIHRoZSBmdXR1cmVcIilcblx0di5DaGVjayhtb3ZpZS5SdW50aW1lICE9IDAsIFwicnVudGltZVwiLCBcIm11c3QgYmUgcHJvdmlkZWRcIilcblx0di5DaGVjayhtb3ZpZS5SdW50aW1lID4gMCwgXCJydW50aW1lXCIsIFwibXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXJcIilcblxuXHR2LkNoZWNrKG1vdmllLkdlbnJlcyAhPSBuaWwsIFwiZ2VucmVzXCIsIFwibXVzdCBiZSBwcm92aWRlZFwiKVxuXHR2LkNoZWNrKGxlbihtb3ZpZS5HZW5yZXMpID49IDEsIFwiZ2VucmVzXCIsIFwibXVzdCBjb250YWluIGF0IGxlYXN0IDEgZ2VucmVcIilcblx0di5DaGVjayhsZW4obW92aWUuR2VucmVzKSA8PSA1LCBcImdlbnJlc1wiLCBcIm11c3Qgbm90IGNvbnRhaW4gbW9yZSB0aGFuIDUgZ2VucmVzXCIpXG5cblx0di5DaGVjayh2YWxpZGF0b3IuVW5pcXVlKG1vdmllLkdlbnJlcyksIFwiZ2VucmVzXCIsIFwibXVzdCBub3QgY29udGFpbiBkdXBsaWNhdGUgdmFsdWVzXCIpXG59XG5cbnR5cGUgTW92aWVNb2RlbCBzdHJ1Y3Qge1xuXHREQiAqc3FsLkRCXG59XG5cbmZ1bmMgKG0gTW92aWVNb2RlbCkgSW5zZXJ0KG1vdmllICpNb3ZpZSkgZXJyb3Ige1xuXHRxdWVyeSA6PSBgSU5TRVJUIElOVE8gbW92aWVzICh0aXRsZSwgeWVhciwgcnVudGltZSwgZ2VucmVzKVxuICAgICAgICAgICAgICAgVkFMVUVTICgkMSwgJDIsICQzLCAkNClcbiAgICAgICAgICAgICAgIFJFVFVSTklORyBpZCwgY3JlYXRlZF9hdCwgdmVyc2lvbmBcblxuXHRhcmdzIDo9IFtdaW50ZXJmYWNle317bW92aWUuVGl0bGUsIG1vdmllLlllYXIsIG1vdmllLlJ1bnRpbWUsIHBxLkFycmF5KG1vdmllLkdlbnJlcyl9XG5cblx0Y3R4LCBjYW5jZWwgOj0gY29udGV4dC5XaXRoVGltZW91dChjb250ZXh0LkJhY2tncm91bmQoKSwgMyp0aW1lLlNlY29uZClcblx0ZGVmZXIgY2FuY2VsKClcblxuXHRyZXR1cm4gbS5EQi5RdWVyeVJvd0NvbnRleHQoY3R4LCBxdWVyeSwgYXJncy4uLikuU2NhbigmbW92aWUuSUQsICZtb3ZpZS5DcmVhdGVkQXQsICZtb3ZpZS5WZXJzaW9uKVxufVxuXG5mdW5jIChtIE1vdmllTW9kZWwpIEdldChpZCBpbnQ2NCkgKCpNb3ZpZSwgZXJyb3IpIHtcblx0aWYgaWQgPCAxIHtcblx0XHRyZXR1cm4gbmlsLCBFcnJSZWNvcmROb3RGb3VuZFxuXHR9XG5cblx0cXVlcnkgOj0gYFNFTEVDVCBpZCwgY3JlYXRlZF9hdCwgdGl0bGUsIHllYXIsIHJ1bnRpbWUsIGdlbnJlcywgdmVyc2lvbiBGUk9NIG1vdmllcyBXSEVSRSBpZCA9ICQxYFxuXG5cdHZhciBtb3ZpZSBNb3ZpZVxuXG5cdGN0eCwgY2FuY2VsIDo9IGNvbnRleHQuV2l0aFRpbWVvdXQoY29udGV4dC5CYWNrZ3JvdW5kKCksIDMqdGltZS5TZWNvbmQpXG5cblx0ZGVmZXIgY2FuY2VsKClcblxuXHRlcnIgOj1cblx0XHRtLkRCLlF1ZXJ5Um93Q29udGV4dChjdHgsIHF1ZXJ5LCBpZCkuU2NhbigmbW92aWUuSUQsICZtb3ZpZS5DcmVhdGVkQXQsICZtb3ZpZS5UaXRsZSwgJm1vdmllLlllYXIsICZtb3ZpZS5SdW50aW1lLCBwcS5BcnJheSgmbW92aWUuR2VucmVzKSwgJm1vdmllLlZlcnNpb24pXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHN3aXRjaCB7XG5cdFx0Y2FzZSBlcnJvcnMuSXMoZXJyLCBzcWwuRXJyTm9Sb3dzKTpcblx0XHRcdHJldHVybiBuaWwsIEVyclJlY29yZE5vdEZvdW5kXG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiBuaWwsIGVyclxuXHRcdH1cblx0fVxuXG5cdHJldHVybiAmbW92aWUsIG5pbFxufVxuXG5mdW5jIChtIE1vdmllTW9kZWwpIFVwZGF0ZShtb3ZpZSAqTW92aWUpIGVycm9yIHtcblx0cXVlcnkgOj0gYFVQREFURSBtb3ZpZXNcbiBTRVQgdGl0bGUgPSAkMSwgeWVhciA9ICQyLCBydW50aW1lID0gJDMsIGdlbnJlcyA9ICQ0LCB2ZXJzaW9uID0gdmVyc2lvbiArIDEgV0hFUkUgIGlkID0gJDUgQU5EIHZlcnNpb24gPSAkNlxuIFJFVFVSTklORyB2ZXJzaW9uYFxuXG5cdGFyZ3MgOj0gW11pbnRlcmZhY2V7fXtcblx0XHRtb3ZpZS5UaXRsZSxcblx0XHRtb3ZpZS5ZZWFyLFxuXHRcdG1vdmllLlJ1bnRpbWUsXG5cdFx0cHEuQXJyYXkobW92aWUuR2VucmVzKSxcblx0XHRtb3ZpZS5JRCxcblx0XHRtb3ZpZS5WZXJzaW9uLFxuXHR9XG5cblx0Y3R4LCBjYW5jZWwgOj0gY29udGV4dC5XaXRoVGltZW91dChjb250ZXh0LkJhY2tncm91bmQoKSwgMyp0aW1lLlNlY29uZClcblx0ZGVmZXIgY2FuY2VsKClcblxuXHRlcnIgOj0gbS5EQi5RdWVyeVJvd0NvbnRleHQoY3R4LCBxdWVyeSwgYXJncy4uLikuU2NhbigmbW92aWUuVmVyc2lvbilcblxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRzd2l0Y2gge1xuXHRcdGNhc2UgZXJyb3JzLklzKGVyciwgc3FsLkVyck5vUm93cyk6XG5cdFx0XHRyZXR1cm4gRXJyRWRpdENvbmZsaWN0XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiBlcnJcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbmlsXG59XG5cbmZ1bmMgKG0gTW92aWVNb2RlbCkgRGVsZXRlKGlkIGludDY0KSBlcnJvciB7XG5cdGlmIGlkIDwgMSB7XG5cdFx0cmV0dXJuIEVyclJlY29yZE5vdEZvdW5kXG5cdH1cblxuXHRxdWVyeSA6PSBgREVMRVRFIEZST00gbW92aWVzIFdIRVJFIGlkID0gJDFgXG5cblx0Y3R4LCBjYW5jZWwgOj0gY29udGV4dC5XaXRoVGltZW91dChjb250ZXh0LkJhY2tncm91bmQoKSwgMyp0aW1lLlNlY29uZClcblx0ZGVmZXIgY2FuY2VsKClcblxuXHRyZXN1bHQsIGVyciA6PSBtLkRCLkV4ZWNDb250ZXh0KGN0eCwgcXVlcnksIGlkKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gZXJyXG5cdH1cblx0cm93c0FmZmVjdGVkLCBlcnIgOj0gcmVzdWx0LlJvd3NBZmZlY3RlZCgpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBlcnJcblx0fVxuXG5cdGlmIHJvd3NBZmZlY3RlZCA9PSAwIHtcblx0XHRyZXR1cm4gRXJyUmVjb3JkTm90Rm91bmRcblx0fVxuXG5cdHJldHVybiBuaWxcbn1cbi4uLlxuUGF0aDogY21kL2FwaS9oZWxwZXJzLmdvXG5wYWNrYWdlIG1haW5cblxuaW1wb3J0IChcblx0XCJlbmNvZGluZy9qc29uXCJcblx0XCJlcnJvcnNcIlxuXHRcImZtdFwiXG5cdFwiZ3JlZW5saWdodC50dW5kZW9zYm9ybmUvaW50ZXJuYWwvdmFsaWRhdG9yXCJcblx0XCJpb1wiXG5cdFwibmV0L2h0dHBcIlxuXHRcIm5ldC91cmxcIlxuXHRcInN0cmNvbnZcIlxuXHRcInN0cmluZ3NcIlxuXG5cdFwibWFwc1wiXG5cblx0XCJnaXRodWIuY29tL2p1bGllbnNjaG1pZHQvaHR0cHJvdXRlclwiXG4pXG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJlYWRJRFBhcmFtKHIgKmh0dHAuUmVxdWVzdCkgKGludDY0LCBlcnJvcikge1xuXHRwYXJhbXMgOj0gaHR0cHJvdXRlci5QYXJhbXNGcm9tQ29udGV4dChyLkNvbnRleHQoKSlcblxuXHRpZCwgZXJyIDo9IHN0cmNvbnYuUGFyc2VJbnQocGFyYW1zLkJ5TmFtZShcImlkXCIpLCAxMCwgNjQpXG5cdGlmIGVyciAhPSBuaWwgfHwgaWQgPCAxIHtcblx0XHRyZXR1cm4gMCwgZXJyb3JzLk5ldyhcImludmFsaWQgaWQgcGFyYW1ldGVyXCIpXG5cdH1cblx0cmV0dXJuIGlkLCBuaWxcbn1cblxudHlwZSBlbnZlbG9wZSBtYXBbc3RyaW5nXWludGVyZmFjZXt9XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHdyaXRlSlNPTih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHN0YXR1cyBpbnQsIGRhdGEgZW52ZWxvcGUsIGhlYWRlcnMgaHR0cC5IZWFkZXIpIGVycm9yIHtcblx0anMsIGVyciA6PSBqc29uLk1hcnNoYWxJbmRlbnQoZGF0YSwgXCJcIiwgXCJcXHRcIilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0cmV0dXJuIGVyclxuXHR9XG5cblx0anMgPSBhcHBlbmQoanMsICdcXG4nKVxuXG5cdG1hcHMuQ29weSh3LkhlYWRlcigpLCBoZWFkZXJzKVxuXG5cdHcuSGVhZGVyKCkuU2V0KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxuXHR3LldyaXRlSGVhZGVyKHN0YXR1cylcblx0dy5Xcml0ZShqcylcblx0cmV0dXJuIG5pbFxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSByZWFkSlNPTih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCwgZHN0IGludGVyZmFjZXt9KSBlcnJvciB7XG5cblx0bWF4Qnl0ZXMgOj0gMV8wNDhfNTc2XG5cdHIuQm9keSA9IGh0dHAuTWF4Qnl0ZXNSZWFkZXIodywgci5Cb2R5LCBpbnQ2NChtYXhCeXRlcykpXG5cblx0ZGVjIDo9IGpzb24uTmV3RGVjb2RlcihyLkJvZHkpXG5cdGRlYy5EaXNhbGxvd1Vua25vd25GaWVsZHMoKVxuXG5cdGVyciA6PSBkZWMuRGVjb2RlKGRzdClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0dmFyIHN5bnRheEVycm9yICpqc29uLlN5bnRheEVycm9yXG5cdFx0dmFyIHVubWFyc2hhbFR5cGVFcnJvciAqanNvbi5Vbm1hcnNoYWxUeXBlRXJyb3Jcblx0XHR2YXIgaW52YWxpZFVubWFyc2hhbEVycm9yICpqc29uLkludmFsaWRVbm1hcnNoYWxFcnJvclxuXG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5BcyhlcnIsICZzeW50YXhFcnJvcik6XG5cdFx0XHRyZXR1cm4gZm10LkVycm9yZihcImJvZHkgY29udGFpbnMgYmFkbHktZm9ybWVkIEpTT04gKGF0IGNoYXJhY3RlciAlZClcIiwgc3ludGF4RXJyb3IuT2Zmc2V0KVxuXG5cdFx0Y2FzZSBlcnJvcnMuSXMoZXJyLCBpby5FcnJVbmV4cGVjdGVkRU9GKTpcblx0XHRcdHJldHVybiBlcnJvcnMuTmV3KFwiYm9keSBjb250YWlucyBiYWRseS1mb3JtZWQgSlNPTlwiKVxuXG5cdFx0Y2FzZSBlcnJvcnMuQXMoZXJyLCAmdW5tYXJzaGFsVHlwZUVycm9yKTpcblx0XHRcdGlmIHVubWFyc2hhbFR5cGVFcnJvci5GaWVsZCAhPSBcIlwiIHtcblx0XHRcdFx0cmV0dXJuIGZtdC5FcnJvcmYoXCJib2R5IGNvbnRhaW5zIGluY29ycmVjdCBKU09OIHR5cGUgZm9yIGZpZWxkICVxXCIsIHVubWFyc2hhbFR5cGVFcnJvci5GaWVsZClcblx0XHRcdH1cblx0XHRcdHJldHVybiBmbXQuRXJyb3JmKFwiYm9keSBjb250YWlucyBpbmNvcnJlY3QgSlNPTiB0eXBlIChhdCBjaGFyYWN0ZXIgJWQpXCIsIHVubWFyc2hhbFR5cGVFcnJvci5PZmZzZXQpXG5cdFx0Y2FzZSBlcnJvcnMuSXMoZXJyLCBpby5FT0YpOlxuXHRcdFx0cmV0dXJuIGVycm9ycy5OZXcoXCJib2R5IG11c3Qgbm90IGJlIGVtcHR5XCIpXG5cblx0XHRjYXNlIHN0cmluZ3MuSGFzUHJlZml4KGVyci5FcnJvcigpLCBcImpzb246IHVua25vd24gZmllbGQgXCIpOlxuXHRcdFx0ZmllbGROYW1lIDo9IHN0cmluZ3MuVHJpbVByZWZpeChlcnIuRXJyb3IoKSwgXCJqc29uOiB1bmtub3duIGZpZWxkXCIpXG5cblx0XHRcdHJldHVybiBmbXQuRXJyb3JmKFwiYm9keSBjb250YWlucyB1bmtub3duIGtleSAlc1wiLCBmaWVsZE5hbWUpXG5cblx0XHRjYXNlIGVyci5FcnJvcigpID09IFwiaHR0cDogcmVxdWVzdCBib2R5IHRvbyBsYXJnZVwiOlxuXHRcdFx0cmV0dXJuIGZtdC5FcnJvcmYoXCJib2R5IG11c3Qgbm90IGJlIGxhcmdlciB0aGFuICVkIGJ5dGVzXCIsIG1heEJ5dGVzKVxuXHRcdGNhc2UgZXJyb3JzLkFzKGVyciwgJmludmFsaWRVbm1hcnNoYWxFcnJvcik6XG5cdFx0XHRwYW5pYyhlcnIpXG5cblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIGVyclxuXHRcdH1cblx0fVxuXG5cdGVyciA9IGRlYy5EZWNvZGUoJnN0cnVjdHt9e30pXG5cdGlmIGVyciAhPSBpby5FT0Yge1xuXHRcdHJldHVybiBlcnJvcnMuTmV3KFwiYm9keSBtdXN0IG9ubHkgY29udGFpbiBhIHNpbmdsZSBKU09OIHZhbHVlXCIpXG5cdH1cblxuXHRyZXR1cm4gbmlsXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJlYWRTdHJpbmcocXMgdXJsLlZhbHVlcywga2V5IHN0cmluZywgZGVmYXVsdFZhbHVlIHN0cmluZykgc3RyaW5nIHtcblx0cyA6PSBxcy5HZXQoa2V5KVxuXG5cdGlmIHMgPT0gXCJcIiB7XG5cdFx0cmV0dXJuIGRlZmF1bHRWYWx1ZVxuXHR9XG5cblx0cmV0dXJuIHNcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgcmVhZENTVihxcyB1cmwuVmFsdWVzLCBrZXkgc3RyaW5nLCBkZWZhdWx0VmFsdWUgW11zdHJpbmcpIFtdc3RyaW5nIHtcblx0Y3N2IDo9IHFzLkdldChrZXkpXG5cblx0aWYgY3N2ID09IFwiXCIge1xuXHRcdHJldHVybiBkZWZhdWx0VmFsdWVcblx0fVxuXG5cdHJldHVybiBzdHJpbmdzLlNwbGl0KGNzdiwgXCIsXCIpXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJlYWRJbnQocXMgdXJsLlZhbHVlcywga2V5IHN0cmluZywgZGVmYXVsdFZhbHVlIGludCwgdiAqdmFsaWRhdG9yLlZhbGlkYXRvcikgaW50IHtcblx0cyA6PSBxcy5HZXQoa2V5KVxuXG5cdGlmIHMgPT0gXCJcIiB7XG5cdFx0cmV0dXJuIGRlZmF1bHRWYWx1ZVxuXHR9XG5cblx0aSwgZXJyIDo9IHN0cmNvbnYuQXRvaShzKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHR2LkFkZEVycm9yKGtleSwgXCJtdXN0IGJlIGFuIGludGVnZXIgdmFsdWVcIilcblx0XHRyZXR1cm4gZGVmYXVsdFZhbHVlXG5cdH1cblxuXHRyZXR1cm4gaVxufVxuLi4uXG5QYXRoOiBjbWQvYXBpL3JvdXRlcy5nb1xucGFja2FnZSBtYWluXG5cbmltcG9ydCAoXG5cdFwibmV0L2h0dHBcIlxuXG5cdFwiZ2l0aHViLmNvbS9qdWxpZW5zY2htaWR0L2h0dHByb3V0ZXJcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSByb3V0ZXMoKSAqaHR0cHJvdXRlci5Sb3V0ZXIge1xuXHRyb3V0ZXIgOj0gaHR0cHJvdXRlci5OZXcoKVxuXG5cdHJvdXRlci5Ob3RGb3VuZCA9IGh0dHAuSGFuZGxlckZ1bmMoYXBwLm5vdEZvdW5kUmVzcG9uc2UpXG5cdHJvdXRlci5NZXRob2ROb3RBbGxvd2VkID0gaHR0cC5IYW5kbGVyRnVuYyhhcHAubWV0aG9kTm90QWxsb3dlZFJlc3BvbnNlKVxuXG5cdHJvdXRlci5IYW5kbGVyRnVuYyhodHRwLk1ldGhvZEdldCwgXCIvdjEvaGVhbHRoY2hlY2tcIiwgYXBwLmhlYWx0aGNoZWNrSGFuZGxlcilcblx0cm91dGVyLkhhbmRsZXJGdW5jKGh0dHAuTWV0aG9kUG9zdCwgXCIvdjEvbW92aWVzXCIsIGFwcC5jcmVhdGVNb3ZpZUhhbmRsZXIpXG5cdHJvdXRlci5IYW5kbGVyRnVuYyhodHRwLk1ldGhvZEdldCwgXCIvdjEvbW92aWVzLzppZFwiLCBhcHAuc2hvd01vdmllSGFuZGxlcilcblx0cm91dGVyLkhhbmRsZXJGdW5jKGh0dHAuTWV0aG9kUGF0Y2gsIFwiL3YxL21vdmllcy86aWRcIiwgYXBwLnVwZGF0ZU1vdmllSGFuZGxlcilcblx0cm91dGVyLkhhbmRsZXJGdW5jKGh0dHAuTWV0aG9kRGVsZXRlLCBcIi92MS9tb3ZpZXMvOmlkXCIsIGFwcC5kZWxldGVNb3ZpZUhhbmRsZXIpXG5cdHJldHVybiByb3V0ZXJcbn1cbi4uLlxuUGF0aDogY21kL2FwaS9oZWFsdGhjaGVjay5nb1xucGFja2FnZSBtYWluXG5cbmltcG9ydCAoXG5cdFwibmV0L2h0dHBcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBoZWFsdGhjaGVja0hhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblxuXHRlbnYgOj0gZW52ZWxvcGV7XG5cdFx0XCJzdGF0dXNcIjogXCJhdmFpbGFibGVcIixcblx0XHRcInN5c3RlbV9pbmZvXCI6IG1hcFtzdHJpbmddc3RyaW5ne1xuXHRcdFx0XCJlbnZpcm9ubWVudFwiOiBhcHAuY29uZmlnLmVudixcblx0XHRcdFwidmVyc2lvblwiOiAgICAgdmVyc2lvbixcblx0XHR9LFxuXHR9XG5cblx0ZXJyIDo9IGFwcC53cml0ZUpTT04odywgaHR0cC5TdGF0dXNPSywgZW52LCBuaWwpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5sb2dnZXIuUHJpbnRsbihlcnIpXG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHR9XG5cbn1cbi4uLlxuUGF0aDogY21kL2FwaS9lcnJvcnMuZ29cbnBhY2thZ2UgbWFpblxuXG5pbXBvcnQgKFxuXHRcImZtdFwiXG5cdFwibmV0L2h0dHBcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBsb2dFcnJvcihyICpodHRwLlJlcXVlc3QsIGVyciBlcnJvcikge1xuXHRhcHAubG9nZ2VyLlByaW50bG4oZXJyKVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBlcnJvclJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBzdGF0dXMgaW50LCBtZXNzYWdlIGludGVyZmFjZXt9KSB7XG5cblx0ZW52IDo9IGVudmVsb3Ble1wiZXJyb3JcIjogbWVzc2FnZX1cblxuXHRlcnIgOj0gYXBwLndyaXRlSlNPTih3LCBzdGF0dXMsIGVudiwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAubG9nRXJyb3IociwgZXJyKVxuXHRcdHcuV3JpdGVIZWFkZXIoNTAwKVxuXHR9XG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHNlcnZlckVycm9yUmVzcG9uc2UodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QsIGVyciBlcnJvcikge1xuXHRhcHAubG9nRXJyb3IociwgZXJyKVxuXG5cdG1lc3NhZ2UgOj0gXCJ0aGUgc2VydmVyIGVuY291bnRlcmVkIGEgcHJvYmxlbSBhbmQgY291bGQgbm90IHByb2Nlc3MgeW91ciByZXF1ZXN0XCJcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNJbnRlcm5hbFNlcnZlckVycm9yLCBtZXNzYWdlKVxuXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIG5vdEZvdW5kUmVzcG9uc2UodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblx0bWVzc2FnZSA6PSBcInRoZSByZXF1ZXN0ZWQgcmVzb3VyY2UgY291bGQgbm90IGJlIGZvdW5kXCJcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNOb3RGb3VuZCwgbWVzc2FnZSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgbWV0aG9kTm90QWxsb3dlZFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdG1lc3NhZ2UgOj0gZm10LlNwcmludGYoXCJ0aGUgJXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgcmVzb3VyY2VcIiwgci5NZXRob2QpXG5cdGFwcC5lcnJvclJlc3BvbnNlKHcsIHIsIGh0dHAuU3RhdHVzTWV0aG9kTm90QWxsb3dlZCwgbWVzc2FnZSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgYmFkUmVxdWVzdFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBlcnIgZXJyb3IpIHtcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNCYWRSZXF1ZXN0LCBlcnIuRXJyb3IoKSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgZmFpbGVkVmFsaWRhdGlvblJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBlcnJvcnMgbWFwW3N0cmluZ11zdHJpbmcpIHtcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNVbnByb2Nlc3NhYmxlRW50aXR5LCBlcnJvcnMpXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIGVkaXRDb25mbGljdFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdG1lc3NhZ2UgOj0gXCJ1bmFibGUgdG8gdXBkYXRlIHRoZSByZWNvcmQgZHVlIHRvIGVkaXQgY29uZmxpY3QsIHBsZWFzZSB0cnkgYWdhaW5cIlxuXG5cdGFwcC5lcnJvclJlc3BvbnNlKHcsIHIsIGh0dHAuU3RhdHVzQ29uZmxpY3QsIG1lc3NhZ2UpXG59XG4uLi5cblBhdGg6IGNtZC9hcGkvbWFpbi5nb1xucGFja2FnZSBtYWluXG5cbmltcG9ydCAoXG5cdFwiY29udGV4dFwiXG5cdFwiZGF0YWJhc2Uvc3FsXCJcblx0XCJmbGFnXCJcblx0XCJmbXRcIlxuXHRcImdyZWVubGlnaHQudHVuZGVvc2Jvcm5lL2ludGVybmFsL2RhdGFcIlxuXHRcImxvZ1wiXG5cdFwibmV0L2h0dHBcIlxuXHRcIm9zXCJcblx0XCJ0aW1lXCJcblxuXHRfIFwiZ2l0aHViLmNvbS9saWIvcHFcIlxuKVxuXG5jb25zdCB2ZXJzaW9uID0gXCIxLjAuMFwiXG5cbnR5cGUgY29uZmlnIHN0cnVjdCB7XG5cdHBvcnQgaW50XG5cdGVudiAgc3RyaW5nXG5cdGRiICAgc3RydWN0IHtcblx0XHRkc24gICAgICAgICAgc3RyaW5nXG5cdFx0bWF4T3BlbkNvbm5zIGludFxuXHRcdG1heElkbGVDb25ucyBpbnRcblx0XHRtYXhJZGxlVGltZSAgc3RyaW5nXG5cdH1cbn1cblxudHlwZSBhcHBsaWNhdGlvbiBzdHJ1Y3Qge1xuXHRjb25maWcgY29uZmlnXG5cdGxvZ2dlciAqbG9nLkxvZ2dlclxuXHRtb2RlbHMgZGF0YS5Nb2RlbHNcbn1cblxuZnVuYyBtYWluKCkge1xuXG5cdHZhciBjZmcgY29uZmlnXG5cblx0ZmxhZy5JbnRWYXIoJmNmZy5wb3J0LCBcInBvcnRcIiwgNDAwMCwgXCJBUEkgc2VydmVyIHBvcnRcIilcblx0ZmxhZy5TdHJpbmdWYXIoJmNmZy5lbnYsIFwiZW52XCIsIFwiZGV2ZWxvcG1lbnRcIiwgXCJFbnZpcm9ubWVudCAoZGV2ZWxvcG1lbnR8c3RhZ2luZ3xwcm9kdWN0aW9uKVwiKVxuXG5cdGZsYWcuU3RyaW5nVmFyKCZjZmcuZGIuZHNuLCBcImRiLWRzblwiLCBvcy5HZXRlbnYoXCJHUkVFTkxJR0hUX0RCX0RTTlwiKSwgXCJQb3N0Z3JlU1FMIERTTlwiKVxuXG5cdGZsYWcuSW50VmFyKCZjZmcuZGIubWF4T3BlbkNvbm5zLCBcImRiLW1heC1vcGVuLWNvbm5zXCIsIDI1LCBcIlBvc3RncmVTUUwgbWF4IG9wZW4gY29ubmVjdGlvbnNcIilcblxuXHRmbGFnLkludFZhcigmY2ZnLmRiLm1heElkbGVDb25ucywgXCJkYi1tYXgtaWRsZS1jb25uc1wiLCAyNSwgXCJQb3N0Z3JlU1FMIG1heCBpZGxlIGNvbm5lY3Rpb25zXCIpXG5cblx0ZmxhZy5TdHJpbmdWYXIoJmNmZy5kYi5tYXhJZGxlVGltZSwgXCJkYi1tYXgtaWRsZS10aW1lXCIsIFwiMTVtXCIsIFwiUG9zdGdyZVNRTCBtYXggY29ubmVjdGlvbiBpZGxlIHRpbWVcIilcblx0ZmxhZy5QYXJzZSgpXG5cblx0bG9nZ2VyIDo9IGxvZy5OZXcob3MuU3Rkb3V0LCBcIlwiLCBsb2cuTGRhdGV8bG9nLkx0aW1lKVxuXG5cdGRiLCBlcnIgOj0gb3BlbkRCKGNmZylcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0bG9nZ2VyLkZhdGFsKGVycilcblx0fVxuXG5cdGRlZmVyIGRiLkNsb3NlKClcblxuXHRsb2dnZXIuUHJpbnRmKFwiZGF0YWJhc2UgY29ubmVjdGlvbiBwb29sIGVzdGFibGlzaGVkXCIpXG5cblx0YXBwIDo9ICZhcHBsaWNhdGlvbntcblx0XHRjb25maWc6IGNmZyxcblx0XHRsb2dnZXI6IGxvZ2dlcixcblx0XHRtb2RlbHM6IGRhdGEuTmV3TW9kZWxzKGRiKSxcblx0fVxuXG5cdHNydiA6PSAmaHR0cC5TZXJ2ZXJ7XG5cdFx0QWRkcjogICAgICAgICBmbXQuU3ByaW50ZihcIjolZFwiLCBjZmcucG9ydCksXG5cdFx0SGFuZGxlcjogICAgICBhcHAucm91dGVzKCksXG5cdFx0SWRsZVRpbWVvdXQ6ICB0aW1lLk1pbnV0ZSxcblx0XHRSZWFkVGltZW91dDogIDEwICogdGltZS5TZWNvbmQsXG5cdFx0V3JpdGVUaW1lb3V0OiAzMCAqIHRpbWUuU2Vjb25kLFxuXHR9XG5cblx0bG9nZ2VyLlByaW50ZihcInN0YXJ0aW5nICVzIHNlcnZlciBvbiAlc1wiLCBjZmcuZW52LCBzcnYuQWRkcilcblx0ZXJyID0gc3J2Lkxpc3RlbkFuZFNlcnZlKClcblx0bG9nZ2VyLkZhdGFsKGVycilcbn1cblxuZnVuYyBvcGVuREIoY2ZnIGNvbmZpZykgKCpzcWwuREIsIGVycm9yKSB7XG5cblx0ZGIsIGVyciA6PSBzcWwuT3BlbihcInBvc3RncmVzXCIsIGNmZy5kYi5kc24pXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBuaWwsIGVyclxuXHR9XG5cblx0ZGIuU2V0TWF4T3BlbkNvbm5zKGNmZy5kYi5tYXhPcGVuQ29ubnMpXG5cblx0ZGIuU2V0TWF4SWRsZUNvbm5zKGNmZy5kYi5tYXhJZGxlQ29ubnMpXG5cblx0ZHVyYXRpb24sIGVyciA6PSB0aW1lLlBhcnNlRHVyYXRpb24oY2ZnLmRiLm1heElkbGVUaW1lKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gbmlsLCBlcnJcblx0fVxuXHRkYi5TZXRDb25uTWF4SWRsZVRpbWUoZHVyYXRpb24pXG5cblx0Y3R4LCBjYW5jZWwgOj0gY29udGV4dC5XaXRoVGltZW91dChjb250ZXh0LkJhY2tncm91bmQoKSwgNSp0aW1lLlNlY29uZClcblx0ZGVmZXIgY2FuY2VsKClcblxuXHRlcnIgPSBkYi5QaW5nQ29udGV4dChjdHgpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBuaWwsIGVyclxuXHR9XG5cblx0cmV0dXJuIGRiLCBuaWxcbn1cbi4uLlxuUGF0aDogaW50ZXJuYWwvZGF0YS9tb2RlbHMuZ29cbnBhY2thZ2UgZGF0YVxuXG5pbXBvcnQgKFxuXHRcImRhdGFiYXNlL3NxbFwiXG5cdFwiZXJyb3JzXCJcbilcblxudmFyIChcblx0RXJyUmVjb3JkTm90Rm91bmQgPSBlcnJvcnMuTmV3KFwicmVjb3JkIG5vdCBmb3VuZFwiKVxuXHRFcnJFZGl0Q29uZmxpY3QgICA9IGVycm9ycy5OZXcoXCJlZGl0IGNvbmZsaWN0XCIpXG4pXG5cbnR5cGUgTW9kZWxzIHN0cnVjdCB7XG5cdE1vdmllcyBNb3ZpZU1vZGVsXG59XG5cbmZ1bmMgTmV3TW9kZWxzKGRiICpzcWwuREIpIE1vZGVscyB7XG5cdHJldHVybiBNb2RlbHN7XG5cdFx0TW92aWVzOiBNb3ZpZU1vZGVse0RCOiBkYn0sXG5cdH1cbn1cbi4uLlxuUGF0aDogbWlncmF0aW9ucy8wMDAwMDFfY3JlYXRlX21vdmllc190YWJsZS51cC5zcWxcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG1vdmllcyAoXG4gICAgaWQgYmlnc2VyaWFsIFBSSU1BUlkgS0VZLFxuICAgIGNyZWF0ZWRfYXQgdGltZXN0YW1wKDApIHdpdGggdGltZSB6b25lIE5PVCBOVUxMIERFRkFVTFQgTk9XKCksXG4gICAgdGl0bGUgdGV4dCBOT1QgTlVMTCxcbiAgICB5ZWFyIGludGVnZXIgTk9UIE5VTEwsXG4gICAgcnVudGltZSBpbnRlZ2VyIE5PVCBOVUxMLFxuICAgIGdlbnJlcyB0ZXh0W10gTk9UIE5VTEwsXG4gICAgdmVyc2lvbiBpbnRlZ2VyIE5PVCBOVUxMIERFRkFVTFQgMVxuKTtcbi4uLlxuUGF0aDogbWlncmF0aW9ucy8wMDAwMDFfY3JlYXRlX21vdmllc190YWJsZS5kb3duLnNxbFxuRFJPUCBUQUJMRSBJRiBFWElTVFMgbW92aWVzOy4uLlxuUGF0aDogbWlncmF0aW9ucy8wMDAwMDJfYWRkX21vdmllc19jaGVja19jb25zdHJhaW50cy51cC5zcWxcbkFMVEVSIFRBQkxFIG1vdmllcyBBREQgQ09OU1RSQUlOVCBtb3ZpZXNfcnVudGltZV9jaGVjayBDSEVDSyAocnVudGltZSA+PSAwKTtcblxuQUxURVIgVEFCTEUgbW92aWVzIEFERCBDT05TVFJBSU5UIG1vdmllc195ZWFyX2NoZWNrIENIRUNLICh5ZWFyIEJFVFdFRU4gMTg4OCBBTkQgZGF0ZV9wYXJ0KCd5ZWFyJywgbm93KCkpKTtcblxuQUxURVIgVEFCTEUgbW92aWVzIEFERCBDT05TVFJBSU5UIGdlbnJlc19sZW5ndGhfY2hlY2sgQ0hFQ0sgKGFycmF5X2xlbmd0aChnZW5yZXMsIDEpIEJFVFdFRU4gMSBBTkQgNSk7Li4uXG5QYXRoOiBpbnRlcm5hbC9kYXRhL2ZpbHRlcnMuZ29cbnBhY2thZ2UgZGF0YVxuLi4uXG5QYXRoOiBtaWdyYXRpb25zLzAwMDAwMl9hZGRfbW92aWVzX2NoZWNrX2NvbnN0cmFpbnRzLmRvd24uc3FsXG5BTFRFUiBUQUJMRSBtb3ZpZXMgRFJPUCBDT05TVFJBSU5UIElGIEVYSVNUUyBtb3ZpZXNfcnVudGltZV9jaGVjaztcblxuQUxURVIgVEFCTEUgbW92aWVzIERST1AgQ09OU1RSQUlOVCBJRiBFWElTVFMgbW92aWVzX3llYXJfY2hlY2s7XG5cbkFMVEVSIFRBQkxFIG1vdmllcyBEUk9QIENPTlNUUkFJTlQgSUYgRVhJU1RTIGdlbnJlc19sZW5ndGhfY2hlY2s7Li4uXG5QYXRoOiBpbnRlcm5hbC92YWxpZGF0b3IvdmFsaWRhdG9yLmdvXG5wYWNrYWdlIHZhbGlkYXRvclxuXG5pbXBvcnQgKFxuXHRcInJlZ2V4cFwiXG5cdFwic2xpY2VzXCJcbilcblxudmFyIChcblx0RW1haWxSWCA9IHJlZ2V4cC5NdXN0Q29tcGlsZShcIl5bYS16QS1aMC05LiEjJCUmJyorXFxcXC89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFxcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiRcIilcbilcblxudHlwZSBWYWxpZGF0b3Igc3RydWN0IHtcblx0RXJyb3JzIG1hcFtzdHJpbmddc3RyaW5nXG59XG5cbmZ1bmMgTmV3KCkgKlZhbGlkYXRvciB7XG5cdHJldHVybiAmVmFsaWRhdG9ye0Vycm9yczogbWFrZShtYXBbc3RyaW5nXXN0cmluZyl9XG59XG5cbmZ1bmMgKHYgKlZhbGlkYXRvcikgVmFsaWQoKSBib29sIHtcblx0cmV0dXJuIGxlbih2LkVycm9ycykgPT0gMFxufVxuXG5mdW5jICh2ICpWYWxpZGF0b3IpIEFkZEVycm9yKGtleSwgbWVzc2FnZSBzdHJpbmcpIHtcblx0aWYgXywgZXhpc3RzIDo9IHYuRXJyb3JzW2tleV07ICFleGlzdHMge1xuXHRcdHYuRXJyb3JzW2tleV0gPSBtZXNzYWdlXG5cdH1cbn1cblxuZnVuYyAodiAqVmFsaWRhdG9yKSBDaGVjayhvayBib29sLCBrZXksIG1lc3NhZ2Ugc3RyaW5nKSB7XG5cdGlmICFvayB7XG5cdFx0di5BZGRFcnJvcihrZXksIG1lc3NhZ2UpXG5cdH1cbn1cblxuZnVuYyBJbih2YWx1ZSBzdHJpbmcsIGxpc3QgLi4uc3RyaW5nKSBib29sIHtcblx0cmV0dXJuIHNsaWNlcy5Db250YWlucyhsaXN0LCB2YWx1ZSlcbn1cblxuZnVuYyBNYXRjaGVzKHZhbHVlIHN0cmluZywgcnggKnJlZ2V4cC5SZWdleHApIGJvb2wge1xuXHRyZXR1cm4gcnguTWF0Y2hTdHJpbmcodmFsdWUpXG59XG5cbmZ1bmMgVW5pcXVlKHZhbHVlcyBbXXN0cmluZykgYm9vbCB7XG5cdHVuaXF1ZVZhbHVlcyA6PSBtYWtlKG1hcFtzdHJpbmddYm9vbClcblxuXHRmb3IgXywgdmFsdWUgOj0gcmFuZ2UgdmFsdWVzIHtcblx0XHR1bmlxdWVWYWx1ZXNbdmFsdWVdID0gdHJ1ZVxuXHR9XG5cblx0cmV0dXJuIGxlbih2YWx1ZXMpID09IGxlbih1bmlxdWVWYWx1ZXMpXG59XG4uLi5cblBhdGg6IGdvLm1vZFxubW9kdWxlIGdyZWVubGlnaHQudHVuZGVvc2Jvcm5lXG5cbmdvIDEuMjMuNVxuXG5yZXF1aXJlIGdpdGh1Yi5jb20vanVsaWVuc2NobWlkdC9odHRwcm91dGVyIHYxLjMuMFxuXG5yZXF1aXJlIGdpdGh1Yi5jb20vbGliL3BxIHYxLjEwLjAgLy8gaW5kaXJlY3Rcbi4uLlxuUGF0aDogaW50ZXJuYWwvZGF0YS9ydW50aW1lLmdvXG5wYWNrYWdlIGRhdGFcblxuaW1wb3J0IChcblx0XCJlcnJvcnNcIlxuXHRcImZtdFwiXG5cdFwic3RyY29udlwiXG5cdFwic3RyaW5nc1wiXG4pXG5cbnZhciBFcnJJbnZhbGlkUnVudGltZUZvcm1hdCA9IGVycm9ycy5OZXcoXCJpbnZhbGlkIHJ1bnRpbWUgZm9ybWF0XCIpXG5cbnR5cGUgUnVudGltZSBpbnQzMlxuXG5mdW5jIChyIFJ1bnRpbWUpIE1hcnNoYWxKU09OKCkgKFtdYnl0ZSwgZXJyb3IpIHtcblx0anNvblZhbHVlIDo9IGZtdC5TcHJpbnRmKFwiJWQgbWluc1wiLCByKVxuXG5cdHF1b3RlZEpTT05WYWx1ZSA6PSBzdHJjb252LlF1b3RlKGpzb25WYWx1ZSlcblxuXHRyZXR1cm4gW11ieXRlKHF1b3RlZEpTT05WYWx1ZSksIG5pbFxufVxuXG5mdW5jIChyICpSdW50aW1lKSBVbm1hcnNoYWxKU09OKGpzb25WYWx1ZSBbXWJ5dGUpIGVycm9yIHtcblxuXHR1bnF1b3RlZEpTT05WYWx1ZSwgZXJyIDo9IHN0cmNvbnYuVW5xdW90ZShzdHJpbmcoanNvblZhbHVlKSlcblxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gRXJySW52YWxpZFJ1bnRpbWVGb3JtYXRcblx0fVxuXG5cdHBhcnRzIDo9IHN0cmluZ3MuU3BsaXQodW5xdW90ZWRKU09OVmFsdWUsIFwiIFwiKVxuXG5cdGlmIGxlbihwYXJ0cykgIT0gMiB8fCBwYXJ0c1sxXSAhPSBcIm1pbnNcIiB7XG5cdFx0cmV0dXJuIEVyckludmFsaWRSdW50aW1lRm9ybWF0XG5cdH1cblxuXHRpLCBlcnIgOj0gc3RyY29udi5QYXJzZUludChwYXJ0c1swXSwgMTAsIDMyKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gRXJySW52YWxpZFJ1bnRpbWVGb3JtYXRcblx0fVxuXG5cdCpyID0gUnVudGltZShpKVxuXG5cdHJldHVybiBuaWxcbn1cbi4uLlxuUGF0aDogZ28uc3VtXG5naXRodWIuY29tL2p1bGllbnNjaG1pZHQvaHR0cHJvdXRlciB2MS4zLjAgaDE6VTA2MDllOXRnYnNldTNyQklOZXQ5UDQ4QUkvRDNvSnM0ZE43andKT1ExVT1cbmdpdGh1Yi5jb20vanVsaWVuc2NobWlkdC9odHRwcm91dGVyIHYxLjMuMC9nby5tb2QgaDE6SlI2V3RIYisyTFVlOFRDS1kzY1pPeEZ5eU84SVpBYzRSVmN5Y0NDQUtkTT1cbmdpdGh1Yi5jb20vbGliL3BxIHYxLjEwLjAgaDE6Wng1REpGRVlRWGlvOTNrZ1huUTA5ZlhOaVVLc3F2NE9VRXUyVXRHY0IxRT1cbmdpdGh1Yi5jb20vbGliL3BxIHYxLjEwLjAvZ28ubW9kIGgxOkFsVk41eDRFNFQ1NDR0V3pINmhLZmJmUXZtM0hkYk94cm1nZ0ROQVBZOW89XG4uLi5cblBhdGg6IFJFQURNRS5tZFxuIyBncmVlbmxpZ2h0XG4uLi5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjc5OGM4MjY4LWYwOGMtNDJjYi04ZjQ2LWU4MjU3NzVlYzU4ODt0b29sdV92cnR4XzAxTk44SGlreHpXcGg4a21WanhacHR6eSI6eyJyZXF1ZXN0SWQiOiI3OThjODI2OC1mMDhjLTQyY2ItOGY0Ni1lODI1Nzc1ZWM1ODgiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxTk44SGlreHpXcGg4a21WanhacHR6eSIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IGludGVybmFsL2RhdGEvbW92aWVzLmdvXG5wYWNrYWdlIGRhdGFcblxuaW1wb3J0IChcblx0XCJjb250ZXh0XCJcblx0XCJkYXRhYmFzZS9zcWxcIlxuXHRcImVycm9yc1wiXG5cdFwiZ2l0aHViLmNvbS9saWIvcHFcIlxuXHRcInRpbWVcIlxuXG5cdFwiZ3JlZW5saWdodC50dW5kZW9zYm9ybmUvaW50ZXJuYWwvdmFsaWRhdG9yXCJcbilcblxudHlwZSBNb3ZpZSBzdHJ1Y3Qge1xuXHRJRCAgICAgICAgaW50NjQgICAgIGBqc29uOlwiaWRcImBcblx0Q3JlYXRlZEF0IHRpbWUuVGltZSBganNvbjpcIi1cImBcblx0VGl0bGUgICAgIHN0cmluZyAgICBganNvbjpcInRpdGxlXCJgXG5cdFllYXIgICAgICBpbnQzMiAgICAgYGpzb246XCJ5ZWFyLG9taXRlbXB0eVwiYFxuXHRSdW50aW1lICAgUnVudGltZSAgIGBqc29uOlwicnVudGltZSxvbWl0ZW1wdHlcImBcblx0R2VucmVzICAgIFtdc3RyaW5nICBganNvbjpcImdlbnJlcyxvbWl0ZW1wdHlcImBcblx0VmVyc2lvbiAgIGludDMyICAgICBganNvbjpcInZlcnNpb25cImBcbn1cblxuZnVuYyBWYWxpZGF0ZU1vdmllKHYgKnZhbGlkYXRvci5WYWxpZGF0b3IsIG1vdmllICpNb3ZpZSkge1xuXHR2LkNoZWNrKG1vdmllLlRpdGxlICE9IFwiXCIsIFwidGl0bGVcIiwgXCJtdXN0IGJlIHByb3ZpZGVkXCIpXG5cdHYuQ2hlY2sobGVuKG1vdmllLlRpdGxlKSA8PSA1MDAsIFwidGl0bGVcIiwgXCJtdXN0IG5vdCBiZSBtb3JlIHRoYW4gNTAwIGJ5dGVzIGxvbmdcIilcblx0di5DaGVjayhtb3ZpZS5ZZWFyID49IDE4ODgsIFwieWVhclwiLCBcIm11c3QgYmUgZ3JlYXRlciB0aGFuIDE4ODhcIilcblx0di5DaGVjayhtb3ZpZS5ZZWFyIDw9IGludDMyKHRpbWUuTm93KCkuWWVhcigpKSwgXCJ5ZWFyXCIsIFwibXVzdCBub3QgYmUgaW4gdGhlIGZ1dHVyZVwiKVxuXHR2LkNoZWNrKG1vdmllLlJ1bnRpbWUgIT0gMCwgXCJydW50aW1lXCIsIFwibXVzdCBiZSBwcm92aWRlZFwiKVxuXHR2LkNoZWNrKG1vdmllLlJ1bnRpbWUgPiAwLCBcInJ1bnRpbWVcIiwgXCJtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlclwiKVxuXG5cdHYuQ2hlY2sobW92aWUuR2VucmVzICE9IG5pbCwgXCJnZW5yZXNcIiwgXCJtdXN0IGJlIHByb3ZpZGVkXCIpXG5cdHYuQ2hlY2sobGVuKG1vdmllLkdlbnJlcykgPj0gMSwgXCJnZW5yZXNcIiwgXCJtdXN0IGNvbnRhaW4gYXQgbGVhc3QgMSBnZW5yZVwiKVxuXHR2LkNoZWNrKGxlbihtb3ZpZS5HZW5yZXMpIDw9IDUsIFwiZ2VucmVzXCIsIFwibXVzdCBub3QgY29udGFpbiBtb3JlIHRoYW4gNSBnZW5yZXNcIilcblxuXHR2LkNoZWNrKHZhbGlkYXRvci5VbmlxdWUobW92aWUuR2VucmVzKSwgXCJnZW5yZXNcIiwgXCJtdXN0IG5vdCBjb250YWluIGR1cGxpY2F0ZSB2YWx1ZXNcIilcbn1cblxudHlwZSBNb3ZpZU1vZGVsIHN0cnVjdCB7XG5cdERCICpzcWwuREJcbn1cblxuZnVuYyAobSBNb3ZpZU1vZGVsKSBJbnNlcnQobW92aWUgKk1vdmllKSBlcnJvciB7XG5cdHF1ZXJ5IDo9IGBJTlNFUlQgSU5UTyBtb3ZpZXMgKHRpdGxlLCB5ZWFyLCBydW50aW1lLCBnZW5yZXMpXG4gICAgICAgICAgICAgICBWQUxVRVMgKCQxLCAkMiwgJDMsICQ0KVxuICAgICAgICAgICAgICAgUkVUVVJOSU5HIGlkLCBjcmVhdGVkX2F0LCB2ZXJzaW9uYFxuXG5cdGFyZ3MgOj0gW11pbnRlcmZhY2V7fXttb3ZpZS5UaXRsZSwgbW92aWUuWWVhciwgbW92aWUuUnVudGltZSwgcHEuQXJyYXkobW92aWUuR2VucmVzKX1cblxuXHRjdHgsIGNhbmNlbCA6PSBjb250ZXh0LldpdGhUaW1lb3V0KGNvbnRleHQuQmFja2dyb3VuZCgpLCAzKnRpbWUuU2Vjb25kKVxuXHRkZWZlciBjYW5jZWwoKVxuXG5cdHJldHVybiBtLkRCLlF1ZXJ5Um93Q29udGV4dChjdHgsIHF1ZXJ5LCBhcmdzLi4uKS5TY2FuKCZtb3ZpZS5JRCwgJm1vdmllLkNyZWF0ZWRBdCwgJm1vdmllLlZlcnNpb24pXG59XG5cbmZ1bmMgKG0gTW92aWVNb2RlbCkgR2V0KGlkIGludDY0KSAoKk1vdmllLCBlcnJvcikge1xuXHRpZiBpZCA8IDEge1xuXHRcdHJldHVybiBuaWwsIEVyclJlY29yZE5vdEZvdW5kXG5cdH1cblxuXHRxdWVyeSA6PSBgU0VMRUNUIGlkLCBjcmVhdGVkX2F0LCB0aXRsZSwgeWVhciwgcnVudGltZSwgZ2VucmVzLCB2ZXJzaW9uIEZST00gbW92aWVzIFdIRVJFIGlkID0gJDFgXG5cblx0dmFyIG1vdmllIE1vdmllXG5cblx0Y3R4LCBjYW5jZWwgOj0gY29udGV4dC5XaXRoVGltZW91dChjb250ZXh0LkJhY2tncm91bmQoKSwgMyp0aW1lLlNlY29uZClcblxuXHRkZWZlciBjYW5jZWwoKVxuXG5cdGVyciA6PVxuXHRcdG0uREIuUXVlcnlSb3dDb250ZXh0KGN0eCwgcXVlcnksIGlkKS5TY2FuKCZtb3ZpZS5JRCwgJm1vdmllLkNyZWF0ZWRBdCwgJm1vdmllLlRpdGxlLCAmbW92aWUuWWVhciwgJm1vdmllLlJ1bnRpbWUsIHBxLkFycmF5KCZtb3ZpZS5HZW5yZXMpLCAmbW92aWUuVmVyc2lvbilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIHNxbC5FcnJOb1Jvd3MpOlxuXHRcdFx0cmV0dXJuIG5pbCwgRXJyUmVjb3JkTm90Rm91bmRcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIG5pbCwgZXJyXG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuICZtb3ZpZSwgbmlsXG59XG5cbmZ1bmMgKG0gTW92aWVNb2RlbCkgVXBkYXRlKG1vdmllICpNb3ZpZSkgZXJyb3Ige1xuXHRxdWVyeSA6PSBgVVBEQVRFIG1vdmllc1xuIFNFVCB0aXRsZSA9ICQxLCB5ZWFyID0gJDIsIHJ1bnRpbWUgPSAkMywgZ2VucmVzID0gJDQsIHZlcnNpb24gPSB2ZXJzaW9uICsgMSBXSEVSRSAgaWQgPSAkNSBBTkQgdmVyc2lvbiA9ICQ2XG4gUkVUVVJOSU5HIHZlcnNpb25gXG5cblx0YXJncyA6PSBbXWludGVyZmFjZXt9e1xuXHRcdG1vdmllLlRpdGxlLFxuXHRcdG1vdmllLlllYXIsXG5cdFx0bW92aWUuUnVudGltZSxcblx0XHRwcS5BcnJheShtb3ZpZS5HZW5yZXMpLFxuXHRcdG1vdmllLklELFxuXHRcdG1vdmllLlZlcnNpb24sXG5cdH1cblxuXHRjdHgsIGNhbmNlbCA6PSBjb250ZXh0LldpdGhUaW1lb3V0KGNvbnRleHQuQmFja2dyb3VuZCgpLCAzKnRpbWUuU2Vjb25kKVxuXHRkZWZlciBjYW5jZWwoKVxuXG5cdGVyciA6PSBtLkRCLlF1ZXJ5Um93Q29udGV4dChjdHgsIHF1ZXJ5LCBhcmdzLi4uKS5TY2FuKCZtb3ZpZS5WZXJzaW9uKVxuXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHN3aXRjaCB7XG5cdFx0Y2FzZSBlcnJvcnMuSXMoZXJyLCBzcWwuRXJyTm9Sb3dzKTpcblx0XHRcdHJldHVybiBFcnJFZGl0Q29uZmxpY3Rcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIGVyclxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBuaWxcbn1cblxuZnVuYyAobSBNb3ZpZU1vZGVsKSBEZWxldGUoaWQgaW50NjQpIGVycm9yIHtcblx0aWYgaWQgPCAxIHtcblx0XHRyZXR1cm4gRXJyUmVjb3JkTm90Rm91bmRcblx0fVxuXG5cdHF1ZXJ5IDo9IGBERUxFVEUgRlJPTSBtb3ZpZXMgV0hFUkUgaWQgPSAkMWBcblxuXHRjdHgsIGNhbmNlbCA6PSBjb250ZXh0LldpdGhUaW1lb3V0KGNvbnRleHQuQmFja2dyb3VuZCgpLCAzKnRpbWUuU2Vjb25kKVxuXHRkZWZlciBjYW5jZWwoKVxuXG5cdHJlc3VsdCwgZXJyIDo9IG0uREIuRXhlY0NvbnRleHQoY3R4LCBxdWVyeSwgaWQpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBlcnJcblx0fVxuXHRyb3dzQWZmZWN0ZWQsIGVyciA6PSByZXN1bHQuUm93c0FmZmVjdGVkKClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0cmV0dXJuIGVyclxuXHR9XG5cblx0aWYgcm93c0FmZmVjdGVkID09IDAge1xuXHRcdHJldHVybiBFcnJSZWNvcmROb3RGb3VuZFxuXHR9XG5cblx0cmV0dXJuIG5pbFxufVxuLi4uXG5QYXRoOiBjbWQvYXBpL21vdmllcy5nb1xucGFja2FnZSBtYWluXG5cbmltcG9ydCAoXG5cdFwiZXJyb3JzXCJcblx0XCJmbXRcIlxuXHRcImdyZWVubGlnaHQudHVuZGVvc2Jvcm5lL2ludGVybmFsL2RhdGFcIlxuXHRcImdyZWVubGlnaHQudHVuZGVvc2Jvcm5lL2ludGVybmFsL3ZhbGlkYXRvclwiXG5cdFwibmV0L2h0dHBcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBjcmVhdGVNb3ZpZUhhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblxuXHR2YXIgaW5wdXQgc3RydWN0IHtcblx0XHRUaXRsZSAgIHN0cmluZyAgICAgICBganNvbjpcInRpdGxlXCJgXG5cdFx0WWVhciAgICBpbnQzMiAgICAgICAgYGpzb246XCJ5ZWFyXCJgXG5cdFx0UnVudGltZSBkYXRhLlJ1bnRpbWUgYGpzb246XCJydW50aW1lXCJgXG5cdFx0R2VucmVzICBbXXN0cmluZyAgICAgYGpzb246XCJnZW5yZXNcImBcblx0fVxuXG5cdGVyciA6PSBhcHAucmVhZEpTT04odywgciwgJmlucHV0KVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuYmFkUmVxdWVzdFJlc3BvbnNlKHcsIHIsIGVycilcblx0XHRyZXR1cm5cblx0fVxuXG5cdG1vdmllIDo9ICZkYXRhLk1vdmlle1xuXHRcdFRpdGxlOiAgIGlucHV0LlRpdGxlLFxuXHRcdFllYXI6ICAgIGlucHV0LlllYXIsXG5cdFx0UnVudGltZTogaW5wdXQuUnVudGltZSxcblx0XHRHZW5yZXM6ICBpbnB1dC5HZW5yZXMsXG5cdH1cblxuXHR2IDo9IHZhbGlkYXRvci5OZXcoKVxuXG5cdGlmIGRhdGEuVmFsaWRhdGVNb3ZpZSh2LCBtb3ZpZSk7ICF2LlZhbGlkKCkge1xuXHRcdGFwcC5mYWlsZWRWYWxpZGF0aW9uUmVzcG9uc2Uodywgciwgdi5FcnJvcnMpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRlcnIgPSBhcHAubW9kZWxzLk1vdmllcy5JbnNlcnQobW92aWUpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0XHRyZXR1cm5cblx0fVxuXG5cdGhlYWRlcnMgOj0gbWFrZShodHRwLkhlYWRlcilcblx0aGVhZGVycy5TZXQoXCJMb2NhdGlvblwiLCBmbXQuU3ByaW50ZihcIi92MS9tb3ZpZXMvJWRcIiwgbW92aWUuSUQpKVxuXG5cdGVyciA9IGFwcC53cml0ZUpTT04odywgaHR0cC5TdGF0dXNDcmVhdGVkLCBlbnZlbG9wZXtcIm1vdmllXCI6IG1vdmllfSwgaGVhZGVycylcblxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdH1cbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgc2hvd01vdmllSGFuZGxlcih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkge1xuXG5cdGlkLCBlcnIgOj0gYXBwLnJlYWRJRFBhcmFtKHIpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5ub3RGb3VuZFJlc3BvbnNlKHcsIHIpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRtb3ZpZSwgZXJyIDo9IGFwcC5tb2RlbHMuTW92aWVzLkdldChpZClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIGRhdGEuRXJyUmVjb3JkTm90Rm91bmQpOlxuXHRcdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRkZWZhdWx0OlxuXHRcdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdH1cblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC53cml0ZUpTT04odywgaHR0cC5TdGF0dXNPSywgZW52ZWxvcGV7XCJtb3ZpZVwiOiBtb3ZpZX0sIG5pbClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHR9XG5cbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgdXBkYXRlTW92aWVIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdGlkLCBlcnIgOj0gYXBwLnJlYWRJRFBhcmFtKHIpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5ub3RGb3VuZFJlc3BvbnNlKHcsIHIpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRtb3ZpZSwgZXJyIDo9IGFwcC5tb2RlbHMuTW92aWVzLkdldChpZClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIGRhdGEuRXJyUmVjb3JkTm90Rm91bmQpOlxuXHRcdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRkZWZhdWx0OlxuXHRcdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdH1cblx0XHRyZXR1cm5cblx0fVxuXG5cdHZhciBpbnB1dCBzdHJ1Y3Qge1xuXHRcdFRpdGxlICAgKnN0cmluZyAgICAgICBganNvbjpcInRpdGxlXCJgXG5cdFx0WWVhciAgICAqaW50MzIgICAgICAgIGBqc29uOlwieWVhclwiYFxuXHRcdFJ1bnRpbWUgKmRhdGEuUnVudGltZSBganNvbjpcInJ1bnRpbWVcImBcblx0XHRHZW5yZXMgIFtdc3RyaW5nICAgICAgYGpzb246XCJnZW5yZXNcImBcblx0fVxuXG5cdGVyciA9IGFwcC5yZWFkSlNPTih3LCByLCAmaW5wdXQpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5iYWRSZXF1ZXN0UmVzcG9uc2UodywgciwgZXJyKVxuXHRcdHJldHVyblxuXHR9XG5cblx0aWYgaW5wdXQuVGl0bGUgIT0gbmlsIHtcblx0XHRtb3ZpZS5UaXRsZSA9ICppbnB1dC5UaXRsZVxuXHR9XG5cdGlmIGlucHV0LlllYXIgIT0gbmlsIHtcblx0XHRtb3ZpZS5ZZWFyID0gKmlucHV0LlllYXJcblx0fVxuXHRpZiBpbnB1dC5SdW50aW1lICE9IG5pbCB7XG5cdFx0bW92aWUuUnVudGltZSA9ICppbnB1dC5SdW50aW1lXG5cdH1cblx0aWYgaW5wdXQuR2VucmVzICE9IG5pbCB7XG5cdFx0bW92aWUuR2VucmVzID0gaW5wdXQuR2VucmVzXG5cdH1cblxuXHR2IDo9IHZhbGlkYXRvci5OZXcoKVxuXG5cdGlmIGRhdGEuVmFsaWRhdGVNb3ZpZSh2LCBtb3ZpZSk7ICF2LlZhbGlkKCkge1xuXHRcdGFwcC5mYWlsZWRWYWxpZGF0aW9uUmVzcG9uc2Uodywgciwgdi5FcnJvcnMpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRlcnIgPSBhcHAubW9kZWxzLk1vdmllcy5VcGRhdGUobW92aWUpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC53cml0ZUpTT04odywgaHR0cC5TdGF0dXNPSywgZW52ZWxvcGV7XCJtb3ZpZVwiOiBtb3ZpZX0sIG5pbClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHR9XG5cbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgZGVsZXRlTW92aWVIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdGlkLCBlcnIgOj0gYXBwLnJlYWRJRFBhcmFtKHIpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5ub3RGb3VuZFJlc3BvbnNlKHcsIHIpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRlcnIgPSBhcHAubW9kZWxzLk1vdmllcy5EZWxldGUoaWQpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHN3aXRjaCB7XG5cdFx0Y2FzZSBlcnJvcnMuSXMoZXJyLCBkYXRhLkVyclJlY29yZE5vdEZvdW5kKTpcblx0XHRcdGFwcC5ub3RGb3VuZFJlc3BvbnNlKHcsIHIpXG5cdFx0ZGVmYXVsdDpcblx0XHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0XHR9XG5cdFx0cmV0dXJuXG5cdH1cblx0ZXJyID0gYXBwLndyaXRlSlNPTih3LCBodHRwLlN0YXR1c09LLCBlbnZlbG9wZXtcIm1lc3NhZ2VcIjogXCJtb3ZpZSBzdWNjZXNzZnVsbHkgZGVsZXRlZFwifSwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdH1cbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgbGlzdE1vdmllc0hhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblx0dmFyIGlucHV0IHN0cnVjdCB7XG5cdFx0VGl0bGUgICAgc3RyaW5nXG5cdFx0R2VucmVzICAgW11zdHJpbmdcblx0XHRQYWdlICAgICBpbnRcblx0XHRQYWdlU2l6ZSBpbnRcblx0XHRzb3J0ICAgICBzdHJpbmdcblx0fVxuXG5cdHYgOj0gdmFsaWRhdG9yLk5ldygpXG5cblx0cXMgOj0gci5VUkwuUXVlcnkoKVxuXHRpbnB1dC5UaXRsZSA9IGFwcC5yZWFkU3RyaW5nKHFzLCBcInRpdGxlXCIsIFwiXCIpXG5cdGlucHV0LkdlbnJlcyA9IGFwcC5yZWFkQ1NWKHFzLCBcImdlbnJlc1wiLCBbXXN0cmluZ3t9KVxuXHRpbnB1dC5QYWdlID0gYXBwLnJlYWRJbnQocXMsIFwicGFnZVwiLCAxLCB2KVxuXHRpbnB1dC5QYWdlU2l6ZSA9IGFwcC5yZWFkSW50KHFzLCBcInBhZ2Vfc2l6ZVwiLCAyMCwgdilcblx0aW5wdXQuc29ydCA9IGFwcC5yZWFkU3RyaW5nKHFzLCBcInNvcnRcIiwgXCJpZFwiKVxuXG5cdGlmICF2LlZhbGlkKCkge1xuXHRcdGFwcC5mYWlsZWRWYWxpZGF0aW9uUmVzcG9uc2Uodywgciwgdi5FcnJvcnMpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRmbXQuRnByaW50Zih3LCBcIiUrdlxcblwiLCBpbnB1dClcbn1cbi4uLlxuUGF0aDogaW50ZXJuYWwvZGF0YS9maWx0ZXJzLmdvXG5wYWNrYWdlIGRhdGFcbi4uLlxuUGF0aDogbWlncmF0aW9ucy8wMDAwMDJfYWRkX21vdmllc19jaGVja19jb25zdHJhaW50cy51cC5zcWxcbkFMVEVSIFRBQkxFIG1vdmllcyBBREQgQ09OU1RSQUlOVCBtb3ZpZXNfcnVudGltZV9jaGVjayBDSEVDSyAocnVudGltZSA+PSAwKTtcblxuQUxURVIgVEFCTEUgbW92aWVzIEFERCBDT05TVFJBSU5UIG1vdmllc195ZWFyX2NoZWNrIENIRUNLICh5ZWFyIEJFVFdFRU4gMTg4OCBBTkQgZGF0ZV9wYXJ0KCd5ZWFyJywgbm93KCkpKTtcblxuQUxURVIgVEFCTEUgbW92aWVzIEFERCBDT05TVFJBSU5UIGdlbnJlc19sZW5ndGhfY2hlY2sgQ0hFQ0sgKGFycmF5X2xlbmd0aChnZW5yZXMsIDEpIEJFVFdFRU4gMSBBTkQgNSk7Li4uXG5QYXRoOiBpbnRlcm5hbC92YWxpZGF0b3IvdmFsaWRhdG9yLmdvXG5wYWNrYWdlIHZhbGlkYXRvclxuXG5pbXBvcnQgKFxuXHRcInJlZ2V4cFwiXG5cdFwic2xpY2VzXCJcbilcblxudmFyIChcblx0RW1haWxSWCA9IHJlZ2V4cC5NdXN0Q29tcGlsZShcIl5bYS16QS1aMC05LiEjJCUmJyorXFxcXC89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFxcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiRcIilcbilcblxudHlwZSBWYWxpZGF0b3Igc3RydWN0IHtcblx0RXJyb3JzIG1hcFtzdHJpbmddc3RyaW5nXG59XG5cbmZ1bmMgTmV3KCkgKlZhbGlkYXRvciB7XG5cdHJldHVybiAmVmFsaWRhdG9ye0Vycm9yczogbWFrZShtYXBbc3RyaW5nXXN0cmluZyl9XG59XG5cbmZ1bmMgKHYgKlZhbGlkYXRvcikgVmFsaWQoKSBib29sIHtcblx0cmV0dXJuIGxlbih2LkVycm9ycykgPT0gMFxufVxuXG5mdW5jICh2ICpWYWxpZGF0b3IpIEFkZEVycm9yKGtleSwgbWVzc2FnZSBzdHJpbmcpIHtcblx0aWYgXywgZXhpc3RzIDo9IHYuRXJyb3JzW2tleV07ICFleGlzdHMge1xuXHRcdHYuRXJyb3JzW2tleV0gPSBtZXNzYWdlXG5cdH1cbn1cblxuZnVuYyAodiAqVmFsaWRhdG9yKSBDaGVjayhvayBib29sLCBrZXksIG1lc3NhZ2Ugc3RyaW5nKSB7XG5cdGlmICFvayB7XG5cdFx0di5BZGRFcnJvcihrZXksIG1lc3NhZ2UpXG5cdH1cbn1cblxuZnVuYyBJbih2YWx1ZSBzdHJpbmcsIGxpc3QgLi4uc3RyaW5nKSBib29sIHtcblx0cmV0dXJuIHNsaWNlcy5Db250YWlucyhsaXN0LCB2YWx1ZSlcbn1cblxuZnVuYyBNYXRjaGVzKHZhbHVlIHN0cmluZywgcnggKnJlZ2V4cC5SZWdleHApIGJvb2wge1xuXHRyZXR1cm4gcnguTWF0Y2hTdHJpbmcodmFsdWUpXG59XG5cbmZ1bmMgVW5pcXVlKHZhbHVlcyBbXXN0cmluZykgYm9vbCB7XG5cdHVuaXF1ZVZhbHVlcyA6PSBtYWtlKG1hcFtzdHJpbmddYm9vbClcblxuXHRmb3IgXywgdmFsdWUgOj0gcmFuZ2UgdmFsdWVzIHtcblx0XHR1bmlxdWVWYWx1ZXNbdmFsdWVdID0gdHJ1ZVxuXHR9XG5cblx0cmV0dXJuIGxlbih2YWx1ZXMpID09IGxlbih1bmlxdWVWYWx1ZXMpXG59XG4uLi5cblBhdGg6IGludGVybmFsL2RhdGEvbW9kZWxzLmdvXG5wYWNrYWdlIGRhdGFcblxuaW1wb3J0IChcblx0XCJkYXRhYmFzZS9zcWxcIlxuXHRcImVycm9yc1wiXG4pXG5cbnZhciAoXG5cdEVyclJlY29yZE5vdEZvdW5kID0gZXJyb3JzLk5ldyhcInJlY29yZCBub3QgZm91bmRcIilcblx0RXJyRWRpdENvbmZsaWN0ICAgPSBlcnJvcnMuTmV3KFwiZWRpdCBjb25mbGljdFwiKVxuKVxuXG50eXBlIE1vZGVscyBzdHJ1Y3Qge1xuXHRNb3ZpZXMgTW92aWVNb2RlbFxufVxuXG5mdW5jIE5ld01vZGVscyhkYiAqc3FsLkRCKSBNb2RlbHMge1xuXHRyZXR1cm4gTW9kZWxze1xuXHRcdE1vdmllczogTW92aWVNb2RlbHtEQjogZGJ9LFxuXHR9XG59XG4uLi5cblBhdGg6IG1pZ3JhdGlvbnMvMDAwMDAyX2FkZF9tb3ZpZXNfY2hlY2tfY29uc3RyYWludHMuZG93bi5zcWxcbkFMVEVSIFRBQkxFIG1vdmllcyBEUk9QIENPTlNUUkFJTlQgSUYgRVhJU1RTIG1vdmllc19ydW50aW1lX2NoZWNrO1xuXG5BTFRFUiBUQUJMRSBtb3ZpZXMgRFJPUCBDT05TVFJBSU5UIElGIEVYSVNUUyBtb3ZpZXNfeWVhcl9jaGVjaztcblxuQUxURVIgVEFCTEUgbW92aWVzIERST1AgQ09OU1RSQUlOVCBJRiBFWElTVFMgZ2VucmVzX2xlbmd0aF9jaGVjazsuLi5cblBhdGg6IGNtZC9hcGkvaGVscGVycy5nb1xucGFja2FnZSBtYWluXG5cbmltcG9ydCAoXG5cdFwiZW5jb2RpbmcvanNvblwiXG5cdFwiZXJyb3JzXCJcblx0XCJmbXRcIlxuXHRcImdyZWVubGlnaHQudHVuZGVvc2Jvcm5lL2ludGVybmFsL3ZhbGlkYXRvclwiXG5cdFwiaW9cIlxuXHRcIm5ldC9odHRwXCJcblx0XCJuZXQvdXJsXCJcblx0XCJzdHJjb252XCJcblx0XCJzdHJpbmdzXCJcblxuXHRcIm1hcHNcIlxuXG5cdFwiZ2l0aHViLmNvbS9qdWxpZW5zY2htaWR0L2h0dHByb3V0ZXJcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSByZWFkSURQYXJhbShyICpodHRwLlJlcXVlc3QpIChpbnQ2NCwgZXJyb3IpIHtcblx0cGFyYW1zIDo9IGh0dHByb3V0ZXIuUGFyYW1zRnJvbUNvbnRleHQoci5Db250ZXh0KCkpXG5cblx0aWQsIGVyciA6PSBzdHJjb252LlBhcnNlSW50KHBhcmFtcy5CeU5hbWUoXCJpZFwiKSwgMTAsIDY0KVxuXHRpZiBlcnIgIT0gbmlsIHx8IGlkIDwgMSB7XG5cdFx0cmV0dXJuIDAsIGVycm9ycy5OZXcoXCJpbnZhbGlkIGlkIHBhcmFtZXRlclwiKVxuXHR9XG5cdHJldHVybiBpZCwgbmlsXG59XG5cbnR5cGUgZW52ZWxvcGUgbWFwW3N0cmluZ11pbnRlcmZhY2V7fVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSB3cml0ZUpTT04odyBodHRwLlJlc3BvbnNlV3JpdGVyLCBzdGF0dXMgaW50LCBkYXRhIGVudmVsb3BlLCBoZWFkZXJzIGh0dHAuSGVhZGVyKSBlcnJvciB7XG5cdGpzLCBlcnIgOj0ganNvbi5NYXJzaGFsSW5kZW50KGRhdGEsIFwiXCIsIFwiXFx0XCIpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBlcnJcblx0fVxuXG5cdGpzID0gYXBwZW5kKGpzLCAnXFxuJylcblxuXHRtYXBzLkNvcHkody5IZWFkZXIoKSwgaGVhZGVycylcblxuXHR3LkhlYWRlcigpLlNldChcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcblx0dy5Xcml0ZUhlYWRlcihzdGF0dXMpXG5cdHcuV3JpdGUoanMpXG5cdHJldHVybiBuaWxcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgcmVhZEpTT04odyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QsIGRzdCBpbnRlcmZhY2V7fSkgZXJyb3Ige1xuXG5cdG1heEJ5dGVzIDo9IDFfMDQ4XzU3NlxuXHRyLkJvZHkgPSBodHRwLk1heEJ5dGVzUmVhZGVyKHcsIHIuQm9keSwgaW50NjQobWF4Qnl0ZXMpKVxuXG5cdGRlYyA6PSBqc29uLk5ld0RlY29kZXIoci5Cb2R5KVxuXHRkZWMuRGlzYWxsb3dVbmtub3duRmllbGRzKClcblxuXHRlcnIgOj0gZGVjLkRlY29kZShkc3QpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHZhciBzeW50YXhFcnJvciAqanNvbi5TeW50YXhFcnJvclxuXHRcdHZhciB1bm1hcnNoYWxUeXBlRXJyb3IgKmpzb24uVW5tYXJzaGFsVHlwZUVycm9yXG5cdFx0dmFyIGludmFsaWRVbm1hcnNoYWxFcnJvciAqanNvbi5JbnZhbGlkVW5tYXJzaGFsRXJyb3JcblxuXHRcdHN3aXRjaCB7XG5cdFx0Y2FzZSBlcnJvcnMuQXMoZXJyLCAmc3ludGF4RXJyb3IpOlxuXHRcdFx0cmV0dXJuIGZtdC5FcnJvcmYoXCJib2R5IGNvbnRhaW5zIGJhZGx5LWZvcm1lZCBKU09OIChhdCBjaGFyYWN0ZXIgJWQpXCIsIHN5bnRheEVycm9yLk9mZnNldClcblxuXHRcdGNhc2UgZXJyb3JzLklzKGVyciwgaW8uRXJyVW5leHBlY3RlZEVPRik6XG5cdFx0XHRyZXR1cm4gZXJyb3JzLk5ldyhcImJvZHkgY29udGFpbnMgYmFkbHktZm9ybWVkIEpTT05cIilcblxuXHRcdGNhc2UgZXJyb3JzLkFzKGVyciwgJnVubWFyc2hhbFR5cGVFcnJvcik6XG5cdFx0XHRpZiB1bm1hcnNoYWxUeXBlRXJyb3IuRmllbGQgIT0gXCJcIiB7XG5cdFx0XHRcdHJldHVybiBmbXQuRXJyb3JmKFwiYm9keSBjb250YWlucyBpbmNvcnJlY3QgSlNPTiB0eXBlIGZvciBmaWVsZCAlcVwiLCB1bm1hcnNoYWxUeXBlRXJyb3IuRmllbGQpXG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZm10LkVycm9yZihcImJvZHkgY29udGFpbnMgaW5jb3JyZWN0IEpTT04gdHlwZSAoYXQgY2hhcmFjdGVyICVkKVwiLCB1bm1hcnNoYWxUeXBlRXJyb3IuT2Zmc2V0KVxuXHRcdGNhc2UgZXJyb3JzLklzKGVyciwgaW8uRU9GKTpcblx0XHRcdHJldHVybiBlcnJvcnMuTmV3KFwiYm9keSBtdXN0IG5vdCBiZSBlbXB0eVwiKVxuXG5cdFx0Y2FzZSBzdHJpbmdzLkhhc1ByZWZpeChlcnIuRXJyb3IoKSwgXCJqc29uOiB1bmtub3duIGZpZWxkIFwiKTpcblx0XHRcdGZpZWxkTmFtZSA6PSBzdHJpbmdzLlRyaW1QcmVmaXgoZXJyLkVycm9yKCksIFwianNvbjogdW5rbm93biBmaWVsZFwiKVxuXG5cdFx0XHRyZXR1cm4gZm10LkVycm9yZihcImJvZHkgY29udGFpbnMgdW5rbm93biBrZXkgJXNcIiwgZmllbGROYW1lKVxuXG5cdFx0Y2FzZSBlcnIuRXJyb3IoKSA9PSBcImh0dHA6IHJlcXVlc3QgYm9keSB0b28gbGFyZ2VcIjpcblx0XHRcdHJldHVybiBmbXQuRXJyb3JmKFwiYm9keSBtdXN0IG5vdCBiZSBsYXJnZXIgdGhhbiAlZCBieXRlc1wiLCBtYXhCeXRlcylcblx0XHRjYXNlIGVycm9ycy5BcyhlcnIsICZpbnZhbGlkVW5tYXJzaGFsRXJyb3IpOlxuXHRcdFx0cGFuaWMoZXJyKVxuXG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiBlcnJcblx0XHR9XG5cdH1cblxuXHRlcnIgPSBkZWMuRGVjb2RlKCZzdHJ1Y3R7fXt9KVxuXHRpZiBlcnIgIT0gaW8uRU9GIHtcblx0XHRyZXR1cm4gZXJyb3JzLk5ldyhcImJvZHkgbXVzdCBvbmx5IGNvbnRhaW4gYSBzaW5nbGUgSlNPTiB2YWx1ZVwiKVxuXHR9XG5cblx0cmV0dXJuIG5pbFxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSByZWFkU3RyaW5nKHFzIHVybC5WYWx1ZXMsIGtleSBzdHJpbmcsIGRlZmF1bHRWYWx1ZSBzdHJpbmcpIHN0cmluZyB7XG5cdHMgOj0gcXMuR2V0KGtleSlcblxuXHRpZiBzID09IFwiXCIge1xuXHRcdHJldHVybiBkZWZhdWx0VmFsdWVcblx0fVxuXG5cdHJldHVybiBzXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJlYWRDU1YocXMgdXJsLlZhbHVlcywga2V5IHN0cmluZywgZGVmYXVsdFZhbHVlIFtdc3RyaW5nKSBbXXN0cmluZyB7XG5cdGNzdiA6PSBxcy5HZXQoa2V5KVxuXG5cdGlmIGNzdiA9PSBcIlwiIHtcblx0XHRyZXR1cm4gZGVmYXVsdFZhbHVlXG5cdH1cblxuXHRyZXR1cm4gc3RyaW5ncy5TcGxpdChjc3YsIFwiLFwiKVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSByZWFkSW50KHFzIHVybC5WYWx1ZXMsIGtleSBzdHJpbmcsIGRlZmF1bHRWYWx1ZSBpbnQsIHYgKnZhbGlkYXRvci5WYWxpZGF0b3IpIGludCB7XG5cdHMgOj0gcXMuR2V0KGtleSlcblxuXHRpZiBzID09IFwiXCIge1xuXHRcdHJldHVybiBkZWZhdWx0VmFsdWVcblx0fVxuXG5cdGksIGVyciA6PSBzdHJjb252LkF0b2kocylcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0di5BZGRFcnJvcihrZXksIFwibXVzdCBiZSBhbiBpbnRlZ2VyIHZhbHVlXCIpXG5cdFx0cmV0dXJuIGRlZmF1bHRWYWx1ZVxuXHR9XG5cblx0cmV0dXJuIGlcbn1cbi4uLlxuUGF0aDogbWlncmF0aW9ucy8wMDAwMDFfY3JlYXRlX21vdmllc190YWJsZS51cC5zcWxcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG1vdmllcyAoXG4gICAgaWQgYmlnc2VyaWFsIFBSSU1BUlkgS0VZLFxuICAgIGNyZWF0ZWRfYXQgdGltZXN0YW1wKDApIHdpdGggdGltZSB6b25lIE5PVCBOVUxMIERFRkFVTFQgTk9XKCksXG4gICAgdGl0bGUgdGV4dCBOT1QgTlVMTCxcbiAgICB5ZWFyIGludGVnZXIgTk9UIE5VTEwsXG4gICAgcnVudGltZSBpbnRlZ2VyIE5PVCBOVUxMLFxuICAgIGdlbnJlcyB0ZXh0W10gTk9UIE5VTEwsXG4gICAgdmVyc2lvbiBpbnRlZ2VyIE5PVCBOVUxMIERFRkFVTFQgMVxuKTtcbi4uLlxuUGF0aDogaW50ZXJuYWwvZGF0YS9ydW50aW1lLmdvXG5wYWNrYWdlIGRhdGFcblxuaW1wb3J0IChcblx0XCJlcnJvcnNcIlxuXHRcImZtdFwiXG5cdFwic3RyY29udlwiXG5cdFwic3RyaW5nc1wiXG4pXG5cbnZhciBFcnJJbnZhbGlkUnVudGltZUZvcm1hdCA9IGVycm9ycy5OZXcoXCJpbnZhbGlkIHJ1bnRpbWUgZm9ybWF0XCIpXG5cbnR5cGUgUnVudGltZSBpbnQzMlxuXG5mdW5jIChyIFJ1bnRpbWUpIE1hcnNoYWxKU09OKCkgKFtdYnl0ZSwgZXJyb3IpIHtcblx0anNvblZhbHVlIDo9IGZtdC5TcHJpbnRmKFwiJWQgbWluc1wiLCByKVxuXG5cdHF1b3RlZEpTT05WYWx1ZSA6PSBzdHJjb252LlF1b3RlKGpzb25WYWx1ZSlcblxuXHRyZXR1cm4gW11ieXRlKHF1b3RlZEpTT05WYWx1ZSksIG5pbFxufVxuXG5mdW5jIChyICpSdW50aW1lKSBVbm1hcnNoYWxKU09OKGpzb25WYWx1ZSBbXWJ5dGUpIGVycm9yIHtcblxuXHR1bnF1b3RlZEpTT05WYWx1ZSwgZXJyIDo9IHN0cmNvbnYuVW5xdW90ZShzdHJpbmcoanNvblZhbHVlKSlcblxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gRXJySW52YWxpZFJ1bnRpbWVGb3JtYXRcblx0fVxuXG5cdHBhcnRzIDo9IHN0cmluZ3MuU3BsaXQodW5xdW90ZWRKU09OVmFsdWUsIFwiIFwiKVxuXG5cdGlmIGxlbihwYXJ0cykgIT0gMiB8fCBwYXJ0c1sxXSAhPSBcIm1pbnNcIiB7XG5cdFx0cmV0dXJuIEVyckludmFsaWRSdW50aW1lRm9ybWF0XG5cdH1cblxuXHRpLCBlcnIgOj0gc3RyY29udi5QYXJzZUludChwYXJ0c1swXSwgMTAsIDMyKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gRXJySW52YWxpZFJ1bnRpbWVGb3JtYXRcblx0fVxuXG5cdCpyID0gUnVudGltZShpKVxuXG5cdHJldHVybiBuaWxcbn1cbi4uLlxuUGF0aDogY21kL2FwaS9lcnJvcnMuZ29cbnBhY2thZ2UgbWFpblxuXG5pbXBvcnQgKFxuXHRcImZtdFwiXG5cdFwibmV0L2h0dHBcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBsb2dFcnJvcihyICpodHRwLlJlcXVlc3QsIGVyciBlcnJvcikge1xuXHRhcHAubG9nZ2VyLlByaW50bG4oZXJyKVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBlcnJvclJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBzdGF0dXMgaW50LCBtZXNzYWdlIGludGVyZmFjZXt9KSB7XG5cblx0ZW52IDo9IGVudmVsb3Ble1wiZXJyb3JcIjogbWVzc2FnZX1cblxuXHRlcnIgOj0gYXBwLndyaXRlSlNPTih3LCBzdGF0dXMsIGVudiwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAubG9nRXJyb3IociwgZXJyKVxuXHRcdHcuV3JpdGVIZWFkZXIoNTAwKVxuXHR9XG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHNlcnZlckVycm9yUmVzcG9uc2UodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QsIGVyciBlcnJvcikge1xuXHRhcHAubG9nRXJyb3IociwgZXJyKVxuXG5cdG1lc3NhZ2UgOj0gXCJ0aGUgc2VydmVyIGVuY291bnRlcmVkIGEgcHJvYmxlbSBhbmQgY291bGQgbm90IHByb2Nlc3MgeW91ciByZXF1ZXN0XCJcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNJbnRlcm5hbFNlcnZlckVycm9yLCBtZXNzYWdlKVxuXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIG5vdEZvdW5kUmVzcG9uc2UodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblx0bWVzc2FnZSA6PSBcInRoZSByZXF1ZXN0ZWQgcmVzb3VyY2UgY291bGQgbm90IGJlIGZvdW5kXCJcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNOb3RGb3VuZCwgbWVzc2FnZSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgbWV0aG9kTm90QWxsb3dlZFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdG1lc3NhZ2UgOj0gZm10LlNwcmludGYoXCJ0aGUgJXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgcmVzb3VyY2VcIiwgci5NZXRob2QpXG5cdGFwcC5lcnJvclJlc3BvbnNlKHcsIHIsIGh0dHAuU3RhdHVzTWV0aG9kTm90QWxsb3dlZCwgbWVzc2FnZSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgYmFkUmVxdWVzdFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBlcnIgZXJyb3IpIHtcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNCYWRSZXF1ZXN0LCBlcnIuRXJyb3IoKSlcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgZmFpbGVkVmFsaWRhdGlvblJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBlcnJvcnMgbWFwW3N0cmluZ11zdHJpbmcpIHtcblx0YXBwLmVycm9yUmVzcG9uc2UodywgciwgaHR0cC5TdGF0dXNVbnByb2Nlc3NhYmxlRW50aXR5LCBlcnJvcnMpXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIGVkaXRDb25mbGljdFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdG1lc3NhZ2UgOj0gXCJ1bmFibGUgdG8gdXBkYXRlIHRoZSByZWNvcmQgZHVlIHRvIGVkaXQgY29uZmxpY3QsIHBsZWFzZSB0cnkgYWdhaW5cIlxuXG5cdGFwcC5lcnJvclJlc3BvbnNlKHcsIHIsIGh0dHAuU3RhdHVzQ29uZmxpY3QsIG1lc3NhZ2UpXG59XG4uLi5cblBhdGg6IGNtZC9hcGkvaGVhbHRoY2hlY2suZ29cbnBhY2thZ2UgbWFpblxuXG5pbXBvcnQgKFxuXHRcIm5ldC9odHRwXCJcbilcblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgaGVhbHRoY2hlY2tIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cblx0ZW52IDo9IGVudmVsb3Ble1xuXHRcdFwic3RhdHVzXCI6IFwiYXZhaWxhYmxlXCIsXG5cdFx0XCJzeXN0ZW1faW5mb1wiOiBtYXBbc3RyaW5nXXN0cmluZ3tcblx0XHRcdFwiZW52aXJvbm1lbnRcIjogYXBwLmNvbmZpZy5lbnYsXG5cdFx0XHRcInZlcnNpb25cIjogICAgIHZlcnNpb24sXG5cdFx0fSxcblx0fVxuXG5cdGVyciA6PSBhcHAud3JpdGVKU09OKHcsIGh0dHAuU3RhdHVzT0ssIGVudiwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAubG9nZ2VyLlByaW50bG4oZXJyKVxuXHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0fVxuXG59XG4uLi5cblBhdGg6IGNtZC9hcGkvcm91dGVzLmdvXG5wYWNrYWdlIG1haW5cblxuaW1wb3J0IChcblx0XCJuZXQvaHR0cFwiXG5cblx0XCJnaXRodWIuY29tL2p1bGllbnNjaG1pZHQvaHR0cHJvdXRlclwiXG4pXG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJvdXRlcygpICpodHRwcm91dGVyLlJvdXRlciB7XG5cdHJvdXRlciA6PSBodHRwcm91dGVyLk5ldygpXG5cblx0cm91dGVyLk5vdEZvdW5kID0gaHR0cC5IYW5kbGVyRnVuYyhhcHAubm90Rm91bmRSZXNwb25zZSlcblx0cm91dGVyLk1ldGhvZE5vdEFsbG93ZWQgPSBodHRwLkhhbmRsZXJGdW5jKGFwcC5tZXRob2ROb3RBbGxvd2VkUmVzcG9uc2UpXG5cblx0cm91dGVyLkhhbmRsZXJGdW5jKGh0dHAuTWV0aG9kR2V0LCBcIi92MS9oZWFsdGhjaGVja1wiLCBhcHAuaGVhbHRoY2hlY2tIYW5kbGVyKVxuXHRyb3V0ZXIuSGFuZGxlckZ1bmMoaHR0cC5NZXRob2RQb3N0LCBcIi92MS9tb3ZpZXNcIiwgYXBwLmNyZWF0ZU1vdmllSGFuZGxlcilcblx0cm91dGVyLkhhbmRsZXJGdW5jKGh0dHAuTWV0aG9kR2V0LCBcIi92MS9tb3ZpZXMvOmlkXCIsIGFwcC5zaG93TW92aWVIYW5kbGVyKVxuXHRyb3V0ZXIuSGFuZGxlckZ1bmMoaHR0cC5NZXRob2RQYXRjaCwgXCIvdjEvbW92aWVzLzppZFwiLCBhcHAudXBkYXRlTW92aWVIYW5kbGVyKVxuXHRyb3V0ZXIuSGFuZGxlckZ1bmMoaHR0cC5NZXRob2REZWxldGUsIFwiL3YxL21vdmllcy86aWRcIiwgYXBwLmRlbGV0ZU1vdmllSGFuZGxlcilcblx0cmV0dXJuIHJvdXRlclxufVxuLi4uXG5QYXRoOiBjbWQvYXBpL21haW4uZ29cbnBhY2thZ2UgbWFpblxuXG5pbXBvcnQgKFxuXHRcImNvbnRleHRcIlxuXHRcImRhdGFiYXNlL3NxbFwiXG5cdFwiZmxhZ1wiXG5cdFwiZm10XCJcblx0XCJncmVlbmxpZ2h0LnR1bmRlb3Nib3JuZS9pbnRlcm5hbC9kYXRhXCJcblx0XCJsb2dcIlxuXHRcIm5ldC9odHRwXCJcblx0XCJvc1wiXG5cdFwidGltZVwiXG5cblx0XyBcImdpdGh1Yi5jb20vbGliL3BxXCJcbilcblxuY29uc3QgdmVyc2lvbiA9IFwiMS4wLjBcIlxuXG50eXBlIGNvbmZpZyBzdHJ1Y3Qge1xuXHRwb3J0IGludFxuXHRlbnYgIHN0cmluZ1xuXHRkYiAgIHN0cnVjdCB7XG5cdFx0ZHNuICAgICAgICAgIHN0cmluZ1xuXHRcdG1heE9wZW5Db25ucyBpbnRcblx0XHRtYXhJZGxlQ29ubnMgaW50XG5cdFx0bWF4SWRsZVRpbWUgIHN0cmluZ1xuXHR9XG59XG5cbnR5cGUgYXBwbGljYXRpb24gc3RydWN0IHtcblx0Y29uZmlnIGNvbmZpZ1xuXHRsb2dnZXIgKmxvZy5Mb2dnZXJcblx0bW9kZWxzIGRhdGEuTW9kZWxzXG59XG5cbmZ1bmMgbWFpbigpIHtcblxuXHR2YXIgY2ZnIGNvbmZpZ1xuXG5cdGZsYWcuSW50VmFyKCZjZmcucG9ydCwgXCJwb3J0XCIsIDQwMDAsIFwiQVBJIHNlcnZlciBwb3J0XCIpXG5cdGZsYWcuU3RyaW5nVmFyKCZjZmcuZW52LCBcImVudlwiLCBcImRldmVsb3BtZW50XCIsIFwiRW52aXJvbm1lbnQgKGRldmVsb3BtZW50fHN0YWdpbmd8cHJvZHVjdGlvbilcIilcblxuXHRmbGFnLlN0cmluZ1ZhcigmY2ZnLmRiLmRzbiwgXCJkYi1kc25cIiwgb3MuR2V0ZW52KFwiR1JFRU5MSUdIVF9EQl9EU05cIiksIFwiUG9zdGdyZVNRTCBEU05cIilcblxuXHRmbGFnLkludFZhcigmY2ZnLmRiLm1heE9wZW5Db25ucywgXCJkYi1tYXgtb3Blbi1jb25uc1wiLCAyNSwgXCJQb3N0Z3JlU1FMIG1heCBvcGVuIGNvbm5lY3Rpb25zXCIpXG5cblx0ZmxhZy5JbnRWYXIoJmNmZy5kYi5tYXhJZGxlQ29ubnMsIFwiZGItbWF4LWlkbGUtY29ubnNcIiwgMjUsIFwiUG9zdGdyZVNRTCBtYXggaWRsZSBjb25uZWN0aW9uc1wiKVxuXG5cdGZsYWcuU3RyaW5nVmFyKCZjZmcuZGIubWF4SWRsZVRpbWUsIFwiZGItbWF4LWlkbGUtdGltZVwiLCBcIjE1bVwiLCBcIlBvc3RncmVTUUwgbWF4IGNvbm5lY3Rpb24gaWRsZSB0aW1lXCIpXG5cdGZsYWcuUGFyc2UoKVxuXG5cdGxvZ2dlciA6PSBsb2cuTmV3KG9zLlN0ZG91dCwgXCJcIiwgbG9nLkxkYXRlfGxvZy5MdGltZSlcblxuXHRkYiwgZXJyIDo9IG9wZW5EQihjZmcpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGxvZ2dlci5GYXRhbChlcnIpXG5cdH1cblxuXHRkZWZlciBkYi5DbG9zZSgpXG5cblx0bG9nZ2VyLlByaW50ZihcImRhdGFiYXNlIGNvbm5lY3Rpb24gcG9vbCBlc3RhYmxpc2hlZFwiKVxuXG5cdGFwcCA6PSAmYXBwbGljYXRpb257XG5cdFx0Y29uZmlnOiBjZmcsXG5cdFx0bG9nZ2VyOiBsb2dnZXIsXG5cdFx0bW9kZWxzOiBkYXRhLk5ld01vZGVscyhkYiksXG5cdH1cblxuXHRzcnYgOj0gJmh0dHAuU2VydmVye1xuXHRcdEFkZHI6ICAgICAgICAgZm10LlNwcmludGYoXCI6JWRcIiwgY2ZnLnBvcnQpLFxuXHRcdEhhbmRsZXI6ICAgICAgYXBwLnJvdXRlcygpLFxuXHRcdElkbGVUaW1lb3V0OiAgdGltZS5NaW51dGUsXG5cdFx0UmVhZFRpbWVvdXQ6ICAxMCAqIHRpbWUuU2Vjb25kLFxuXHRcdFdyaXRlVGltZW91dDogMzAgKiB0aW1lLlNlY29uZCxcblx0fVxuXG5cdGxvZ2dlci5QcmludGYoXCJzdGFydGluZyAlcyBzZXJ2ZXIgb24gJXNcIiwgY2ZnLmVudiwgc3J2LkFkZHIpXG5cdGVyciA9IHNydi5MaXN0ZW5BbmRTZXJ2ZSgpXG5cdGxvZ2dlci5GYXRhbChlcnIpXG59XG5cbmZ1bmMgb3BlbkRCKGNmZyBjb25maWcpICgqc3FsLkRCLCBlcnJvcikge1xuXG5cdGRiLCBlcnIgOj0gc3FsLk9wZW4oXCJwb3N0Z3Jlc1wiLCBjZmcuZGIuZHNuKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gbmlsLCBlcnJcblx0fVxuXG5cdGRiLlNldE1heE9wZW5Db25ucyhjZmcuZGIubWF4T3BlbkNvbm5zKVxuXG5cdGRiLlNldE1heElkbGVDb25ucyhjZmcuZGIubWF4SWRsZUNvbm5zKVxuXG5cdGR1cmF0aW9uLCBlcnIgOj0gdGltZS5QYXJzZUR1cmF0aW9uKGNmZy5kYi5tYXhJZGxlVGltZSlcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0cmV0dXJuIG5pbCwgZXJyXG5cdH1cblx0ZGIuU2V0Q29ubk1heElkbGVUaW1lKGR1cmF0aW9uKVxuXG5cdGN0eCwgY2FuY2VsIDo9IGNvbnRleHQuV2l0aFRpbWVvdXQoY29udGV4dC5CYWNrZ3JvdW5kKCksIDUqdGltZS5TZWNvbmQpXG5cdGRlZmVyIGNhbmNlbCgpXG5cblx0ZXJyID0gZGIuUGluZ0NvbnRleHQoY3R4KVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gbmlsLCBlcnJcblx0fVxuXG5cdHJldHVybiBkYiwgbmlsXG59XG4uLi5cblBhdGg6IG1pZ3JhdGlvbnMvMDAwMDAxX2NyZWF0ZV9tb3ZpZXNfdGFibGUuZG93bi5zcWxcbkRST1AgVEFCTEUgSUYgRVhJU1RTIG1vdmllczsuLi5cblBhdGg6IGdvLm1vZFxubW9kdWxlIGdyZWVubGlnaHQudHVuZGVvc2Jvcm5lXG5cbmdvIDEuMjMuNVxuXG5yZXF1aXJlIGdpdGh1Yi5jb20vanVsaWVuc2NobWlkdC9odHRwcm91dGVyIHYxLjMuMFxuXG5yZXF1aXJlIGdpdGh1Yi5jb20vbGliL3BxIHYxLjEwLjAgLy8gaW5kaXJlY3Rcbi4uLlxuUGF0aDogZ28uc3VtXG5naXRodWIuY29tL2p1bGllbnNjaG1pZHQvaHR0cHJvdXRlciB2MS4zLjAgaDE6VTA2MDllOXRnYnNldTNyQklOZXQ5UDQ4QUkvRDNvSnM0ZE43andKT1ExVT1cbmdpdGh1Yi5jb20vanVsaWVuc2NobWlkdC9odHRwcm91dGVyIHYxLjMuMC9nby5tb2QgaDE6SlI2V3RIYisyTFVlOFRDS1kzY1pPeEZ5eU84SVpBYzRSVmN5Y0NDQUtkTT1cbmdpdGh1Yi5jb20vbGliL3BxIHYxLjEwLjAgaDE6Wng1REpGRVlRWGlvOTNrZ1huUTA5ZlhOaVVLc3F2NE9VRXUyVXRHY0IxRT1cbmdpdGh1Yi5jb20vbGliL3BxIHYxLjEwLjAvZ28ubW9kIGgxOkFsVk41eDRFNFQ1NDR0V3pINmhLZmJmUXZtM0hkYk94cm1nZ0ROQVBZOW89XG4uLi5cblBhdGg6IFJFQURNRS5tZFxuIyBncmVlbmxpZ2h0XG4uLi5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjIzYzEzNWIxLWZhMTUtNDM3Zi1iYjNiLTdhNGFiZDBkMmZjNjt0b29sdV92cnR4XzAxMmtLOVd4VW9hdGROQmFKUjRHOFNXdSI6eyJyZXF1ZXN0SWQiOiIyM2MxMzViMS1mYTE1LTQzN2YtYmIzYi03YTRhYmQwZDJmYzYiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxMmtLOVd4VW9hdGROQmFKUjRHOFNXdSIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IGludGVybmFsL2RhdGEvZmlsdGVycy5nb1xucGFja2FnZSBkYXRhXG4uLi5cblBhdGg6IGludGVybmFsL2RhdGEvbW92aWVzLmdvXG5wYWNrYWdlIGRhdGFcblxuaW1wb3J0IChcblx0XCJjb250ZXh0XCJcblx0XCJkYXRhYmFzZS9zcWxcIlxuXHRcImVycm9yc1wiXG5cdFwiZ2l0aHViLmNvbS9saWIvcHFcIlxuXHRcInRpbWVcIlxuXG5cdFwiZ3JlZW5saWdodC50dW5kZW9zYm9ybmUvaW50ZXJuYWwvdmFsaWRhdG9yXCJcbilcblxudHlwZSBNb3ZpZSBzdHJ1Y3Qge1xuXHRJRCAgICAgICAgaW50NjQgICAgIGBqc29uOlwiaWRcImBcblx0Q3JlYXRlZEF0IHRpbWUuVGltZSBganNvbjpcIi1cImBcblx0VGl0bGUgICAgIHN0cmluZyAgICBganNvbjpcInRpdGxlXCJgXG5cdFllYXIgICAgICBpbnQzMiAgICAgYGpzb246XCJ5ZWFyLG9taXRlbXB0eVwiYFxuXHRSdW50aW1lICAgUnVudGltZSAgIGBqc29uOlwicnVudGltZSxvbWl0ZW1wdHlcImBcblx0R2VucmVzICAgIFtdc3RyaW5nICBganNvbjpcImdlbnJlcyxvbWl0ZW1wdHlcImBcblx0VmVyc2lvbiAgIGludDMyICAgICBganNvbjpcInZlcnNpb25cImBcbn1cblxuZnVuYyBWYWxpZGF0ZU1vdmllKHYgKnZhbGlkYXRvci5WYWxpZGF0b3IsIG1vdmllICpNb3ZpZSkge1xuXHR2LkNoZWNrKG1vdmllLlRpdGxlICE9IFwiXCIsIFwidGl0bGVcIiwgXCJtdXN0IGJlIHByb3ZpZGVkXCIpXG5cdHYuQ2hlY2sobGVuKG1vdmllLlRpdGxlKSA8PSA1MDAsIFwidGl0bGVcIiwgXCJtdXN0IG5vdCBiZSBtb3JlIHRoYW4gNTAwIGJ5dGVzIGxvbmdcIilcblx0di5DaGVjayhtb3ZpZS5ZZWFyID49IDE4ODgsIFwieWVhclwiLCBcIm11c3QgYmUgZ3JlYXRlciB0aGFuIDE4ODhcIilcblx0di5DaGVjayhtb3ZpZS5ZZWFyIDw9IGludDMyKHRpbWUuTm93KCkuWWVhcigpKSwgXCJ5ZWFyXCIsIFwibXVzdCBub3QgYmUgaW4gdGhlIGZ1dHVyZVwiKVxuXHR2LkNoZWNrKG1vdmllLlJ1bnRpbWUgIT0gMCwgXCJydW50aW1lXCIsIFwibXVzdCBiZSBwcm92aWRlZFwiKVxuXHR2LkNoZWNrKG1vdmllLlJ1bnRpbWUgPiAwLCBcInJ1bnRpbWVcIiwgXCJtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlclwiKVxuXG5cdHYuQ2hlY2sobW92aWUuR2VucmVzICE9IG5pbCwgXCJnZW5yZXNcIiwgXCJtdXN0IGJlIHByb3ZpZGVkXCIpXG5cdHYuQ2hlY2sobGVuKG1vdmllLkdlbnJlcykgPj0gMSwgXCJnZW5yZXNcIiwgXCJtdXN0IGNvbnRhaW4gYXQgbGVhc3QgMSBnZW5yZVwiKVxuXHR2LkNoZWNrKGxlbihtb3ZpZS5HZW5yZXMpIDw9IDUsIFwiZ2VucmVzXCIsIFwibXVzdCBub3QgY29udGFpbiBtb3JlIHRoYW4gNSBnZW5yZXNcIilcblxuXHR2LkNoZWNrKHZhbGlkYXRvci5VbmlxdWUobW92aWUuR2VucmVzKSwgXCJnZW5yZXNcIiwgXCJtdXN0IG5vdCBjb250YWluIGR1cGxpY2F0ZSB2YWx1ZXNcIilcbn1cblxudHlwZSBNb3ZpZU1vZGVsIHN0cnVjdCB7XG5cdERCICpzcWwuREJcbn1cblxuZnVuYyAobSBNb3ZpZU1vZGVsKSBJbnNlcnQobW92aWUgKk1vdmllKSBlcnJvciB7XG5cdHF1ZXJ5IDo9IGBJTlNFUlQgSU5UTyBtb3ZpZXMgKHRpdGxlLCB5ZWFyLCBydW50aW1lLCBnZW5yZXMpXG4gICAgICAgICAgICAgICBWQUxVRVMgKCQxLCAkMiwgJDMsICQ0KVxuICAgICAgICAgICAgICAgUkVUVVJOSU5HIGlkLCBjcmVhdGVkX2F0LCB2ZXJzaW9uYFxuXG5cdGFyZ3MgOj0gW11pbnRlcmZhY2V7fXttb3ZpZS5UaXRsZSwgbW92aWUuWWVhciwgbW92aWUuUnVudGltZSwgcHEuQXJyYXkobW92aWUuR2VucmVzKX1cblxuXHRjdHgsIGNhbmNlbCA6PSBjb250ZXh0LldpdGhUaW1lb3V0KGNvbnRleHQuQmFja2dyb3VuZCgpLCAzKnRpbWUuU2Vjb25kKVxuXHRkZWZlciBjYW5jZWwoKVxuXG5cdHJldHVybiBtLkRCLlF1ZXJ5Um93Q29udGV4dChjdHgsIHF1ZXJ5LCBhcmdzLi4uKS5TY2FuKCZtb3ZpZS5JRCwgJm1vdmllLkNyZWF0ZWRBdCwgJm1vdmllLlZlcnNpb24pXG59XG5cbmZ1bmMgKG0gTW92aWVNb2RlbCkgR2V0KGlkIGludDY0KSAoKk1vdmllLCBlcnJvcikge1xuXHRpZiBpZCA8IDEge1xuXHRcdHJldHVybiBuaWwsIEVyclJlY29yZE5vdEZvdW5kXG5cdH1cblxuXHRxdWVyeSA6PSBgU0VMRUNUIGlkLCBjcmVhdGVkX2F0LCB0aXRsZSwgeWVhciwgcnVudGltZSwgZ2VucmVzLCB2ZXJzaW9uIEZST00gbW92aWVzIFdIRVJFIGlkID0gJDFgXG5cblx0dmFyIG1vdmllIE1vdmllXG5cblx0Y3R4LCBjYW5jZWwgOj0gY29udGV4dC5XaXRoVGltZW91dChjb250ZXh0LkJhY2tncm91bmQoKSwgMyp0aW1lLlNlY29uZClcblxuXHRkZWZlciBjYW5jZWwoKVxuXG5cdGVyciA6PVxuXHRcdG0uREIuUXVlcnlSb3dDb250ZXh0KGN0eCwgcXVlcnksIGlkKS5TY2FuKCZtb3ZpZS5JRCwgJm1vdmllLkNyZWF0ZWRBdCwgJm1vdmllLlRpdGxlLCAmbW92aWUuWWVhciwgJm1vdmllLlJ1bnRpbWUsIHBxLkFycmF5KCZtb3ZpZS5HZW5yZXMpLCAmbW92aWUuVmVyc2lvbilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIHNxbC5FcnJOb1Jvd3MpOlxuXHRcdFx0cmV0dXJuIG5pbCwgRXJyUmVjb3JkTm90Rm91bmRcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIG5pbCwgZXJyXG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuICZtb3ZpZSwgbmlsXG59XG5cbmZ1bmMgKG0gTW92aWVNb2RlbCkgVXBkYXRlKG1vdmllICpNb3ZpZSkgZXJyb3Ige1xuXHRxdWVyeSA6PSBgVVBEQVRFIG1vdmllc1xuIFNFVCB0aXRsZSA9ICQxLCB5ZWFyID0gJDIsIHJ1bnRpbWUgPSAkMywgZ2VucmVzID0gJDQsIHZlcnNpb24gPSB2ZXJzaW9uICsgMSBXSEVSRSAgaWQgPSAkNSBBTkQgdmVyc2lvbiA9ICQ2XG4gUkVUVVJOSU5HIHZlcnNpb25gXG5cblx0YXJncyA6PSBbXWludGVyZmFjZXt9e1xuXHRcdG1vdmllLlRpdGxlLFxuXHRcdG1vdmllLlllYXIsXG5cdFx0bW92aWUuUnVudGltZSxcblx0XHRwcS5BcnJheShtb3ZpZS5HZW5yZXMpLFxuXHRcdG1vdmllLklELFxuXHRcdG1vdmllLlZlcnNpb24sXG5cdH1cblxuXHRjdHgsIGNhbmNlbCA6PSBjb250ZXh0LldpdGhUaW1lb3V0KGNvbnRleHQuQmFja2dyb3VuZCgpLCAzKnRpbWUuU2Vjb25kKVxuXHRkZWZlciBjYW5jZWwoKVxuXG5cdGVyciA6PSBtLkRCLlF1ZXJ5Um93Q29udGV4dChjdHgsIHF1ZXJ5LCBhcmdzLi4uKS5TY2FuKCZtb3ZpZS5WZXJzaW9uKVxuXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHN3aXRjaCB7XG5cdFx0Y2FzZSBlcnJvcnMuSXMoZXJyLCBzcWwuRXJyTm9Sb3dzKTpcblx0XHRcdHJldHVybiBFcnJFZGl0Q29uZmxpY3Rcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIGVyclxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBuaWxcbn1cblxuZnVuYyAobSBNb3ZpZU1vZGVsKSBEZWxldGUoaWQgaW50NjQpIGVycm9yIHtcblx0aWYgaWQgPCAxIHtcblx0XHRyZXR1cm4gRXJyUmVjb3JkTm90Rm91bmRcblx0fVxuXG5cdHF1ZXJ5IDo9IGBERUxFVEUgRlJPTSBtb3ZpZXMgV0hFUkUgaWQgPSAkMWBcblxuXHRjdHgsIGNhbmNlbCA6PSBjb250ZXh0LldpdGhUaW1lb3V0KGNvbnRleHQuQmFja2dyb3VuZCgpLCAzKnRpbWUuU2Vjb25kKVxuXHRkZWZlciBjYW5jZWwoKVxuXG5cdHJlc3VsdCwgZXJyIDo9IG0uREIuRXhlY0NvbnRleHQoY3R4LCBxdWVyeSwgaWQpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBlcnJcblx0fVxuXHRyb3dzQWZmZWN0ZWQsIGVyciA6PSByZXN1bHQuUm93c0FmZmVjdGVkKClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0cmV0dXJuIGVyclxuXHR9XG5cblx0aWYgcm93c0FmZmVjdGVkID09IDAge1xuXHRcdHJldHVybiBFcnJSZWNvcmROb3RGb3VuZFxuXHR9XG5cblx0cmV0dXJuIG5pbFxufVxuLi4uXG5QYXRoOiBpbnRlcm5hbC9kYXRhL21vZGVscy5nb1xucGFja2FnZSBkYXRhXG5cbmltcG9ydCAoXG5cdFwiZGF0YWJhc2Uvc3FsXCJcblx0XCJlcnJvcnNcIlxuKVxuXG52YXIgKFxuXHRFcnJSZWNvcmROb3RGb3VuZCA9IGVycm9ycy5OZXcoXCJyZWNvcmQgbm90IGZvdW5kXCIpXG5cdEVyckVkaXRDb25mbGljdCAgID0gZXJyb3JzLk5ldyhcImVkaXQgY29uZmxpY3RcIilcbilcblxudHlwZSBNb2RlbHMgc3RydWN0IHtcblx0TW92aWVzIE1vdmllTW9kZWxcbn1cblxuZnVuYyBOZXdNb2RlbHMoZGIgKnNxbC5EQikgTW9kZWxzIHtcblx0cmV0dXJuIE1vZGVsc3tcblx0XHRNb3ZpZXM6IE1vdmllTW9kZWx7REI6IGRifSxcblx0fVxufVxuLi4uXG5QYXRoOiBpbnRlcm5hbC9kYXRhL3J1bnRpbWUuZ29cbnBhY2thZ2UgZGF0YVxuXG5pbXBvcnQgKFxuXHRcImVycm9yc1wiXG5cdFwiZm10XCJcblx0XCJzdHJjb252XCJcblx0XCJzdHJpbmdzXCJcbilcblxudmFyIEVyckludmFsaWRSdW50aW1lRm9ybWF0ID0gZXJyb3JzLk5ldyhcImludmFsaWQgcnVudGltZSBmb3JtYXRcIilcblxudHlwZSBSdW50aW1lIGludDMyXG5cbmZ1bmMgKHIgUnVudGltZSkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikge1xuXHRqc29uVmFsdWUgOj0gZm10LlNwcmludGYoXCIlZCBtaW5zXCIsIHIpXG5cblx0cXVvdGVkSlNPTlZhbHVlIDo9IHN0cmNvbnYuUXVvdGUoanNvblZhbHVlKVxuXG5cdHJldHVybiBbXWJ5dGUocXVvdGVkSlNPTlZhbHVlKSwgbmlsXG59XG5cbmZ1bmMgKHIgKlJ1bnRpbWUpIFVubWFyc2hhbEpTT04oanNvblZhbHVlIFtdYnl0ZSkgZXJyb3Ige1xuXG5cdHVucXVvdGVkSlNPTlZhbHVlLCBlcnIgOj0gc3RyY29udi5VbnF1b3RlKHN0cmluZyhqc29uVmFsdWUpKVxuXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBFcnJJbnZhbGlkUnVudGltZUZvcm1hdFxuXHR9XG5cblx0cGFydHMgOj0gc3RyaW5ncy5TcGxpdCh1bnF1b3RlZEpTT05WYWx1ZSwgXCIgXCIpXG5cblx0aWYgbGVuKHBhcnRzKSAhPSAyIHx8IHBhcnRzWzFdICE9IFwibWluc1wiIHtcblx0XHRyZXR1cm4gRXJySW52YWxpZFJ1bnRpbWVGb3JtYXRcblx0fVxuXG5cdGksIGVyciA6PSBzdHJjb252LlBhcnNlSW50KHBhcnRzWzBdLCAxMCwgMzIpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBFcnJJbnZhbGlkUnVudGltZUZvcm1hdFxuXHR9XG5cblx0KnIgPSBSdW50aW1lKGkpXG5cblx0cmV0dXJuIG5pbFxufVxuLi4uXG5QYXRoOiBjbWQvYXBpL21vdmllcy5nb1xucGFja2FnZSBtYWluXG5cbmltcG9ydCAoXG5cdFwiZXJyb3JzXCJcblx0XCJmbXRcIlxuXHRcImdyZWVubGlnaHQudHVuZGVvc2Jvcm5lL2ludGVybmFsL2RhdGFcIlxuXHRcImdyZWVubGlnaHQudHVuZGVvc2Jvcm5lL2ludGVybmFsL3ZhbGlkYXRvclwiXG5cdFwibmV0L2h0dHBcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBjcmVhdGVNb3ZpZUhhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblxuXHR2YXIgaW5wdXQgc3RydWN0IHtcblx0XHRUaXRsZSAgIHN0cmluZyAgICAgICBganNvbjpcInRpdGxlXCJgXG5cdFx0WWVhciAgICBpbnQzMiAgICAgICAgYGpzb246XCJ5ZWFyXCJgXG5cdFx0UnVudGltZSBkYXRhLlJ1bnRpbWUgYGpzb246XCJydW50aW1lXCJgXG5cdFx0R2VucmVzICBbXXN0cmluZyAgICAgYGpzb246XCJnZW5yZXNcImBcblx0fVxuXG5cdGVyciA6PSBhcHAucmVhZEpTT04odywgciwgJmlucHV0KVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuYmFkUmVxdWVzdFJlc3BvbnNlKHcsIHIsIGVycilcblx0XHRyZXR1cm5cblx0fVxuXG5cdG1vdmllIDo9ICZkYXRhLk1vdmlle1xuXHRcdFRpdGxlOiAgIGlucHV0LlRpdGxlLFxuXHRcdFllYXI6ICAgIGlucHV0LlllYXIsXG5cdFx0UnVudGltZTogaW5wdXQuUnVudGltZSxcblx0XHRHZW5yZXM6ICBpbnB1dC5HZW5yZXMsXG5cdH1cblxuXHR2IDo9IHZhbGlkYXRvci5OZXcoKVxuXG5cdGlmIGRhdGEuVmFsaWRhdGVNb3ZpZSh2LCBtb3ZpZSk7ICF2LlZhbGlkKCkge1xuXHRcdGFwcC5mYWlsZWRWYWxpZGF0aW9uUmVzcG9uc2Uodywgciwgdi5FcnJvcnMpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRlcnIgPSBhcHAubW9kZWxzLk1vdmllcy5JbnNlcnQobW92aWUpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0XHRyZXR1cm5cblx0fVxuXG5cdGhlYWRlcnMgOj0gbWFrZShodHRwLkhlYWRlcilcblx0aGVhZGVycy5TZXQoXCJMb2NhdGlvblwiLCBmbXQuU3ByaW50ZihcIi92MS9tb3ZpZXMvJWRcIiwgbW92aWUuSUQpKVxuXG5cdGVyciA9IGFwcC53cml0ZUpTT04odywgaHR0cC5TdGF0dXNDcmVhdGVkLCBlbnZlbG9wZXtcIm1vdmllXCI6IG1vdmllfSwgaGVhZGVycylcblxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdH1cbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgc2hvd01vdmllSGFuZGxlcih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkge1xuXG5cdGlkLCBlcnIgOj0gYXBwLnJlYWRJRFBhcmFtKHIpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5ub3RGb3VuZFJlc3BvbnNlKHcsIHIpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRtb3ZpZSwgZXJyIDo9IGFwcC5tb2RlbHMuTW92aWVzLkdldChpZClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIGRhdGEuRXJyUmVjb3JkTm90Rm91bmQpOlxuXHRcdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRkZWZhdWx0OlxuXHRcdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdH1cblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC53cml0ZUpTT04odywgaHR0cC5TdGF0dXNPSywgZW52ZWxvcGV7XCJtb3ZpZVwiOiBtb3ZpZX0sIG5pbClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHR9XG5cbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgdXBkYXRlTW92aWVIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdGlkLCBlcnIgOj0gYXBwLnJlYWRJRFBhcmFtKHIpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5ub3RGb3VuZFJlc3BvbnNlKHcsIHIpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRtb3ZpZSwgZXJyIDo9IGFwcC5tb2RlbHMuTW92aWVzLkdldChpZClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5JcyhlcnIsIGRhdGEuRXJyUmVjb3JkTm90Rm91bmQpOlxuXHRcdFx0YXBwLm5vdEZvdW5kUmVzcG9uc2Uodywgcilcblx0XHRkZWZhdWx0OlxuXHRcdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHRcdH1cblx0XHRyZXR1cm5cblx0fVxuXG5cdHZhciBpbnB1dCBzdHJ1Y3Qge1xuXHRcdFRpdGxlICAgKnN0cmluZyAgICAgICBganNvbjpcInRpdGxlXCJgXG5cdFx0WWVhciAgICAqaW50MzIgICAgICAgIGBqc29uOlwieWVhclwiYFxuXHRcdFJ1bnRpbWUgKmRhdGEuUnVudGltZSBganNvbjpcInJ1bnRpbWVcImBcblx0XHRHZW5yZXMgIFtdc3RyaW5nICAgICAgYGpzb246XCJnZW5yZXNcImBcblx0fVxuXG5cdGVyciA9IGFwcC5yZWFkSlNPTih3LCByLCAmaW5wdXQpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5iYWRSZXF1ZXN0UmVzcG9uc2UodywgciwgZXJyKVxuXHRcdHJldHVyblxuXHR9XG5cblx0aWYgaW5wdXQuVGl0bGUgIT0gbmlsIHtcblx0XHRtb3ZpZS5UaXRsZSA9ICppbnB1dC5UaXRsZVxuXHR9XG5cdGlmIGlucHV0LlllYXIgIT0gbmlsIHtcblx0XHRtb3ZpZS5ZZWFyID0gKmlucHV0LlllYXJcblx0fVxuXHRpZiBpbnB1dC5SdW50aW1lICE9IG5pbCB7XG5cdFx0bW92aWUuUnVudGltZSA9ICppbnB1dC5SdW50aW1lXG5cdH1cblx0aWYgaW5wdXQuR2VucmVzICE9IG5pbCB7XG5cdFx0bW92aWUuR2VucmVzID0gaW5wdXQuR2VucmVzXG5cdH1cblxuXHR2IDo9IHZhbGlkYXRvci5OZXcoKVxuXG5cdGlmIGRhdGEuVmFsaWRhdGVNb3ZpZSh2LCBtb3ZpZSk7ICF2LlZhbGlkKCkge1xuXHRcdGFwcC5mYWlsZWRWYWxpZGF0aW9uUmVzcG9uc2Uodywgciwgdi5FcnJvcnMpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRlcnIgPSBhcHAubW9kZWxzLk1vdmllcy5VcGRhdGUobW92aWUpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0XHRyZXR1cm5cblx0fVxuXG5cdGVyciA9IGFwcC53cml0ZUpTT04odywgaHR0cC5TdGF0dXNPSywgZW52ZWxvcGV7XCJtb3ZpZVwiOiBtb3ZpZX0sIG5pbClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHR9XG5cbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgZGVsZXRlTW92aWVIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdGlkLCBlcnIgOj0gYXBwLnJlYWRJRFBhcmFtKHIpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5ub3RGb3VuZFJlc3BvbnNlKHcsIHIpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRlcnIgPSBhcHAubW9kZWxzLk1vdmllcy5EZWxldGUoaWQpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHN3aXRjaCB7XG5cdFx0Y2FzZSBlcnJvcnMuSXMoZXJyLCBkYXRhLkVyclJlY29yZE5vdEZvdW5kKTpcblx0XHRcdGFwcC5ub3RGb3VuZFJlc3BvbnNlKHcsIHIpXG5cdFx0ZGVmYXVsdDpcblx0XHRcdGFwcC5zZXJ2ZXJFcnJvclJlc3BvbnNlKHcsIHIsIGVycilcblx0XHR9XG5cdFx0cmV0dXJuXG5cdH1cblx0ZXJyID0gYXBwLndyaXRlSlNPTih3LCBodHRwLlN0YXR1c09LLCBlbnZlbG9wZXtcIm1lc3NhZ2VcIjogXCJtb3ZpZSBzdWNjZXNzZnVsbHkgZGVsZXRlZFwifSwgbmlsKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRhcHAuc2VydmVyRXJyb3JSZXNwb25zZSh3LCByLCBlcnIpXG5cdH1cbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgbGlzdE1vdmllc0hhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblx0dmFyIGlucHV0IHN0cnVjdCB7XG5cdFx0VGl0bGUgIHN0cmluZ1xuXHRcdEdlbnJlcyBbXXN0cmluZ1xuXHRcdGRhdGEuRmlsdGVyc1xuXHR9XG5cblx0diA6PSB2YWxpZGF0b3IuTmV3KClcblxuXHRxcyA6PSByLlVSTC5RdWVyeSgpXG5cdGlucHV0LlRpdGxlID0gYXBwLnJlYWRTdHJpbmcocXMsIFwidGl0bGVcIiwgXCJcIilcblx0aW5wdXQuR2VucmVzID0gYXBwLnJlYWRDU1YocXMsIFwiZ2VucmVzXCIsIFtdc3RyaW5ne30pXG5cdGlucHV0LkZpbHRlcnMuUGFnZSA9IGFwcC5yZWFkSW50KHFzLCBcInBhZ2VcIiwgMSwgdilcblx0aW5wdXQuRmlsdGVycy5QYWdlU2l6ZSA9IGFwcC5yZWFkSW50KHFzLCBcInBhZ2Vfc2l6ZVwiLCAyMCwgdilcblx0aW5wdXQuRmlsdGVycy5Tb3J0ID0gYXBwLnJlYWRTdHJpbmcocXMsIFwic29ydFwiLCBcImlkXCIpXG5cblx0aW5wdXQuRmlsdGVycy5Tb3J0U2FmZWxpc3QgPSBbXXN0cmluZ3tcImlkXCIsIFwidGl0bGVcIiwgXCJ5ZWFyXCIsIFwicnVudGltZVwiLCBcIi1pZFwiLCBcIi10aXRsZVwiLCBcIi15ZWFyXCIsIFwiLXJ1bnRpbWVcIn1cblxuXHRpZiBkYXRhLlZhbGlkYXRlRmlsdGVycyh2LCBpbnB1dC5GaWx0ZXJzKTsgIXYuVmFsaWQoKSB7XG5cdFx0YXBwLmZhaWxlZFZhbGlkYXRpb25SZXNwb25zZSh3LCByLCB2LkVycm9ycylcblx0XHRyZXR1cm5cblx0fVxuXG5cdGZtdC5GcHJpbnRmKHcsIFwiJSt2XFxuXCIsIGlucHV0KVxufVxuLi4uXG5QYXRoOiBpbnRlcm5hbC92YWxpZGF0b3IvdmFsaWRhdG9yLmdvXG5wYWNrYWdlIHZhbGlkYXRvclxuXG5pbXBvcnQgKFxuXHRcInJlZ2V4cFwiXG5cdFwic2xpY2VzXCJcbilcblxudmFyIChcblx0RW1haWxSWCA9IHJlZ2V4cC5NdXN0Q29tcGlsZShcIl5bYS16QS1aMC05LiEjJCUmJyorXFxcXC89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFxcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiRcIilcbilcblxudHlwZSBWYWxpZGF0b3Igc3RydWN0IHtcblx0RXJyb3JzIG1hcFtzdHJpbmddc3RyaW5nXG59XG5cbmZ1bmMgTmV3KCkgKlZhbGlkYXRvciB7XG5cdHJldHVybiAmVmFsaWRhdG9ye0Vycm9yczogbWFrZShtYXBbc3RyaW5nXXN0cmluZyl9XG59XG5cbmZ1bmMgKHYgKlZhbGlkYXRvcikgVmFsaWQoKSBib29sIHtcblx0cmV0dXJuIGxlbih2LkVycm9ycykgPT0gMFxufVxuXG5mdW5jICh2ICpWYWxpZGF0b3IpIEFkZEVycm9yKGtleSwgbWVzc2FnZSBzdHJpbmcpIHtcblx0aWYgXywgZXhpc3RzIDo9IHYuRXJyb3JzW2tleV07ICFleGlzdHMge1xuXHRcdHYuRXJyb3JzW2tleV0gPSBtZXNzYWdlXG5cdH1cbn1cblxuZnVuYyAodiAqVmFsaWRhdG9yKSBDaGVjayhvayBib29sLCBrZXksIG1lc3NhZ2Ugc3RyaW5nKSB7XG5cdGlmICFvayB7XG5cdFx0di5BZGRFcnJvcihrZXksIG1lc3NhZ2UpXG5cdH1cbn1cblxuZnVuYyBJbih2YWx1ZSBzdHJpbmcsIGxpc3QgLi4uc3RyaW5nKSBib29sIHtcblx0cmV0dXJuIHNsaWNlcy5Db250YWlucyhsaXN0LCB2YWx1ZSlcbn1cblxuZnVuYyBNYXRjaGVzKHZhbHVlIHN0cmluZywgcnggKnJlZ2V4cC5SZWdleHApIGJvb2wge1xuXHRyZXR1cm4gcnguTWF0Y2hTdHJpbmcodmFsdWUpXG59XG5cbmZ1bmMgVW5pcXVlKHZhbHVlcyBbXXN0cmluZykgYm9vbCB7XG5cdHVuaXF1ZVZhbHVlcyA6PSBtYWtlKG1hcFtzdHJpbmddYm9vbClcblxuXHRmb3IgXywgdmFsdWUgOj0gcmFuZ2UgdmFsdWVzIHtcblx0XHR1bmlxdWVWYWx1ZXNbdmFsdWVdID0gdHJ1ZVxuXHR9XG5cblx0cmV0dXJuIGxlbih2YWx1ZXMpID09IGxlbih1bmlxdWVWYWx1ZXMpXG59XG4uLi5cblBhdGg6IG1pZ3JhdGlvbnMvMDAwMDAxX2NyZWF0ZV9tb3ZpZXNfdGFibGUudXAuc3FsXG5DUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBtb3ZpZXMgKFxuICAgIGlkIGJpZ3NlcmlhbCBQUklNQVJZIEtFWSxcbiAgICBjcmVhdGVkX2F0IHRpbWVzdGFtcCgwKSB3aXRoIHRpbWUgem9uZSBOT1QgTlVMTCBERUZBVUxUIE5PVygpLFxuICAgIHRpdGxlIHRleHQgTk9UIE5VTEwsXG4gICAgeWVhciBpbnRlZ2VyIE5PVCBOVUxMLFxuICAgIHJ1bnRpbWUgaW50ZWdlciBOT1QgTlVMTCxcbiAgICBnZW5yZXMgdGV4dFtdIE5PVCBOVUxMLFxuICAgIHZlcnNpb24gaW50ZWdlciBOT1QgTlVMTCBERUZBVUxUIDFcbik7XG4uLi5cblBhdGg6IGNtZC9hcGkvbWFpbi5nb1xucGFja2FnZSBtYWluXG5cbmltcG9ydCAoXG5cdFwiY29udGV4dFwiXG5cdFwiZGF0YWJhc2Uvc3FsXCJcblx0XCJmbGFnXCJcblx0XCJmbXRcIlxuXHRcImdyZWVubGlnaHQudHVuZGVvc2Jvcm5lL2ludGVybmFsL2RhdGFcIlxuXHRcImxvZ1wiXG5cdFwibmV0L2h0dHBcIlxuXHRcIm9zXCJcblx0XCJ0aW1lXCJcblxuXHRfIFwiZ2l0aHViLmNvbS9saWIvcHFcIlxuKVxuXG5jb25zdCB2ZXJzaW9uID0gXCIxLjAuMFwiXG5cbnR5cGUgY29uZmlnIHN0cnVjdCB7XG5cdHBvcnQgaW50XG5cdGVudiAgc3RyaW5nXG5cdGRiICAgc3RydWN0IHtcblx0XHRkc24gICAgICAgICAgc3RyaW5nXG5cdFx0bWF4T3BlbkNvbm5zIGludFxuXHRcdG1heElkbGVDb25ucyBpbnRcblx0XHRtYXhJZGxlVGltZSAgc3RyaW5nXG5cdH1cbn1cblxudHlwZSBhcHBsaWNhdGlvbiBzdHJ1Y3Qge1xuXHRjb25maWcgY29uZmlnXG5cdGxvZ2dlciAqbG9nLkxvZ2dlclxuXHRtb2RlbHMgZGF0YS5Nb2RlbHNcbn1cblxuZnVuYyBtYWluKCkge1xuXG5cdHZhciBjZmcgY29uZmlnXG5cblx0ZmxhZy5JbnRWYXIoJmNmZy5wb3J0LCBcInBvcnRcIiwgNDAwMCwgXCJBUEkgc2VydmVyIHBvcnRcIilcblx0ZmxhZy5TdHJpbmdWYXIoJmNmZy5lbnYsIFwiZW52XCIsIFwiZGV2ZWxvcG1lbnRcIiwgXCJFbnZpcm9ubWVudCAoZGV2ZWxvcG1lbnR8c3RhZ2luZ3xwcm9kdWN0aW9uKVwiKVxuXG5cdGZsYWcuU3RyaW5nVmFyKCZjZmcuZGIuZHNuLCBcImRiLWRzblwiLCBvcy5HZXRlbnYoXCJHUkVFTkxJR0hUX0RCX0RTTlwiKSwgXCJQb3N0Z3JlU1FMIERTTlwiKVxuXG5cdGZsYWcuSW50VmFyKCZjZmcuZGIubWF4T3BlbkNvbm5zLCBcImRiLW1heC1vcGVuLWNvbm5zXCIsIDI1LCBcIlBvc3RncmVTUUwgbWF4IG9wZW4gY29ubmVjdGlvbnNcIilcblxuXHRmbGFnLkludFZhcigmY2ZnLmRiLm1heElkbGVDb25ucywgXCJkYi1tYXgtaWRsZS1jb25uc1wiLCAyNSwgXCJQb3N0Z3JlU1FMIG1heCBpZGxlIGNvbm5lY3Rpb25zXCIpXG5cblx0ZmxhZy5TdHJpbmdWYXIoJmNmZy5kYi5tYXhJZGxlVGltZSwgXCJkYi1tYXgtaWRsZS10aW1lXCIsIFwiMTVtXCIsIFwiUG9zdGdyZVNRTCBtYXggY29ubmVjdGlvbiBpZGxlIHRpbWVcIilcblx0ZmxhZy5QYXJzZSgpXG5cblx0bG9nZ2VyIDo9IGxvZy5OZXcob3MuU3Rkb3V0LCBcIlwiLCBsb2cuTGRhdGV8bG9nLkx0aW1lKVxuXG5cdGRiLCBlcnIgOj0gb3BlbkRCKGNmZylcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0bG9nZ2VyLkZhdGFsKGVycilcblx0fVxuXG5cdGRlZmVyIGRiLkNsb3NlKClcblxuXHRsb2dnZXIuUHJpbnRmKFwiZGF0YWJhc2UgY29ubmVjdGlvbiBwb29sIGVzdGFibGlzaGVkXCIpXG5cblx0YXBwIDo9ICZhcHBsaWNhdGlvbntcblx0XHRjb25maWc6IGNmZyxcblx0XHRsb2dnZXI6IGxvZ2dlcixcblx0XHRtb2RlbHM6IGRhdGEuTmV3TW9kZWxzKGRiKSxcblx0fVxuXG5cdHNydiA6PSAmaHR0cC5TZXJ2ZXJ7XG5cdFx0QWRkcjogICAgICAgICBmbXQuU3ByaW50ZihcIjolZFwiLCBjZmcucG9ydCksXG5cdFx0SGFuZGxlcjogICAgICBhcHAucm91dGVzKCksXG5cdFx0SWRsZVRpbWVvdXQ6ICB0aW1lLk1pbnV0ZSxcblx0XHRSZWFkVGltZW91dDogIDEwICogdGltZS5TZWNvbmQsXG5cdFx0V3JpdGVUaW1lb3V0OiAzMCAqIHRpbWUuU2Vjb25kLFxuXHR9XG5cblx0bG9nZ2VyLlByaW50ZihcInN0YXJ0aW5nICVzIHNlcnZlciBvbiAlc1wiLCBjZmcuZW52LCBzcnYuQWRkcilcblx0ZXJyID0gc3J2Lkxpc3RlbkFuZFNlcnZlKClcblx0bG9nZ2VyLkZhdGFsKGVycilcbn1cblxuZnVuYyBvcGVuREIoY2ZnIGNvbmZpZykgKCpzcWwuREIsIGVycm9yKSB7XG5cblx0ZGIsIGVyciA6PSBzcWwuT3BlbihcInBvc3RncmVzXCIsIGNmZy5kYi5kc24pXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBuaWwsIGVyclxuXHR9XG5cblx0ZGIuU2V0TWF4T3BlbkNvbm5zKGNmZy5kYi5tYXhPcGVuQ29ubnMpXG5cblx0ZGIuU2V0TWF4SWRsZUNvbm5zKGNmZy5kYi5tYXhJZGxlQ29ubnMpXG5cblx0ZHVyYXRpb24sIGVyciA6PSB0aW1lLlBhcnNlRHVyYXRpb24oY2ZnLmRiLm1heElkbGVUaW1lKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHRyZXR1cm4gbmlsLCBlcnJcblx0fVxuXHRkYi5TZXRDb25uTWF4SWRsZVRpbWUoZHVyYXRpb24pXG5cblx0Y3R4LCBjYW5jZWwgOj0gY29udGV4dC5XaXRoVGltZW91dChjb250ZXh0LkJhY2tncm91bmQoKSwgNSp0aW1lLlNlY29uZClcblx0ZGVmZXIgY2FuY2VsKClcblxuXHRlcnIgPSBkYi5QaW5nQ29udGV4dChjdHgpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdHJldHVybiBuaWwsIGVyclxuXHR9XG5cblx0cmV0dXJuIGRiLCBuaWxcbn1cbi4uLlxuUGF0aDogY21kL2FwaS9oZWxwZXJzLmdvXG5wYWNrYWdlIG1haW5cblxuaW1wb3J0IChcblx0XCJlbmNvZGluZy9qc29uXCJcblx0XCJlcnJvcnNcIlxuXHRcImZtdFwiXG5cdFwiZ3JlZW5saWdodC50dW5kZW9zYm9ybmUvaW50ZXJuYWwvdmFsaWRhdG9yXCJcblx0XCJpb1wiXG5cdFwibmV0L2h0dHBcIlxuXHRcIm5ldC91cmxcIlxuXHRcInN0cmNvbnZcIlxuXHRcInN0cmluZ3NcIlxuXG5cdFwibWFwc1wiXG5cblx0XCJnaXRodWIuY29tL2p1bGllbnNjaG1pZHQvaHR0cHJvdXRlclwiXG4pXG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJlYWRJRFBhcmFtKHIgKmh0dHAuUmVxdWVzdCkgKGludDY0LCBlcnJvcikge1xuXHRwYXJhbXMgOj0gaHR0cHJvdXRlci5QYXJhbXNGcm9tQ29udGV4dChyLkNvbnRleHQoKSlcblxuXHRpZCwgZXJyIDo9IHN0cmNvbnYuUGFyc2VJbnQocGFyYW1zLkJ5TmFtZShcImlkXCIpLCAxMCwgNjQpXG5cdGlmIGVyciAhPSBuaWwgfHwgaWQgPCAxIHtcblx0XHRyZXR1cm4gMCwgZXJyb3JzLk5ldyhcImludmFsaWQgaWQgcGFyYW1ldGVyXCIpXG5cdH1cblx0cmV0dXJuIGlkLCBuaWxcbn1cblxudHlwZSBlbnZlbG9wZSBtYXBbc3RyaW5nXWludGVyZmFjZXt9XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHdyaXRlSlNPTih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHN0YXR1cyBpbnQsIGRhdGEgZW52ZWxvcGUsIGhlYWRlcnMgaHR0cC5IZWFkZXIpIGVycm9yIHtcblx0anMsIGVyciA6PSBqc29uLk1hcnNoYWxJbmRlbnQoZGF0YSwgXCJcIiwgXCJcXHRcIilcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0cmV0dXJuIGVyclxuXHR9XG5cblx0anMgPSBhcHBlbmQoanMsICdcXG4nKVxuXG5cdG1hcHMuQ29weSh3LkhlYWRlcigpLCBoZWFkZXJzKVxuXG5cdHcuSGVhZGVyKCkuU2V0KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxuXHR3LldyaXRlSGVhZGVyKHN0YXR1cylcblx0dy5Xcml0ZShqcylcblx0cmV0dXJuIG5pbFxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSByZWFkSlNPTih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCwgZHN0IGludGVyZmFjZXt9KSBlcnJvciB7XG5cblx0bWF4Qnl0ZXMgOj0gMV8wNDhfNTc2XG5cdHIuQm9keSA9IGh0dHAuTWF4Qnl0ZXNSZWFkZXIodywgci5Cb2R5LCBpbnQ2NChtYXhCeXRlcykpXG5cblx0ZGVjIDo9IGpzb24uTmV3RGVjb2RlcihyLkJvZHkpXG5cdGRlYy5EaXNhbGxvd1Vua25vd25GaWVsZHMoKVxuXG5cdGVyciA6PSBkZWMuRGVjb2RlKGRzdClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0dmFyIHN5bnRheEVycm9yICpqc29uLlN5bnRheEVycm9yXG5cdFx0dmFyIHVubWFyc2hhbFR5cGVFcnJvciAqanNvbi5Vbm1hcnNoYWxUeXBlRXJyb3Jcblx0XHR2YXIgaW52YWxpZFVubWFyc2hhbEVycm9yICpqc29uLkludmFsaWRVbm1hcnNoYWxFcnJvclxuXG5cdFx0c3dpdGNoIHtcblx0XHRjYXNlIGVycm9ycy5BcyhlcnIsICZzeW50YXhFcnJvcik6XG5cdFx0XHRyZXR1cm4gZm10LkVycm9yZihcImJvZHkgY29udGFpbnMgYmFkbHktZm9ybWVkIEpTT04gKGF0IGNoYXJhY3RlciAlZClcIiwgc3ludGF4RXJyb3IuT2Zmc2V0KVxuXG5cdFx0Y2FzZSBlcnJvcnMuSXMoZXJyLCBpby5FcnJVbmV4cGVjdGVkRU9GKTpcblx0XHRcdHJldHVybiBlcnJvcnMuTmV3KFwiYm9keSBjb250YWlucyBiYWRseS1mb3JtZWQgSlNPTlwiKVxuXG5cdFx0Y2FzZSBlcnJvcnMuQXMoZXJyLCAmdW5tYXJzaGFsVHlwZUVycm9yKTpcblx0XHRcdGlmIHVubWFyc2hhbFR5cGVFcnJvci5GaWVsZCAhPSBcIlwiIHtcblx0XHRcdFx0cmV0dXJuIGZtdC5FcnJvcmYoXCJib2R5IGNvbnRhaW5zIGluY29ycmVjdCBKU09OIHR5cGUgZm9yIGZpZWxkICVxXCIsIHVubWFyc2hhbFR5cGVFcnJvci5GaWVsZClcblx0XHRcdH1cblx0XHRcdHJldHVybiBmbXQuRXJyb3JmKFwiYm9keSBjb250YWlucyBpbmNvcnJlY3QgSlNPTiB0eXBlIChhdCBjaGFyYWN0ZXIgJWQpXCIsIHVubWFyc2hhbFR5cGVFcnJvci5PZmZzZXQpXG5cdFx0Y2FzZSBlcnJvcnMuSXMoZXJyLCBpby5FT0YpOlxuXHRcdFx0cmV0dXJuIGVycm9ycy5OZXcoXCJib2R5IG11c3Qgbm90IGJlIGVtcHR5XCIpXG5cblx0XHRjYXNlIHN0cmluZ3MuSGFzUHJlZml4KGVyci5FcnJvcigpLCBcImpzb246IHVua25vd24gZmllbGQgXCIpOlxuXHRcdFx0ZmllbGROYW1lIDo9IHN0cmluZ3MuVHJpbVByZWZpeChlcnIuRXJyb3IoKSwgXCJqc29uOiB1bmtub3duIGZpZWxkXCIpXG5cblx0XHRcdHJldHVybiBmbXQuRXJyb3JmKFwiYm9keSBjb250YWlucyB1bmtub3duIGtleSAlc1wiLCBmaWVsZE5hbWUpXG5cblx0XHRjYXNlIGVyci5FcnJvcigpID09IFwiaHR0cDogcmVxdWVzdCBib2R5IHRvbyBsYXJnZVwiOlxuXHRcdFx0cmV0dXJuIGZtdC5FcnJvcmYoXCJib2R5IG11c3Qgbm90IGJlIGxhcmdlciB0aGFuICVkIGJ5dGVzXCIsIG1heEJ5dGVzKVxuXHRcdGNhc2UgZXJyb3JzLkFzKGVyciwgJmludmFsaWRVbm1hcnNoYWxFcnJvcik6XG5cdFx0XHRwYW5pYyhlcnIpXG5cblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIGVyclxuXHRcdH1cblx0fVxuXG5cdGVyciA9IGRlYy5EZWNvZGUoJnN0cnVjdHt9e30pXG5cdGlmIGVyciAhPSBpby5FT0Yge1xuXHRcdHJldHVybiBlcnJvcnMuTmV3KFwiYm9keSBtdXN0IG9ubHkgY29udGFpbiBhIHNpbmdsZSBKU09OIHZhbHVlXCIpXG5cdH1cblxuXHRyZXR1cm4gbmlsXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJlYWRTdHJpbmcocXMgdXJsLlZhbHVlcywga2V5IHN0cmluZywgZGVmYXVsdFZhbHVlIHN0cmluZykgc3RyaW5nIHtcblx0cyA6PSBxcy5HZXQoa2V5KVxuXG5cdGlmIHMgPT0gXCJcIiB7XG5cdFx0cmV0dXJuIGRlZmF1bHRWYWx1ZVxuXHR9XG5cblx0cmV0dXJuIHNcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgcmVhZENTVihxcyB1cmwuVmFsdWVzLCBrZXkgc3RyaW5nLCBkZWZhdWx0VmFsdWUgW11zdHJpbmcpIFtdc3RyaW5nIHtcblx0Y3N2IDo9IHFzLkdldChrZXkpXG5cblx0aWYgY3N2ID09IFwiXCIge1xuXHRcdHJldHVybiBkZWZhdWx0VmFsdWVcblx0fVxuXG5cdHJldHVybiBzdHJpbmdzLlNwbGl0KGNzdiwgXCIsXCIpXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJlYWRJbnQocXMgdXJsLlZhbHVlcywga2V5IHN0cmluZywgZGVmYXVsdFZhbHVlIGludCwgdiAqdmFsaWRhdG9yLlZhbGlkYXRvcikgaW50IHtcblx0cyA6PSBxcy5HZXQoa2V5KVxuXG5cdGlmIHMgPT0gXCJcIiB7XG5cdFx0cmV0dXJuIGRlZmF1bHRWYWx1ZVxuXHR9XG5cblx0aSwgZXJyIDo9IHN0cmNvbnYuQXRvaShzKVxuXHRpZiBlcnIgIT0gbmlsIHtcblx0XHR2LkFkZEVycm9yKGtleSwgXCJtdXN0IGJlIGFuIGludGVnZXIgdmFsdWVcIilcblx0XHRyZXR1cm4gZGVmYXVsdFZhbHVlXG5cdH1cblxuXHRyZXR1cm4gaVxufVxuLi4uXG5QYXRoOiBtaWdyYXRpb25zLzAwMDAwMl9hZGRfbW92aWVzX2NoZWNrX2NvbnN0cmFpbnRzLnVwLnNxbFxuQUxURVIgVEFCTEUgbW92aWVzIEFERCBDT05TVFJBSU5UIG1vdmllc19ydW50aW1lX2NoZWNrIENIRUNLIChydW50aW1lID49IDApO1xuXG5BTFRFUiBUQUJMRSBtb3ZpZXMgQUREIENPTlNUUkFJTlQgbW92aWVzX3llYXJfY2hlY2sgQ0hFQ0sgKHllYXIgQkVUV0VFTiAxODg4IEFORCBkYXRlX3BhcnQoJ3llYXInLCBub3coKSkpO1xuXG5BTFRFUiBUQUJMRSBtb3ZpZXMgQUREIENPTlNUUkFJTlQgZ2VucmVzX2xlbmd0aF9jaGVjayBDSEVDSyAoYXJyYXlfbGVuZ3RoKGdlbnJlcywgMSkgQkVUV0VFTiAxIEFORCA1KTsuLi5cblBhdGg6IG1pZ3JhdGlvbnMvMDAwMDAxX2NyZWF0ZV9tb3ZpZXNfdGFibGUuZG93bi5zcWxcbkRST1AgVEFCTEUgSUYgRVhJU1RTIG1vdmllczsuLi5cblBhdGg6IG1pZ3JhdGlvbnMvMDAwMDAyX2FkZF9tb3ZpZXNfY2hlY2tfY29uc3RyYWludHMuZG93bi5zcWxcbkFMVEVSIFRBQkxFIG1vdmllcyBEUk9QIENPTlNUUkFJTlQgSUYgRVhJU1RTIG1vdmllc19ydW50aW1lX2NoZWNrO1xuXG5BTFRFUiBUQUJMRSBtb3ZpZXMgRFJPUCBDT05TVFJBSU5UIElGIEVYSVNUUyBtb3ZpZXNfeWVhcl9jaGVjaztcblxuQUxURVIgVEFCTEUgbW92aWVzIERST1AgQ09OU1RSQUlOVCBJRiBFWElTVFMgZ2VucmVzX2xlbmd0aF9jaGVjazsuLi5cblBhdGg6IFJFQURNRS5tZFxuIyBncmVlbmxpZ2h0XG4uLi5cblBhdGg6IGNtZC9hcGkvcm91dGVzLmdvXG5wYWNrYWdlIG1haW5cblxuaW1wb3J0IChcblx0XCJuZXQvaHR0cFwiXG5cblx0XCJnaXRodWIuY29tL2p1bGllbnNjaG1pZHQvaHR0cHJvdXRlclwiXG4pXG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIHJvdXRlcygpICpodHRwcm91dGVyLlJvdXRlciB7XG5cdHJvdXRlciA6PSBodHRwcm91dGVyLk5ldygpXG5cblx0cm91dGVyLk5vdEZvdW5kID0gaHR0cC5IYW5kbGVyRnVuYyhhcHAubm90Rm91bmRSZXNwb25zZSlcblx0cm91dGVyLk1ldGhvZE5vdEFsbG93ZWQgPSBodHRwLkhhbmRsZXJGdW5jKGFwcC5tZXRob2ROb3RBbGxvd2VkUmVzcG9uc2UpXG5cblx0cm91dGVyLkhhbmRsZXJGdW5jKGh0dHAuTWV0aG9kR2V0LCBcIi92MS9oZWFsdGhjaGVja1wiLCBhcHAuaGVhbHRoY2hlY2tIYW5kbGVyKVxuXHRyb3V0ZXIuSGFuZGxlckZ1bmMoaHR0cC5NZXRob2RQb3N0LCBcIi92MS9tb3ZpZXNcIiwgYXBwLmNyZWF0ZU1vdmllSGFuZGxlcilcblx0cm91dGVyLkhhbmRsZXJGdW5jKGh0dHAuTWV0aG9kR2V0LCBcIi92MS9tb3ZpZXMvOmlkXCIsIGFwcC5zaG93TW92aWVIYW5kbGVyKVxuXHRyb3V0ZXIuSGFuZGxlckZ1bmMoaHR0cC5NZXRob2RQYXRjaCwgXCIvdjEvbW92aWVzLzppZFwiLCBhcHAudXBkYXRlTW92aWVIYW5kbGVyKVxuXHRyb3V0ZXIuSGFuZGxlckZ1bmMoaHR0cC5NZXRob2REZWxldGUsIFwiL3YxL21vdmllcy86aWRcIiwgYXBwLmRlbGV0ZU1vdmllSGFuZGxlcilcblx0cmV0dXJuIHJvdXRlclxufVxuLi4uXG5QYXRoOiBnby5tb2Rcbm1vZHVsZSBncmVlbmxpZ2h0LnR1bmRlb3Nib3JuZVxuXG5nbyAxLjIzLjVcblxucmVxdWlyZSBnaXRodWIuY29tL2p1bGllbnNjaG1pZHQvaHR0cHJvdXRlciB2MS4zLjBcblxucmVxdWlyZSBnaXRodWIuY29tL2xpYi9wcSB2MS4xMC4wIC8vIGluZGlyZWN0XG4uLi5cblBhdGg6IGNtZC9hcGkvZXJyb3JzLmdvXG5wYWNrYWdlIG1haW5cblxuaW1wb3J0IChcblx0XCJmbXRcIlxuXHRcIm5ldC9odHRwXCJcbilcblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgbG9nRXJyb3IociAqaHR0cC5SZXF1ZXN0LCBlcnIgZXJyb3IpIHtcblx0YXBwLmxvZ2dlci5QcmludGxuKGVycilcbn1cblxuZnVuYyAoYXBwICphcHBsaWNhdGlvbikgZXJyb3JSZXNwb25zZSh3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCwgc3RhdHVzIGludCwgbWVzc2FnZSBpbnRlcmZhY2V7fSkge1xuXG5cdGVudiA6PSBlbnZlbG9wZXtcImVycm9yXCI6IG1lc3NhZ2V9XG5cblx0ZXJyIDo9IGFwcC53cml0ZUpTT04odywgc3RhdHVzLCBlbnYsIG5pbClcblx0aWYgZXJyICE9IG5pbCB7XG5cdFx0YXBwLmxvZ0Vycm9yKHIsIGVycilcblx0XHR3LldyaXRlSGVhZGVyKDUwMClcblx0fVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBzZXJ2ZXJFcnJvclJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBlcnIgZXJyb3IpIHtcblx0YXBwLmxvZ0Vycm9yKHIsIGVycilcblxuXHRtZXNzYWdlIDo9IFwidGhlIHNlcnZlciBlbmNvdW50ZXJlZCBhIHByb2JsZW0gYW5kIGNvdWxkIG5vdCBwcm9jZXNzIHlvdXIgcmVxdWVzdFwiXG5cdGFwcC5lcnJvclJlc3BvbnNlKHcsIHIsIGh0dHAuU3RhdHVzSW50ZXJuYWxTZXJ2ZXJFcnJvciwgbWVzc2FnZSlcblxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBub3RGb3VuZFJlc3BvbnNlKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7XG5cdG1lc3NhZ2UgOj0gXCJ0aGUgcmVxdWVzdGVkIHJlc291cmNlIGNvdWxkIG5vdCBiZSBmb3VuZFwiXG5cdGFwcC5lcnJvclJlc3BvbnNlKHcsIHIsIGh0dHAuU3RhdHVzTm90Rm91bmQsIG1lc3NhZ2UpXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIG1ldGhvZE5vdEFsbG93ZWRSZXNwb25zZSh3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkge1xuXHRtZXNzYWdlIDo9IGZtdC5TcHJpbnRmKFwidGhlICVzIG1ldGhvZCBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIHJlc291cmNlXCIsIHIuTWV0aG9kKVxuXHRhcHAuZXJyb3JSZXNwb25zZSh3LCByLCBodHRwLlN0YXR1c01ldGhvZE5vdEFsbG93ZWQsIG1lc3NhZ2UpXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIGJhZFJlcXVlc3RSZXNwb25zZSh3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCwgZXJyIGVycm9yKSB7XG5cdGFwcC5lcnJvclJlc3BvbnNlKHcsIHIsIGh0dHAuU3RhdHVzQmFkUmVxdWVzdCwgZXJyLkVycm9yKCkpXG59XG5cbmZ1bmMgKGFwcCAqYXBwbGljYXRpb24pIGZhaWxlZFZhbGlkYXRpb25SZXNwb25zZSh3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCwgZXJyb3JzIG1hcFtzdHJpbmddc3RyaW5nKSB7XG5cdGFwcC5lcnJvclJlc3BvbnNlKHcsIHIsIGh0dHAuU3RhdHVzVW5wcm9jZXNzYWJsZUVudGl0eSwgZXJyb3JzKVxufVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBlZGl0Q29uZmxpY3RSZXNwb25zZSh3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkge1xuXHRtZXNzYWdlIDo9IFwidW5hYmxlIHRvIHVwZGF0ZSB0aGUgcmVjb3JkIGR1ZSB0byBlZGl0IGNvbmZsaWN0LCBwbGVhc2UgdHJ5IGFnYWluXCJcblxuXHRhcHAuZXJyb3JSZXNwb25zZSh3LCByLCBodHRwLlN0YXR1c0NvbmZsaWN0LCBtZXNzYWdlKVxufVxuLi4uXG5QYXRoOiBnby5zdW1cbmdpdGh1Yi5jb20vanVsaWVuc2NobWlkdC9odHRwcm91dGVyIHYxLjMuMCBoMTpVMDYwOWU5dGdic2V1M3JCSU5ldDlQNDhBSS9EM29KczRkTjdqd0pPUTFVPVxuZ2l0aHViLmNvbS9qdWxpZW5zY2htaWR0L2h0dHByb3V0ZXIgdjEuMy4wL2dvLm1vZCBoMTpKUjZXdEhiKzJMVWU4VENLWTNjWk94Rnl5TzhJWkFjNFJWY3ljQ0NBS2RNPVxuZ2l0aHViLmNvbS9saWIvcHEgdjEuMTAuMCBoMTpaeDVESkZFWVFYaW85M2tnWG5RMDlmWE5pVUtzcXY0T1VFdTJVdEdjQjFFPVxuZ2l0aHViLmNvbS9saWIvcHEgdjEuMTAuMC9nby5tb2QgaDE6QWxWTjV4NEU0VDU0NHRXekg2aEtmYmZRdm0zSGRiT3hybWdnRE5BUFk5bz1cbi4uLlxuUGF0aDogY21kL2FwaS9oZWFsdGhjaGVjay5nb1xucGFja2FnZSBtYWluXG5cbmltcG9ydCAoXG5cdFwibmV0L2h0dHBcIlxuKVxuXG5mdW5jIChhcHAgKmFwcGxpY2F0aW9uKSBoZWFsdGhjaGVja0hhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHtcblxuXHRlbnYgOj0gZW52ZWxvcGV7XG5cdFx0XCJzdGF0dXNcIjogXCJhdmFpbGFibGVcIixcblx0XHRcInN5c3RlbV9pbmZvXCI6IG1hcFtzdHJpbmddc3RyaW5ne1xuXHRcdFx0XCJlbnZpcm9ubWVudFwiOiBhcHAuY29uZmlnLmVudixcblx0XHRcdFwidmVyc2lvblwiOiAgICAgdmVyc2lvbixcblx0XHR9LFxuXHR9XG5cblx0ZXJyIDo9IGFwcC53cml0ZUpTT04odywgaHR0cC5TdGF0dXNPSywgZW52LCBuaWwpXG5cdGlmIGVyciAhPSBuaWwge1xuXHRcdGFwcC5sb2dnZXIuUHJpbnRsbihlcnIpXG5cdFx0YXBwLnNlcnZlckVycm9yUmVzcG9uc2UodywgciwgZXJyKVxuXHR9XG5cbn1cbi4uLlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiNjM3ZTQ5ZjAtMWUzMS00NTI0LTllZWItN2UxNTZjYzY0ODNjO3Rvb2x1X3ZydHhfMDFTMnRGVHBZb2ZVY254OUY2WFFFZDZBIjp7InJlcXVlc3RJZCI6IjYzN2U0OWYwLTFlMzEtNDUyNC05ZWViLTdlMTU2Y2M2NDgzYyIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFTMnRGVHBZb2ZVY254OUY2WFFFZDZBIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBpbnRlcm5hbC9kYXRhL2ZpbHRlcnMuZ286XG4gICAgIDFcdHBhY2thZ2UgZGF0YVxuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IFwiZ3JlZW5saWdodC50dW5kZW9zYm9ybmUvaW50ZXJuYWwvdmFsaWRhdG9yXCJcbiAgICAgNFx0XG4gICAgIDVcdHR5cGUgRmlsdGVycyBzdHJ1Y3Qge1xuICAgICA2XHRcdFBhZ2UgICAgICAgICBpbnRcbiAgICAgN1x0XHRQYWdlU2l6ZSAgICAgaW50XG4gICAgIDhcdFx0U29ydCAgICAgICAgIHN0cmluZ1xuICAgICA5XHRcdFNvcnRTYWZlbGlzdCBbXXN0cmluZ1xuICAgIDEwXHR9XG4gICAgMTFcdFxuICAgIDEyXHRmdW5jIFZhbGlkYXRlRmlsdGVycyh2ICp2YWxpZGF0b3IuVmFsaWRhdG9yLCBmIEZpbHRlcnMpIHtcbiAgICAxM1x0XHR2LkNoZWNrKGYuUGFnZSA+IDAsIFwicGFnZVwiLCBcIm11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm9cIilcbiAgICAxNFx0XHR2LkNoZWNrKGYuUGFnZSA8PSAxMF8wMDBfMDAwLCBcInBhZ2VcIiwgXCJtdXN0IGJlIGEgbWF4aW11bSBvZiAxMCBtaWxsaW9uXCIpXG4gICAgMTVcdFx0di5DaGVjayhmLlBhZ2VTaXplID4gMCwgXCJwYWdlX3NpemVcIiwgXCJtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvXCIpXG4gICAgMTZcdFx0di5DaGVjayhmLlBhZ2VTaXplIDw9IDEwMCwgXCJwYWdlX3NpemVcIiwgXCJtdXN0IGJlIGEgbWF4aW11bSBvZiAxMDBcIilcbiAgICAxN1x0XHR2LkNoZWNrKHZhbGlkYXRvci5JbihmLlNvcnQsIGYuU29ydFNhZmVsaXN0Li4uKSwgXCJzb3J0XCIsIFwiaW52YWxpZCBzb3J0IHZhbHVlXCIpXG4gICAgMThcdH1cbiAgICAxOVx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxOVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fX0sImRyYWZ0RXhjaGFuZ2UiOnsicmVxdWVzdF9tZXNzYWdlIjoiIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCJ9XX0sInN0YXR1cyI6ImRyYWZ0In0sInJlcXVlc3RJZHMiOltdLCJpc1Bpbm5lZCI6ZmFsc2UsImlzU2hhcmVhYmxlIjp0cnVlLCJleHRyYURhdGEiOnsiaXNBZ2VudENvbnZlcnNhdGlvbiI6dHJ1ZSwiaGFzQWdlbnRPbmJvYXJkZWQiOnRydWUsImhhc0RpcnR5RWRpdHMiOmZhbHNlfSwicGVyc29uYVR5cGUiOjB9fSwiYWdlbnRFeGVjdXRpb25Nb2RlIjoibWFudWFsIiwiaXNBZ2VudEVkaXRzQ29sbGFwc2VkIjp0cnVlfQ==" />
      </map>
    </option>
  </component>
</project>